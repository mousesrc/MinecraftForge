--- ../src-base/minecraft/net/minecraft/entity/item/EntityFallingBlock.java
+++ ../src-work/minecraft/net/minecraft/entity/item/EntityFallingBlock.java
@@ -29,6 +29,7 @@
 import net.minecraft.world.World;
 import net.minecraftforge.fml.relauncher.Side;
 import net.minecraftforge.fml.relauncher.SideOnly;
+import org.bukkit.craftbukkit.event.CraftEventFactory;
 
 public class EntityFallingBlock extends Entity
 {
@@ -107,12 +108,9 @@
             {
                 BlockPos blockpos = new BlockPos(this);
 
-                if (this.field_70170_p.func_180495_p(blockpos).func_177230_c() == block)
-                {
+                if (this.field_70170_p.func_180495_p(blockpos).func_177230_c() == block && !CraftEventFactory.callEntityChangeBlockEvent(this, blockpos, Blocks.field_150350_a, 0).isCancelled()) {
                     this.field_70170_p.func_175698_g(blockpos);
-                }
-                else if (!this.field_70170_p.field_72995_K)
-                {
+                } else if (!this.field_70170_p.field_72995_K) {
                     this.func_70106_y();
                     return;
                 }
@@ -136,10 +134,11 @@
                 {
                     IBlockState iblockstate = this.field_70170_p.func_180495_p(blockpos1);
 
+                    if (this.field_70170_p.func_175623_d(new BlockPos(this.field_70165_t, this.field_70163_u - 0.009999999776482582D, this.field_70161_v))) //Forge: Don't indent below.
                     if (BlockFalling.func_185759_i(this.field_70170_p.func_180495_p(new BlockPos(this.field_70165_t, this.field_70163_u - 0.009999999776482582D, this.field_70161_v))))
                     {
                         this.field_70122_E = false;
-                        return;
+                        //return;
                     }
 
                     this.field_70159_w *= 0.699999988079071D;
@@ -152,14 +151,19 @@
 
                         if (!this.field_145808_f)
                         {
-                            if (this.field_70170_p.func_190527_a(block, blockpos1, true, EnumFacing.UP, (Entity)null) && !BlockFalling.func_185759_i(this.field_70170_p.func_180495_p(blockpos1.func_177977_b())) && this.field_70170_p.func_180501_a(blockpos1, this.field_175132_d, 3))
-                            {
+                            // CraftBukkit start
+                            if (this.field_70170_p.func_190527_a(block, blockpos1, true, EnumFacing.UP, (Entity) null) && !BlockFalling.func_185759_i(this.field_70170_p.func_180495_p(blockpos1.func_177977_b()))) {
+                                if (CraftEventFactory.callEntityChangeBlockEvent(this, blockpos1, this.field_175132_d.func_177230_c(), this.field_175132_d.func_177230_c().func_176201_c(this.field_175132_d)).isCancelled()) {
+                                    return;
+                                }
+                                this.field_70170_p.func_180501_a(blockpos1, this.field_175132_d, 3);
+                                // CraftBukkit end
                                 if (block instanceof BlockFalling)
                                 {
                                     ((BlockFalling)block).func_176502_a_(this.field_70170_p, blockpos1);
                                 }
 
-                                if (this.field_145810_d != null && block instanceof ITileEntityProvider)
+                                if (this.field_145810_d != null && block.hasTileEntity(this.field_175132_d))
                                 {
                                     TileEntity tileentity = this.field_70170_p.func_175625_s(blockpos1);
 
@@ -206,38 +210,33 @@
         }
     }
 
-    public void func_180430_e(float p_180430_1_, float p_180430_2_)
-    {
+    public void func_180430_e(float p_180430_1_, float p_180430_2_) {
         Block block = this.field_175132_d.func_177230_c();
 
-        if (this.field_145809_g)
-        {
+        if (this.field_145809_g) {
             int i = MathHelper.func_76123_f(p_180430_1_ - 1.0F);
 
-            if (i > 0)
-            {
+            if (i > 0) {
                 List<Entity> list = Lists.newArrayList(this.field_70170_p.func_72839_b(this, this.func_174813_aQ()));
                 boolean flag = block == Blocks.field_150467_bQ;
                 DamageSource damagesource = flag ? DamageSource.field_82728_o : DamageSource.field_82729_p;
 
-                for (Entity entity : list)
-                {
-                    entity.func_70097_a(damagesource, (float)Math.min(MathHelper.func_76141_d((float)i * this.field_145816_i), this.field_145815_h));
-                }
+                for (Entity entity : list) {
 
-                if (flag && (double)this.field_70146_Z.nextFloat() < 0.05000000074505806D + (double)i * 0.05D)
-                {
-                    int j = ((Integer)this.field_175132_d.func_177229_b(BlockAnvil.field_176505_b)).intValue();
-                    ++j;
+                    CraftEventFactory.entityDamage = this; // CraftBukkit
+                    entity.func_70097_a(damagesource, (float) Math.min(MathHelper.func_76141_d((float) i * this.field_145816_i), this.field_145815_h));
+                    CraftEventFactory.entityDamage = null; // CraftBukkit                }
 
-                    if (j > 2)
-                    {
-                        this.field_145808_f = true;
+                    if (flag && (double) this.field_70146_Z.nextFloat() < 0.05000000074505806D + (double) i * 0.05D) {
+                        int j = ((Integer) this.field_175132_d.func_177229_b(BlockAnvil.field_176505_b)).intValue();
+                        ++j;
+
+                        if (j > 2) {
+                            this.field_145808_f = true;
+                        } else {
+                            this.field_175132_d = this.field_175132_d.func_177226_a(BlockAnvil.field_176505_b, Integer.valueOf(j));
+                        }
                     }
-                    else
-                    {
-                        this.field_175132_d = this.field_175132_d.func_177226_a(BlockAnvil.field_176505_b, Integer.valueOf(j));
-                    }
                 }
             }
         }
