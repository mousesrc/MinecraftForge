--- ../src-base/minecraft/net/minecraft/entity/EntityAreaEffectCloud.java
+++ ../src-work/minecraft/net/minecraft/entity/EntityAreaEffectCloud.java
@@ -2,10 +2,8 @@
 
 import com.google.common.collect.Lists;
 import com.google.common.collect.Maps;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Map;
-import java.util.UUID;
+
+import java.util.*;
 import java.util.Map.Entry;
 import javax.annotation.Nullable;
 import net.minecraft.block.material.EnumPushReaction;
@@ -23,213 +21,230 @@
 import net.minecraft.util.math.MathHelper;
 import net.minecraft.world.World;
 import net.minecraft.world.WorldServer;
+import org.bukkit.craftbukkit.entity.CraftLivingEntity;
+import org.bukkit.entity.LivingEntity;
 
 public class EntityAreaEffectCloud extends Entity
 {
-    private static final DataParameter<Float> field_184498_a = EntityDataManager.<Float>func_187226_a(EntityAreaEffectCloud.class, DataSerializers.field_187193_c);
-    private static final DataParameter<Integer> field_184499_b = EntityDataManager.<Integer>func_187226_a(EntityAreaEffectCloud.class, DataSerializers.field_187192_b);
-    private static final DataParameter<Boolean> field_184500_c = EntityDataManager.<Boolean>func_187226_a(EntityAreaEffectCloud.class, DataSerializers.field_187198_h);
-    private static final DataParameter<Integer> field_184501_d = EntityDataManager.<Integer>func_187226_a(EntityAreaEffectCloud.class, DataSerializers.field_187192_b);
-    private static final DataParameter<Integer> field_189736_e = EntityDataManager.<Integer>func_187226_a(EntityAreaEffectCloud.class, DataSerializers.field_187192_b);
-    private static final DataParameter<Integer> field_189737_f = EntityDataManager.<Integer>func_187226_a(EntityAreaEffectCloud.class, DataSerializers.field_187192_b);
-    private PotionType field_184502_e;
-    public final List<PotionEffect> field_184503_f;
-    private final Map<Entity, Integer> field_184504_g;
-    private int field_184505_h;
-    public int field_184506_as;
-    public int field_184507_at;
-    private boolean field_184508_au;
-    public int field_184509_av;
-    public float field_184510_aw;
-    public float field_184511_ax;
-    private EntityLivingBase field_184512_ay;
-    private UUID field_184513_az;
+    private static final DataParameter<Float> RADIUS = EntityDataManager.<Float>createKey(EntityAreaEffectCloud.class, DataSerializers.FLOAT);
+    private static final DataParameter<Integer> COLOR = EntityDataManager.<Integer>createKey(EntityAreaEffectCloud.class, DataSerializers.VARINT);
+    private static final DataParameter<Boolean> IGNORE_RADIUS = EntityDataManager.<Boolean>createKey(EntityAreaEffectCloud.class, DataSerializers.BOOLEAN);
+    private static final DataParameter<Integer> PARTICLE = EntityDataManager.<Integer>createKey(EntityAreaEffectCloud.class, DataSerializers.VARINT);
+    private static final DataParameter<Integer> PARTICLE_PARAM_1 = EntityDataManager.<Integer>createKey(EntityAreaEffectCloud.class, DataSerializers.VARINT);
+    private static final DataParameter<Integer> PARTICLE_PARAM_2 = EntityDataManager.<Integer>createKey(EntityAreaEffectCloud.class, DataSerializers.VARINT);
+    private PotionType potion;
+    public final List<PotionEffect> effects;
+    private final Map<Entity, Integer> reapplicationDelayMap;
+    private int duration;
+    public int waitTime;
+    public int reapplicationDelay;
+    private boolean colorSet;
+    public int durationOnUse;
+    public float radiusOnUse;
+    public float radiusPerTick;
+    private EntityLivingBase owner;
+    private UUID ownerUniqueId;
 
-    public EntityAreaEffectCloud(World p_i46809_1_)
+    public EntityAreaEffectCloud(World worldIn)
     {
-        super(p_i46809_1_);
-        this.field_184502_e = PotionTypes.field_185229_a;
-        this.field_184503_f = Lists.<PotionEffect>newArrayList();
-        this.field_184504_g = Maps.<Entity, Integer>newHashMap();
-        this.field_184505_h = 600;
-        this.field_184506_as = 20;
-        this.field_184507_at = 20;
-        this.field_70145_X = true;
-        this.field_70178_ae = true;
-        this.func_184483_a(3.0F);
+        super(worldIn);
+        this.potion = PotionTypes.EMPTY;
+        this.effects = Lists.<PotionEffect>newArrayList();
+        this.reapplicationDelayMap = Maps.<Entity, Integer>newHashMap();
+        this.duration = 600;
+        this.waitTime = 20;
+        this.reapplicationDelay = 20;
+        this.noClip = true;
+        this.isImmuneToFire = true;
+        this.setRadius(3.0F);
     }
 
-    public EntityAreaEffectCloud(World p_i46810_1_, double p_i46810_2_, double p_i46810_4_, double p_i46810_6_)
+    // CraftBukkit start accessor methods
+    public void refreshEffects() {
+        if (!this.colorSet) {
+            this.getDataManager().set(net.minecraft.entity.EntityAreaEffectCloud.COLOR, Integer.valueOf(PotionUtils.getPotionColorFromEffectList((Collection) PotionUtils.mergeEffects(this.potion, (Collection) this.effects)))); // PAIL: rename
+        }
+    }
+
+    public String getType() {
+        return ((ResourceLocation) PotionType.REGISTRY.getNameForObject(this.potion)).toString(); // PAIL: rename
+    }
+
+    public void setType(String string) {
+        setPotion(PotionType.REGISTRY.getObject(new ResourceLocation(string))); // PAIL: rename
+    }
+    // CraftBukkit end
+    public EntityAreaEffectCloud(World worldIn, double x, double y, double z)
     {
-        this(p_i46810_1_);
-        this.func_70107_b(p_i46810_2_, p_i46810_4_, p_i46810_6_);
+        this(worldIn);
+        this.setPosition(x, y, z);
     }
 
-    protected void func_70088_a()
+    protected void entityInit()
     {
-        this.func_184212_Q().func_187214_a(field_184499_b, Integer.valueOf(0));
-        this.func_184212_Q().func_187214_a(field_184498_a, Float.valueOf(0.5F));
-        this.func_184212_Q().func_187214_a(field_184500_c, Boolean.valueOf(false));
-        this.func_184212_Q().func_187214_a(field_184501_d, Integer.valueOf(EnumParticleTypes.SPELL_MOB.func_179348_c()));
-        this.func_184212_Q().func_187214_a(field_189736_e, Integer.valueOf(0));
-        this.func_184212_Q().func_187214_a(field_189737_f, Integer.valueOf(0));
+        this.getDataManager().register(COLOR, Integer.valueOf(0));
+        this.getDataManager().register(RADIUS, Float.valueOf(0.5F));
+        this.getDataManager().register(IGNORE_RADIUS, Boolean.valueOf(false));
+        this.getDataManager().register(PARTICLE, Integer.valueOf(EnumParticleTypes.SPELL_MOB.getParticleID()));
+        this.getDataManager().register(PARTICLE_PARAM_1, Integer.valueOf(0));
+        this.getDataManager().register(PARTICLE_PARAM_2, Integer.valueOf(0));
     }
 
-    public void func_184483_a(float p_184483_1_)
+    public void setRadius(float radiusIn)
     {
-        double d0 = this.field_70165_t;
-        double d1 = this.field_70163_u;
-        double d2 = this.field_70161_v;
-        this.func_70105_a(p_184483_1_ * 2.0F, 0.5F);
-        this.func_70107_b(d0, d1, d2);
+        double d0 = this.posX;
+        double d1 = this.posY;
+        double d2 = this.posZ;
+        this.setSize(radiusIn * 2.0F, 0.5F);
+        this.setPosition(d0, d1, d2);
 
-        if (!this.field_70170_p.field_72995_K)
+        if (!this.world.isRemote)
         {
-            this.func_184212_Q().func_187227_b(field_184498_a, Float.valueOf(p_184483_1_));
+            this.getDataManager().set(RADIUS, Float.valueOf(radiusIn));
         }
     }
 
-    public float func_184490_j()
+    public float getRadius()
     {
-        return ((Float)this.func_184212_Q().func_187225_a(field_184498_a)).floatValue();
+        return ((Float)this.getDataManager().get(RADIUS)).floatValue();
     }
 
-    public void func_184484_a(PotionType p_184484_1_)
+    public void setPotion(PotionType potionIn)
     {
-        this.field_184502_e = p_184484_1_;
+        this.potion = potionIn;
 
-        if (!this.field_184508_au)
+        if (!this.colorSet)
         {
-            this.func_190618_C();
+            this.updateFixedColor();
         }
     }
 
-    private void func_190618_C()
+    private void updateFixedColor()
     {
-        if (this.field_184502_e == PotionTypes.field_185229_a && this.field_184503_f.isEmpty())
+        if (this.potion == PotionTypes.EMPTY && this.effects.isEmpty())
         {
-            this.func_184212_Q().func_187227_b(field_184499_b, Integer.valueOf(0));
+            this.getDataManager().set(COLOR, Integer.valueOf(0));
         }
         else
         {
-            this.func_184212_Q().func_187227_b(field_184499_b, Integer.valueOf(PotionUtils.func_185181_a(PotionUtils.func_185186_a(this.field_184502_e, this.field_184503_f))));
+            this.getDataManager().set(COLOR, Integer.valueOf(PotionUtils.getPotionColorFromEffectList(PotionUtils.mergeEffects(this.potion, this.effects))));
         }
     }
 
-    public void func_184496_a(PotionEffect p_184496_1_)
+    public void addEffect(PotionEffect effect)
     {
-        this.field_184503_f.add(p_184496_1_);
+        this.effects.add(effect);
 
-        if (!this.field_184508_au)
+        if (!this.colorSet)
         {
-            this.func_190618_C();
+            this.updateFixedColor();
         }
     }
 
-    public int func_184492_k()
+    public int getColor()
     {
-        return ((Integer)this.func_184212_Q().func_187225_a(field_184499_b)).intValue();
+        return ((Integer)this.getDataManager().get(COLOR)).intValue();
     }
 
-    public void func_184482_a(int p_184482_1_)
+    public void setColor(int colorIn)
     {
-        this.field_184508_au = true;
-        this.func_184212_Q().func_187227_b(field_184499_b, Integer.valueOf(p_184482_1_));
+        this.colorSet = true;
+        this.getDataManager().set(COLOR, Integer.valueOf(colorIn));
     }
 
-    public EnumParticleTypes func_184493_l()
+    public EnumParticleTypes getParticle()
     {
-        return EnumParticleTypes.func_179342_a(((Integer)this.func_184212_Q().func_187225_a(field_184501_d)).intValue());
+        return EnumParticleTypes.getParticleFromId(((Integer)this.getDataManager().get(PARTICLE)).intValue());
     }
 
-    public void func_184491_a(EnumParticleTypes p_184491_1_)
+    public void setParticle(EnumParticleTypes particleIn)
     {
-        this.func_184212_Q().func_187227_b(field_184501_d, Integer.valueOf(p_184491_1_.func_179348_c()));
+        this.getDataManager().set(PARTICLE, Integer.valueOf(particleIn.getParticleID()));
     }
 
-    public int func_189733_n()
+    public int getParticleParam1()
     {
-        return ((Integer)this.func_184212_Q().func_187225_a(field_189736_e)).intValue();
+        return ((Integer)this.getDataManager().get(PARTICLE_PARAM_1)).intValue();
     }
 
-    public void func_189734_b(int p_189734_1_)
+    public void setParticleParam1(int particleParam)
     {
-        this.func_184212_Q().func_187227_b(field_189736_e, Integer.valueOf(p_189734_1_));
+        this.getDataManager().set(PARTICLE_PARAM_1, Integer.valueOf(particleParam));
     }
 
-    public int func_189735_o()
+    public int getParticleParam2()
     {
-        return ((Integer)this.func_184212_Q().func_187225_a(field_189737_f)).intValue();
+        return ((Integer)this.getDataManager().get(PARTICLE_PARAM_2)).intValue();
     }
 
-    public void func_189732_d(int p_189732_1_)
+    public void setParticleParam2(int particleParam)
     {
-        this.func_184212_Q().func_187227_b(field_189737_f, Integer.valueOf(p_189732_1_));
+        this.getDataManager().set(PARTICLE_PARAM_2, Integer.valueOf(particleParam));
     }
 
-    protected void func_184488_a(boolean p_184488_1_)
+    protected void setIgnoreRadius(boolean ignoreRadius)
     {
-        this.func_184212_Q().func_187227_b(field_184500_c, Boolean.valueOf(p_184488_1_));
+        this.getDataManager().set(IGNORE_RADIUS, Boolean.valueOf(ignoreRadius));
     }
 
-    public boolean func_184497_n()
+    public boolean shouldIgnoreRadius()
     {
-        return ((Boolean)this.func_184212_Q().func_187225_a(field_184500_c)).booleanValue();
+        return ((Boolean)this.getDataManager().get(IGNORE_RADIUS)).booleanValue();
     }
 
-    public int func_184489_o()
+    public int getDuration()
     {
-        return this.field_184505_h;
+        return this.duration;
     }
 
-    public void func_184486_b(int p_184486_1_)
+    public void setDuration(int durationIn)
     {
-        this.field_184505_h = p_184486_1_;
+        this.duration = durationIn;
     }
 
-    public void func_70071_h_()
+    public void onUpdate()
     {
-        super.func_70071_h_();
-        boolean flag = this.func_184497_n();
-        float f = this.func_184490_j();
+        super.onUpdate();
+        boolean flag = this.shouldIgnoreRadius();
+        float f = this.getRadius();
 
-        if (this.field_70170_p.field_72995_K)
+        if (this.world.isRemote)
         {
-            EnumParticleTypes enumparticletypes = this.func_184493_l();
-            int[] aint = new int[enumparticletypes.func_179345_d()];
+            EnumParticleTypes enumparticletypes = this.getParticle();
+            int[] aint = new int[enumparticletypes.getArgumentCount()];
 
             if (aint.length > 0)
             {
-                aint[0] = this.func_189733_n();
+                aint[0] = this.getParticleParam1();
             }
 
             if (aint.length > 1)
             {
-                aint[1] = this.func_189735_o();
+                aint[1] = this.getParticleParam2();
             }
 
             if (flag)
             {
-                if (this.field_70146_Z.nextBoolean())
+                if (this.rand.nextBoolean())
                 {
                     for (int i = 0; i < 2; ++i)
                     {
-                        float f1 = this.field_70146_Z.nextFloat() * ((float)Math.PI * 2F);
-                        float f2 = MathHelper.func_76129_c(this.field_70146_Z.nextFloat()) * 0.2F;
-                        float f3 = MathHelper.func_76134_b(f1) * f2;
-                        float f4 = MathHelper.func_76126_a(f1) * f2;
+                        float f1 = this.rand.nextFloat() * ((float)Math.PI * 2F);
+                        float f2 = MathHelper.sqrt(this.rand.nextFloat()) * 0.2F;
+                        float f3 = MathHelper.cos(f1) * f2;
+                        float f4 = MathHelper.sin(f1) * f2;
 
                         if (enumparticletypes == EnumParticleTypes.SPELL_MOB)
                         {
-                            int j = this.field_70146_Z.nextBoolean() ? 16777215 : this.func_184492_k();
+                            int j = this.rand.nextBoolean() ? 16777215 : this.getColor();
                             int k = j >> 16 & 255;
                             int l = j >> 8 & 255;
                             int i1 = j & 255;
-                            this.field_70170_p.func_190523_a(EnumParticleTypes.SPELL_MOB.func_179348_c(), this.field_70165_t + (double)f3, this.field_70163_u, this.field_70161_v + (double)f4, (double)((float)k / 255.0F), (double)((float)l / 255.0F), (double)((float)i1 / 255.0F), new int[0]);
+                            this.world.spawnAlwaysVisibleParticle(EnumParticleTypes.SPELL_MOB.getParticleID(), this.posX + (double)f3, this.posY, this.posZ + (double)f4, (double)((float)k / 255.0F), (double)((float)l / 255.0F), (double)((float)i1 / 255.0F), new int[0]);
                         }
                         else
                         {
-                            this.field_70170_p.func_190523_a(enumparticletypes.func_179348_c(), this.field_70165_t + (double)f3, this.field_70163_u, this.field_70161_v + (double)f4, 0.0D, 0.0D, 0.0D, aint);
+                            this.world.spawnAlwaysVisibleParticle(enumparticletypes.getParticleID(), this.posX + (double)f3, this.posY, this.posZ + (double)f4, 0.0D, 0.0D, 0.0D, aint);
                         }
                     }
                 }
@@ -240,39 +255,39 @@
 
                 for (int k1 = 0; (float)k1 < f5; ++k1)
                 {
-                    float f6 = this.field_70146_Z.nextFloat() * ((float)Math.PI * 2F);
-                    float f7 = MathHelper.func_76129_c(this.field_70146_Z.nextFloat()) * f;
-                    float f8 = MathHelper.func_76134_b(f6) * f7;
-                    float f9 = MathHelper.func_76126_a(f6) * f7;
+                    float f6 = this.rand.nextFloat() * ((float)Math.PI * 2F);
+                    float f7 = MathHelper.sqrt(this.rand.nextFloat()) * f;
+                    float f8 = MathHelper.cos(f6) * f7;
+                    float f9 = MathHelper.sin(f6) * f7;
 
                     if (enumparticletypes == EnumParticleTypes.SPELL_MOB)
                     {
-                        int l1 = this.func_184492_k();
+                        int l1 = this.getColor();
                         int i2 = l1 >> 16 & 255;
                         int j2 = l1 >> 8 & 255;
                         int j1 = l1 & 255;
-                        this.field_70170_p.func_190523_a(EnumParticleTypes.SPELL_MOB.func_179348_c(), this.field_70165_t + (double)f8, this.field_70163_u, this.field_70161_v + (double)f9, (double)((float)i2 / 255.0F), (double)((float)j2 / 255.0F), (double)((float)j1 / 255.0F), new int[0]);
+                        this.world.spawnAlwaysVisibleParticle(EnumParticleTypes.SPELL_MOB.getParticleID(), this.posX + (double)f8, this.posY, this.posZ + (double)f9, (double)((float)i2 / 255.0F), (double)((float)j2 / 255.0F), (double)((float)j1 / 255.0F), new int[0]);
                     }
                     else
                     {
-                        this.field_70170_p.func_190523_a(enumparticletypes.func_179348_c(), this.field_70165_t + (double)f8, this.field_70163_u, this.field_70161_v + (double)f9, (0.5D - this.field_70146_Z.nextDouble()) * 0.15D, 0.009999999776482582D, (0.5D - this.field_70146_Z.nextDouble()) * 0.15D, aint);
+                        this.world.spawnAlwaysVisibleParticle(enumparticletypes.getParticleID(), this.posX + (double)f8, this.posY, this.posZ + (double)f9, (0.5D - this.rand.nextDouble()) * 0.15D, 0.009999999776482582D, (0.5D - this.rand.nextDouble()) * 0.15D, aint);
                     }
                 }
             }
         }
         else
         {
-            if (this.field_70173_aa >= this.field_184506_as + this.field_184505_h)
+            if (this.ticksExisted >= this.waitTime + this.duration)
             {
-                this.func_70106_y();
+                this.setDead();
                 return;
             }
 
-            boolean flag1 = this.field_70173_aa < this.field_184506_as;
+            boolean flag1 = this.ticksExisted < this.waitTime;
 
             if (flag != flag1)
             {
-                this.func_184488_a(flag1);
+                this.setIgnoreRadius(flag1);
             }
 
             if (flag1)
@@ -280,28 +295,28 @@
                 return;
             }
 
-            if (this.field_184511_ax != 0.0F)
+            if (this.radiusPerTick != 0.0F)
             {
-                f += this.field_184511_ax;
+                f += this.radiusPerTick;
 
                 if (f < 0.5F)
                 {
-                    this.func_70106_y();
+                    this.setDead();
                     return;
                 }
 
-                this.func_184483_a(f);
+                this.setRadius(f);
             }
 
-            if (this.field_70173_aa % 5 == 0)
+            if (this.ticksExisted % 5 == 0)
             {
-                Iterator<Entry<Entity, Integer>> iterator = this.field_184504_g.entrySet().iterator();
+                Iterator<Entry<Entity, Integer>> iterator = this.reapplicationDelayMap.entrySet().iterator();
 
                 while (iterator.hasNext())
                 {
                     Entry<Entity, Integer> entry = (Entry)iterator.next();
 
-                    if (this.field_70173_aa >= ((Integer)entry.getValue()).intValue())
+                    if (this.ticksExisted >= ((Integer)entry.getValue()).intValue())
                     {
                         iterator.remove();
                     }
@@ -309,67 +324,86 @@
 
                 List<PotionEffect> potions = Lists.newArrayList();
 
-                for (PotionEffect potioneffect1 : this.field_184502_e.func_185170_a())
+                for (PotionEffect potioneffect1 : this.potion.getEffects())
                 {
-                    potions.add(new PotionEffect(potioneffect1.func_188419_a(), potioneffect1.func_76459_b() / 4, potioneffect1.func_76458_c(), potioneffect1.func_82720_e(), potioneffect1.func_188418_e()));
+                    potions.add(new PotionEffect(potioneffect1.getPotion(), potioneffect1.getDuration() / 4, potioneffect1.getAmplifier(), potioneffect1.getIsAmbient(), potioneffect1.doesShowParticles()));
                 }
 
-                potions.addAll(this.field_184503_f);
+                potions.addAll(this.effects);
 
                 if (potions.isEmpty())
                 {
-                    this.field_184504_g.clear();
+                    this.reapplicationDelayMap.clear();
                 }
                 else
                 {
-                    List<EntityLivingBase> list = this.field_70170_p.<EntityLivingBase>func_72872_a(EntityLivingBase.class, this.func_174813_aQ());
 
+                    List<EntityLivingBase> list = this.world.<EntityLivingBase>getEntitiesWithinAABB(EntityLivingBase.class, this.getEntityBoundingBox());
+
                     if (!list.isEmpty())
                     {
-                        for (EntityLivingBase entitylivingbase : list)
+                        List<LivingEntity> entities = new ArrayList<LivingEntity>(); // CraftBukkit
+                        for(EntityLivingBase entityliving : list)
                         {
-                            if (!this.field_184504_g.containsKey(entitylivingbase) && entitylivingbase.func_184603_cC())
+                            if (!this.reapplicationDelayMap.containsKey(entityliving) && entityliving.canBeHitWithPotion()) {
+                                double d0 = entityliving.posX - this.posX;
+                                double d1 = entityliving.posZ - this.posZ;
+                                double d2 = d0 * d0 + d1 * d1;
+
+                                if (d2 <= (double) (f * f)) {
+                                    // CraftBukkit start
+                                    entities.add((LivingEntity) entityliving.getBukkitEntity());
+                                }
+                            }
+                        }
+                        org.bukkit.event.entity.AreaEffectCloudApplyEvent event = org.bukkit.craftbukkit.event.CraftEventFactory.callAreaEffectCloudApplyEvent(this, entities);
+
+                        for (LivingEntity e : event.getAffectedEntities())
+                        {
+                            EntityLivingBase entitylivingbase = ((CraftLivingEntity)e).getHandle();
+                            //CraftBukkit end
+                            if (!this.reapplicationDelayMap.containsKey(entitylivingbase) && entitylivingbase.canBeHitWithPotion())
                             {
-                                double d0 = entitylivingbase.field_70165_t - this.field_70165_t;
-                                double d1 = entitylivingbase.field_70161_v - this.field_70161_v;
+                                double d0 = entitylivingbase.posX - this.posX;
+                                double d1 = entitylivingbase.posZ - this.posZ;
                                 double d2 = d0 * d0 + d1 * d1;
 
                                 if (d2 <= (double)(f * f))
                                 {
-                                    this.field_184504_g.put(entitylivingbase, Integer.valueOf(this.field_70173_aa + this.field_184507_at));
+                                    this.reapplicationDelayMap.put(entitylivingbase, Integer.valueOf(this.ticksExisted + this.reapplicationDelay));
 
                                     for (PotionEffect potioneffect : potions)
                                     {
-                                        if (potioneffect.func_188419_a().func_76403_b())
+                                        if (potioneffect.getPotion().isInstant())
                                         {
-                                            potioneffect.func_188419_a().func_180793_a(this, this.func_184494_w(), entitylivingbase, potioneffect.func_76458_c(), 0.5D);
+                                            potioneffect.getPotion().affectEntity(this, this.getOwner(), entitylivingbase, potioneffect.getAmplifier(), 0.5D);
                                         }
                                         else
                                         {
-                                            entitylivingbase.func_70690_d(new PotionEffect(potioneffect));
+                                            entitylivingbase.addPotionEffect(new PotionEffect(potioneffect));
                                         }
                                     }
 
-                                    if (this.field_184510_aw != 0.0F)
+                                    if (this.radiusOnUse != 0.0F)
                                     {
-                                        f += this.field_184510_aw;
+                                        f += this.radiusOnUse;
 
                                         if (f < 0.5F)
                                         {
-                                            this.func_70106_y();
+                                            this.setDead();
                                             return;
                                         }
 
-                                        this.func_184483_a(f);
+                                        this.setRadius(f);
                                     }
 
-                                    if (this.field_184509_av != 0)
+                                    if (this.durationOnUse != 0)
                                     {
-                                        this.field_184505_h += this.field_184509_av;
+                                        this.duration += this.durationOnUse;
 
-                                        if (this.field_184505_h <= 0)
+                                        if (this.duration <= 0)
                                         {
-                                            this.func_70106_y();
+                                            this.setDead();
                                             return;
                                         }
                                     }
@@ -382,147 +416,147 @@
         }
     }
 
-    public void func_184495_b(float p_184495_1_)
+    public void setRadiusOnUse(float radiusOnUseIn)
     {
-        this.field_184510_aw = p_184495_1_;
+        this.radiusOnUse = radiusOnUseIn;
     }
 
-    public void func_184487_c(float p_184487_1_)
+    public void setRadiusPerTick(float radiusPerTickIn)
     {
-        this.field_184511_ax = p_184487_1_;
+        this.radiusPerTick = radiusPerTickIn;
     }
 
-    public void func_184485_d(int p_184485_1_)
+    public void setWaitTime(int waitTimeIn)
     {
-        this.field_184506_as = p_184485_1_;
+        this.waitTime = waitTimeIn;
     }
 
-    public void func_184481_a(@Nullable EntityLivingBase p_184481_1_)
+    public void setOwner(@Nullable EntityLivingBase ownerIn)
     {
-        this.field_184512_ay = p_184481_1_;
-        this.field_184513_az = p_184481_1_ == null ? null : p_184481_1_.func_110124_au();
+        this.owner = ownerIn;
+        this.ownerUniqueId = ownerIn == null ? null : ownerIn.getUniqueID();
     }
 
     @Nullable
-    public EntityLivingBase func_184494_w()
+    public EntityLivingBase getOwner()
     {
-        if (this.field_184512_ay == null && this.field_184513_az != null && this.field_70170_p instanceof WorldServer)
+        if (this.owner == null && this.ownerUniqueId != null && this.world instanceof WorldServer)
         {
-            Entity entity = ((WorldServer)this.field_70170_p).func_175733_a(this.field_184513_az);
+            Entity entity = ((WorldServer)this.world).getEntityFromUuid(this.ownerUniqueId);
 
             if (entity instanceof EntityLivingBase)
             {
-                this.field_184512_ay = (EntityLivingBase)entity;
+                this.owner = (EntityLivingBase)entity;
             }
         }
 
-        return this.field_184512_ay;
+        return this.owner;
     }
 
-    protected void func_70037_a(NBTTagCompound p_70037_1_)
+    protected void readEntityFromNBT(NBTTagCompound compound)
     {
-        this.field_70173_aa = p_70037_1_.func_74762_e("Age");
-        this.field_184505_h = p_70037_1_.func_74762_e("Duration");
-        this.field_184506_as = p_70037_1_.func_74762_e("WaitTime");
-        this.field_184507_at = p_70037_1_.func_74762_e("ReapplicationDelay");
-        this.field_184509_av = p_70037_1_.func_74762_e("DurationOnUse");
-        this.field_184510_aw = p_70037_1_.func_74760_g("RadiusOnUse");
-        this.field_184511_ax = p_70037_1_.func_74760_g("RadiusPerTick");
-        this.func_184483_a(p_70037_1_.func_74760_g("Radius"));
-        this.field_184513_az = p_70037_1_.func_186857_a("OwnerUUID");
+        this.ticksExisted = compound.getInteger("Age");
+        this.duration = compound.getInteger("Duration");
+        this.waitTime = compound.getInteger("WaitTime");
+        this.reapplicationDelay = compound.getInteger("ReapplicationDelay");
+        this.durationOnUse = compound.getInteger("DurationOnUse");
+        this.radiusOnUse = compound.getFloat("RadiusOnUse");
+        this.radiusPerTick = compound.getFloat("RadiusPerTick");
+        this.setRadius(compound.getFloat("Radius"));
+        this.ownerUniqueId = compound.getUniqueId("OwnerUUID");
 
-        if (p_70037_1_.func_150297_b("Particle", 8))
+        if (compound.hasKey("Particle", 8))
         {
-            EnumParticleTypes enumparticletypes = EnumParticleTypes.func_186831_a(p_70037_1_.func_74779_i("Particle"));
+            EnumParticleTypes enumparticletypes = EnumParticleTypes.getByName(compound.getString("Particle"));
 
             if (enumparticletypes != null)
             {
-                this.func_184491_a(enumparticletypes);
-                this.func_189734_b(p_70037_1_.func_74762_e("ParticleParam1"));
-                this.func_189732_d(p_70037_1_.func_74762_e("ParticleParam2"));
+                this.setParticle(enumparticletypes);
+                this.setParticleParam1(compound.getInteger("ParticleParam1"));
+                this.setParticleParam2(compound.getInteger("ParticleParam2"));
             }
         }
 
-        if (p_70037_1_.func_150297_b("Color", 99))
+        if (compound.hasKey("Color", 99))
         {
-            this.func_184482_a(p_70037_1_.func_74762_e("Color"));
+            this.setColor(compound.getInteger("Color"));
         }
 
-        if (p_70037_1_.func_150297_b("Potion", 8))
+        if (compound.hasKey("Potion", 8))
         {
-            this.func_184484_a(PotionUtils.func_185187_c(p_70037_1_));
+            this.setPotion(PotionUtils.getPotionTypeFromNBT(compound));
         }
 
-        if (p_70037_1_.func_150297_b("Effects", 9))
+        if (compound.hasKey("Effects", 9))
         {
-            NBTTagList nbttaglist = p_70037_1_.func_150295_c("Effects", 10);
-            this.field_184503_f.clear();
+            NBTTagList nbttaglist = compound.getTagList("Effects", 10);
+            this.effects.clear();
 
-            for (int i = 0; i < nbttaglist.func_74745_c(); ++i)
+            for (int i = 0; i < nbttaglist.tagCount(); ++i)
             {
-                PotionEffect potioneffect = PotionEffect.func_82722_b(nbttaglist.func_150305_b(i));
+                PotionEffect potioneffect = PotionEffect.readCustomPotionEffectFromNBT(nbttaglist.getCompoundTagAt(i));
 
                 if (potioneffect != null)
                 {
-                    this.func_184496_a(potioneffect);
+                    this.addEffect(potioneffect);
                 }
             }
         }
     }
 
-    protected void func_70014_b(NBTTagCompound p_70014_1_)
+    protected void writeEntityToNBT(NBTTagCompound compound)
     {
-        p_70014_1_.func_74768_a("Age", this.field_70173_aa);
-        p_70014_1_.func_74768_a("Duration", this.field_184505_h);
-        p_70014_1_.func_74768_a("WaitTime", this.field_184506_as);
-        p_70014_1_.func_74768_a("ReapplicationDelay", this.field_184507_at);
-        p_70014_1_.func_74768_a("DurationOnUse", this.field_184509_av);
-        p_70014_1_.func_74776_a("RadiusOnUse", this.field_184510_aw);
-        p_70014_1_.func_74776_a("RadiusPerTick", this.field_184511_ax);
-        p_70014_1_.func_74776_a("Radius", this.func_184490_j());
-        p_70014_1_.func_74778_a("Particle", this.func_184493_l().func_179346_b());
-        p_70014_1_.func_74768_a("ParticleParam1", this.func_189733_n());
-        p_70014_1_.func_74768_a("ParticleParam2", this.func_189735_o());
+        compound.setInteger("Age", this.ticksExisted);
+        compound.setInteger("Duration", this.duration);
+        compound.setInteger("WaitTime", this.waitTime);
+        compound.setInteger("ReapplicationDelay", this.reapplicationDelay);
+        compound.setInteger("DurationOnUse", this.durationOnUse);
+        compound.setFloat("RadiusOnUse", this.radiusOnUse);
+        compound.setFloat("RadiusPerTick", this.radiusPerTick);
+        compound.setFloat("Radius", this.getRadius());
+        compound.setString("Particle", this.getParticle().getParticleName());
+        compound.setInteger("ParticleParam1", this.getParticleParam1());
+        compound.setInteger("ParticleParam2", this.getParticleParam2());
 
-        if (this.field_184513_az != null)
+        if (this.ownerUniqueId != null)
         {
-            p_70014_1_.func_186854_a("OwnerUUID", this.field_184513_az);
+            compound.setUniqueId("OwnerUUID", this.ownerUniqueId);
         }
 
-        if (this.field_184508_au)
+        if (this.colorSet)
         {
-            p_70014_1_.func_74768_a("Color", this.func_184492_k());
+            compound.setInteger("Color", this.getColor());
         }
 
-        if (this.field_184502_e != PotionTypes.field_185229_a && this.field_184502_e != null)
+        if (this.potion != PotionTypes.EMPTY && this.potion != null)
         {
-            p_70014_1_.func_74778_a("Potion", ((ResourceLocation)PotionType.field_185176_a.func_177774_c(this.field_184502_e)).toString());
+            compound.setString("Potion", ((ResourceLocation)PotionType.REGISTRY.getNameForObject(this.potion)).toString());
         }
 
-        if (!this.field_184503_f.isEmpty())
+        if (!this.effects.isEmpty())
         {
             NBTTagList nbttaglist = new NBTTagList();
 
-            for (PotionEffect potioneffect : this.field_184503_f)
+            for (PotionEffect potioneffect : this.effects)
             {
-                nbttaglist.func_74742_a(potioneffect.func_82719_a(new NBTTagCompound()));
+                nbttaglist.appendTag(potioneffect.writeCustomPotionEffectToNBT(new NBTTagCompound()));
             }
 
-            p_70014_1_.func_74782_a("Effects", nbttaglist);
+            compound.setTag("Effects", nbttaglist);
         }
     }
 
-    public void func_184206_a(DataParameter<?> p_184206_1_)
+    public void notifyDataManagerChange(DataParameter<?> key)
     {
-        if (field_184498_a.equals(p_184206_1_))
+        if (RADIUS.equals(key))
         {
-            this.func_184483_a(this.func_184490_j());
+            this.setRadius(this.getRadius());
         }
 
-        super.func_184206_a(p_184206_1_);
+        super.notifyDataManagerChange(key);
     }
 
-    public EnumPushReaction func_184192_z()
+    public EnumPushReaction getPushReaction()
     {
         return EnumPushReaction.IGNORE;
     }
