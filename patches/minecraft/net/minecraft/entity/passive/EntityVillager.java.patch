--- ../src-base/minecraft/net/minecraft/entity/passive/EntityVillager.java
+++ ../src-work/minecraft/net/minecraft/entity/passive/EntityVillager.java
@@ -89,613 +89,666 @@
 import net.minecraftforge.fml.relauncher.SideOnly;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
+import org.bukkit.Bukkit;
+import org.bukkit.craftbukkit.inventory.CraftMerchantRecipe;
+import org.bukkit.entity.Villager;
+import org.bukkit.event.entity.VillagerAcquireTradeEvent;
+import org.bukkit.event.entity.VillagerReplenishTradeEvent;
 
 public class EntityVillager extends EntityAgeable implements INpc, IMerchant
 {
-    private static final Logger field_190674_bx = LogManager.getLogger();
-    private static final DataParameter<Integer> field_184752_bw = EntityDataManager.<Integer>func_187226_a(EntityVillager.class, DataSerializers.field_187192_b);
-    private int field_70955_e;
-    private boolean field_70952_f;
-    private boolean field_70953_g;
-    Village field_70954_d;
-    private EntityPlayer field_70962_h;
+    private static final Logger LOGGER = LogManager.getLogger();
+    private static final DataParameter<Integer> PROFESSION = EntityDataManager.<Integer>createKey(EntityVillager.class, DataSerializers.VARINT);
+    private int randomTickDivider;
+    private boolean isMating;
+    private boolean isPlaying;
+    Village villageObj;
+    private EntityPlayer buyingPlayer;
     @Nullable
-    private MerchantRecipeList field_70963_i;
-    private int field_70961_j;
-    private boolean field_70959_by;
-    private boolean field_175565_bs;
-    public int field_70956_bz;
-    private String field_82189_bL;
-    private int field_175563_bv;
-    private int field_175562_bw;
-    private boolean field_82190_bM;
-    private boolean field_175564_by;
-    public final InventoryBasic field_175560_bz;
-    private static final EntityVillager.ITradeList[][][][] field_175561_bA = new EntityVillager.ITradeList[][][][] {{{{new EntityVillager.EmeraldForItems(Items.field_151015_O, new EntityVillager.PriceInfo(18, 22)), new EntityVillager.EmeraldForItems(Items.field_151174_bG, new EntityVillager.PriceInfo(15, 19)), new EntityVillager.EmeraldForItems(Items.field_151172_bF, new EntityVillager.PriceInfo(15, 19)), new EntityVillager.ListItemForEmeralds(Items.field_151025_P, new EntityVillager.PriceInfo(-4, -2))}, {new EntityVillager.EmeraldForItems(Item.func_150898_a(Blocks.field_150423_aK), new EntityVillager.PriceInfo(8, 13)), new EntityVillager.ListItemForEmeralds(Items.field_151158_bO, new EntityVillager.PriceInfo(-3, -2))}, {new EntityVillager.EmeraldForItems(Item.func_150898_a(Blocks.field_150440_ba), new EntityVillager.PriceInfo(7, 12)), new EntityVillager.ListItemForEmeralds(Items.field_151034_e, new EntityVillager.PriceInfo(-7, -5))}, {new EntityVillager.ListItemForEmeralds(Items.field_151106_aX, new EntityVillager.PriceInfo(-10, -6)), new EntityVillager.ListItemForEmeralds(Items.field_151105_aU, new EntityVillager.PriceInfo(1, 1))}}, {{new EntityVillager.EmeraldForItems(Items.field_151007_F, new EntityVillager.PriceInfo(15, 20)), new EntityVillager.EmeraldForItems(Items.field_151044_h, new EntityVillager.PriceInfo(16, 24)), new EntityVillager.ItemAndEmeraldToItem(Items.field_151115_aP, new EntityVillager.PriceInfo(6, 6), Items.field_179566_aV, new EntityVillager.PriceInfo(6, 6))}, {new EntityVillager.ListEnchantedItemForEmeralds(Items.field_151112_aM, new EntityVillager.PriceInfo(7, 8))}}, {{new EntityVillager.EmeraldForItems(Item.func_150898_a(Blocks.field_150325_L), new EntityVillager.PriceInfo(16, 22)), new EntityVillager.ListItemForEmeralds(Items.field_151097_aZ, new EntityVillager.PriceInfo(3, 4))}, {new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L)), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 1), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 2), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 3), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 4), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 5), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 6), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 7), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 8), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 9), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 10), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 11), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 12), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 13), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 14), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.func_150898_a(Blocks.field_150325_L), 1, 15), new EntityVillager.PriceInfo(1, 2))}}, {{new EntityVillager.EmeraldForItems(Items.field_151007_F, new EntityVillager.PriceInfo(15, 20)), new EntityVillager.ListItemForEmeralds(Items.field_151032_g, new EntityVillager.PriceInfo(-12, -8))}, {new EntityVillager.ListItemForEmeralds(Items.field_151031_f, new EntityVillager.PriceInfo(2, 3)), new EntityVillager.ItemAndEmeraldToItem(Item.func_150898_a(Blocks.field_150351_n), new EntityVillager.PriceInfo(10, 10), Items.field_151145_ak, new EntityVillager.PriceInfo(6, 10))}}}, {{{new EntityVillager.EmeraldForItems(Items.field_151121_aF, new EntityVillager.PriceInfo(24, 36)), new EntityVillager.ListEnchantedBookForEmeralds()}, {new EntityVillager.EmeraldForItems(Items.field_151122_aG, new EntityVillager.PriceInfo(8, 10)), new EntityVillager.ListItemForEmeralds(Items.field_151111_aL, new EntityVillager.PriceInfo(10, 12)), new EntityVillager.ListItemForEmeralds(Item.func_150898_a(Blocks.field_150342_X), new EntityVillager.PriceInfo(3, 4))}, {new EntityVillager.EmeraldForItems(Items.field_151164_bB, new EntityVillager.PriceInfo(2, 2)), new EntityVillager.ListItemForEmeralds(Items.field_151113_aN, new EntityVillager.PriceInfo(10, 12)), new EntityVillager.ListItemForEmeralds(Item.func_150898_a(Blocks.field_150359_w), new EntityVillager.PriceInfo(-5, -3))}, {new EntityVillager.ListEnchantedBookForEmeralds()}, {new EntityVillager.ListEnchantedBookForEmeralds()}, {new EntityVillager.ListItemForEmeralds(Items.field_151057_cb, new EntityVillager.PriceInfo(20, 22))}}, {{new EntityVillager.EmeraldForItems(Items.field_151121_aF, new EntityVillager.PriceInfo(24, 36))}, {new EntityVillager.EmeraldForItems(Items.field_151111_aL, new EntityVillager.PriceInfo(1, 1))}, {new EntityVillager.ListItemForEmeralds(Items.field_151148_bJ, new EntityVillager.PriceInfo(7, 11))}, {new EntityVillager.TreasureMapForEmeralds(new EntityVillager.PriceInfo(12, 20), "Monument", MapDecoration.Type.MONUMENT), new EntityVillager.TreasureMapForEmeralds(new EntityVillager.PriceInfo(16, 28), "Mansion", MapDecoration.Type.MANSION)}}}, {{{new EntityVillager.EmeraldForItems(Items.field_151078_bh, new EntityVillager.PriceInfo(36, 40)), new EntityVillager.EmeraldForItems(Items.field_151043_k, new EntityVillager.PriceInfo(8, 10))}, {new EntityVillager.ListItemForEmeralds(Items.field_151137_ax, new EntityVillager.PriceInfo(-4, -1)), new EntityVillager.ListItemForEmeralds(new ItemStack(Items.field_151100_aR, 1, EnumDyeColor.BLUE.func_176767_b()), new EntityVillager.PriceInfo(-2, -1))}, {new EntityVillager.ListItemForEmeralds(Items.field_151079_bi, new EntityVillager.PriceInfo(4, 7)), new EntityVillager.ListItemForEmeralds(Item.func_150898_a(Blocks.field_150426_aN), new EntityVillager.PriceInfo(-3, -1))}, {new EntityVillager.ListItemForEmeralds(Items.field_151062_by, new EntityVillager.PriceInfo(3, 11))}}}, {{{new EntityVillager.EmeraldForItems(Items.field_151044_h, new EntityVillager.PriceInfo(16, 24)), new EntityVillager.ListItemForEmeralds(Items.field_151028_Y, new EntityVillager.PriceInfo(4, 6))}, {new EntityVillager.EmeraldForItems(Items.field_151042_j, new EntityVillager.PriceInfo(7, 9)), new EntityVillager.ListItemForEmeralds(Items.field_151030_Z, new EntityVillager.PriceInfo(10, 14))}, {new EntityVillager.EmeraldForItems(Items.field_151045_i, new EntityVillager.PriceInfo(3, 4)), new EntityVillager.ListEnchantedItemForEmeralds(Items.field_151163_ad, new EntityVillager.PriceInfo(16, 19))}, {new EntityVillager.ListItemForEmeralds(Items.field_151029_X, new EntityVillager.PriceInfo(5, 7)), new EntityVillager.ListItemForEmeralds(Items.field_151022_W, new EntityVillager.PriceInfo(9, 11)), new EntityVillager.ListItemForEmeralds(Items.field_151020_U, new EntityVillager.PriceInfo(5, 7)), new EntityVillager.ListItemForEmeralds(Items.field_151023_V, new EntityVillager.PriceInfo(11, 15))}}, {{new EntityVillager.EmeraldForItems(Items.field_151044_h, new EntityVillager.PriceInfo(16, 24)), new EntityVillager.ListItemForEmeralds(Items.field_151036_c, new EntityVillager.PriceInfo(6, 8))}, {new EntityVillager.EmeraldForItems(Items.field_151042_j, new EntityVillager.PriceInfo(7, 9)), new EntityVillager.ListEnchantedItemForEmeralds(Items.field_151040_l, new EntityVillager.PriceInfo(9, 10))}, {new EntityVillager.EmeraldForItems(Items.field_151045_i, new EntityVillager.PriceInfo(3, 4)), new EntityVillager.ListEnchantedItemForEmeralds(Items.field_151048_u, new EntityVillager.PriceInfo(12, 15)), new EntityVillager.ListEnchantedItemForEmeralds(Items.field_151056_x, new EntityVillager.PriceInfo(9, 12))}}, {{new EntityVillager.EmeraldForItems(Items.field_151044_h, new EntityVillager.PriceInfo(16, 24)), new EntityVillager.ListEnchantedItemForEmeralds(Items.field_151037_a, new EntityVillager.PriceInfo(5, 7))}, {new EntityVillager.EmeraldForItems(Items.field_151042_j, new EntityVillager.PriceInfo(7, 9)), new EntityVillager.ListEnchantedItemForEmeralds(Items.field_151035_b, new EntityVillager.PriceInfo(9, 11))}, {new EntityVillager.EmeraldForItems(Items.field_151045_i, new EntityVillager.PriceInfo(3, 4)), new EntityVillager.ListEnchantedItemForEmeralds(Items.field_151046_w, new EntityVillager.PriceInfo(12, 15))}}}, {{{new EntityVillager.EmeraldForItems(Items.field_151147_al, new EntityVillager.PriceInfo(14, 18)), new EntityVillager.EmeraldForItems(Items.field_151076_bf, new EntityVillager.PriceInfo(14, 18))}, {new EntityVillager.EmeraldForItems(Items.field_151044_h, new EntityVillager.PriceInfo(16, 24)), new EntityVillager.ListItemForEmeralds(Items.field_151157_am, new EntityVillager.PriceInfo(-7, -5)), new EntityVillager.ListItemForEmeralds(Items.field_151077_bg, new EntityVillager.PriceInfo(-8, -6))}}, {{new EntityVillager.EmeraldForItems(Items.field_151116_aA, new EntityVillager.PriceInfo(9, 12)), new EntityVillager.ListItemForEmeralds(Items.field_151026_S, new EntityVillager.PriceInfo(2, 4))}, {new EntityVillager.ListEnchantedItemForEmeralds(Items.field_151027_R, new EntityVillager.PriceInfo(7, 12))}, {new EntityVillager.ListItemForEmeralds(Items.field_151141_av, new EntityVillager.PriceInfo(8, 10))}}}, {new EntityVillager.ITradeList[0][]}};
+    private MerchantRecipeList buyingList;
+    private int timeUntilReset;
+    private boolean needsInitilization;
+    private boolean isWillingToMate;
+    public int wealth;
+    private java.util.UUID lastBuyingPlayer;
+    private int careerId;
+    private int careerLevel;
+    private boolean isLookingForHome;
+    private boolean areAdditionalTasksSet;
+    public final InventoryBasic villagerInventory;
+    private static final EntityVillager.ITradeList[][][][] DEFAULT_TRADE_LIST_MAP = new EntityVillager.ITradeList[][][][] {{{{new EntityVillager.EmeraldForItems(Items.WHEAT, new EntityVillager.PriceInfo(18, 22)), new EntityVillager.EmeraldForItems(Items.POTATO, new EntityVillager.PriceInfo(15, 19)), new EntityVillager.EmeraldForItems(Items.CARROT, new EntityVillager.PriceInfo(15, 19)), new EntityVillager.ListItemForEmeralds(Items.BREAD, new EntityVillager.PriceInfo(-4, -2))}, {new EntityVillager.EmeraldForItems(Item.getItemFromBlock(Blocks.PUMPKIN), new EntityVillager.PriceInfo(8, 13)), new EntityVillager.ListItemForEmeralds(Items.PUMPKIN_PIE, new EntityVillager.PriceInfo(-3, -2))}, {new EntityVillager.EmeraldForItems(Item.getItemFromBlock(Blocks.MELON_BLOCK), new EntityVillager.PriceInfo(7, 12)), new EntityVillager.ListItemForEmeralds(Items.APPLE, new EntityVillager.PriceInfo(-7, -5))}, {new EntityVillager.ListItemForEmeralds(Items.COOKIE, new EntityVillager.PriceInfo(-10, -6)), new EntityVillager.ListItemForEmeralds(Items.CAKE, new EntityVillager.PriceInfo(1, 1))}}, {{new EntityVillager.EmeraldForItems(Items.STRING, new EntityVillager.PriceInfo(15, 20)), new EntityVillager.EmeraldForItems(Items.COAL, new EntityVillager.PriceInfo(16, 24)), new EntityVillager.ItemAndEmeraldToItem(Items.FISH, new EntityVillager.PriceInfo(6, 6), Items.COOKED_FISH, new EntityVillager.PriceInfo(6, 6))}, {new EntityVillager.ListEnchantedItemForEmeralds(Items.FISHING_ROD, new EntityVillager.PriceInfo(7, 8))}}, {{new EntityVillager.EmeraldForItems(Item.getItemFromBlock(Blocks.WOOL), new EntityVillager.PriceInfo(16, 22)), new EntityVillager.ListItemForEmeralds(Items.SHEARS, new EntityVillager.PriceInfo(3, 4))}, {new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL)), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 1), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 2), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 3), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 4), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 5), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 6), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 7), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 8), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 9), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 10), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 11), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 12), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 13), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 14), new EntityVillager.PriceInfo(1, 2)), new EntityVillager.ListItemForEmeralds(new ItemStack(Item.getItemFromBlock(Blocks.WOOL), 1, 15), new EntityVillager.PriceInfo(1, 2))}}, {{new EntityVillager.EmeraldForItems(Items.STRING, new EntityVillager.PriceInfo(15, 20)), new EntityVillager.ListItemForEmeralds(Items.ARROW, new EntityVillager.PriceInfo(-12, -8))}, {new EntityVillager.ListItemForEmeralds(Items.BOW, new EntityVillager.PriceInfo(2, 3)), new EntityVillager.ItemAndEmeraldToItem(Item.getItemFromBlock(Blocks.GRAVEL), new EntityVillager.PriceInfo(10, 10), Items.FLINT, new EntityVillager.PriceInfo(6, 10))}}}, {{{new EntityVillager.EmeraldForItems(Items.PAPER, new EntityVillager.PriceInfo(24, 36)), new EntityVillager.ListEnchantedBookForEmeralds()}, {new EntityVillager.EmeraldForItems(Items.BOOK, new EntityVillager.PriceInfo(8, 10)), new EntityVillager.ListItemForEmeralds(Items.COMPASS, new EntityVillager.PriceInfo(10, 12)), new EntityVillager.ListItemForEmeralds(Item.getItemFromBlock(Blocks.BOOKSHELF), new EntityVillager.PriceInfo(3, 4))}, {new EntityVillager.EmeraldForItems(Items.WRITTEN_BOOK, new EntityVillager.PriceInfo(2, 2)), new EntityVillager.ListItemForEmeralds(Items.CLOCK, new EntityVillager.PriceInfo(10, 12)), new EntityVillager.ListItemForEmeralds(Item.getItemFromBlock(Blocks.GLASS), new EntityVillager.PriceInfo(-5, -3))}, {new EntityVillager.ListEnchantedBookForEmeralds()}, {new EntityVillager.ListEnchantedBookForEmeralds()}, {new EntityVillager.ListItemForEmeralds(Items.NAME_TAG, new EntityVillager.PriceInfo(20, 22))}}, {{new EntityVillager.EmeraldForItems(Items.PAPER, new EntityVillager.PriceInfo(24, 36))}, {new EntityVillager.EmeraldForItems(Items.COMPASS, new EntityVillager.PriceInfo(1, 1))}, {new EntityVillager.ListItemForEmeralds(Items.MAP, new EntityVillager.PriceInfo(7, 11))}, {new EntityVillager.TreasureMapForEmeralds(new EntityVillager.PriceInfo(12, 20), "Monument", MapDecoration.Type.MONUMENT), new EntityVillager.TreasureMapForEmeralds(new EntityVillager.PriceInfo(16, 28), "Mansion", MapDecoration.Type.MANSION)}}}, {{{new EntityVillager.EmeraldForItems(Items.ROTTEN_FLESH, new EntityVillager.PriceInfo(36, 40)), new EntityVillager.EmeraldForItems(Items.GOLD_INGOT, new EntityVillager.PriceInfo(8, 10))}, {new EntityVillager.ListItemForEmeralds(Items.REDSTONE, new EntityVillager.PriceInfo(-4, -1)), new EntityVillager.ListItemForEmeralds(new ItemStack(Items.DYE, 1, EnumDyeColor.BLUE.getDyeDamage()), new EntityVillager.PriceInfo(-2, -1))}, {new EntityVillager.ListItemForEmeralds(Items.ENDER_PEARL, new EntityVillager.PriceInfo(4, 7)), new EntityVillager.ListItemForEmeralds(Item.getItemFromBlock(Blocks.GLOWSTONE), new EntityVillager.PriceInfo(-3, -1))}, {new EntityVillager.ListItemForEmeralds(Items.EXPERIENCE_BOTTLE, new EntityVillager.PriceInfo(3, 11))}}}, {{{new EntityVillager.EmeraldForItems(Items.COAL, new EntityVillager.PriceInfo(16, 24)), new EntityVillager.ListItemForEmeralds(Items.IRON_HELMET, new EntityVillager.PriceInfo(4, 6))}, {new EntityVillager.EmeraldForItems(Items.IRON_INGOT, new EntityVillager.PriceInfo(7, 9)), new EntityVillager.ListItemForEmeralds(Items.IRON_CHESTPLATE, new EntityVillager.PriceInfo(10, 14))}, {new EntityVillager.EmeraldForItems(Items.DIAMOND, new EntityVillager.PriceInfo(3, 4)), new EntityVillager.ListEnchantedItemForEmeralds(Items.DIAMOND_CHESTPLATE, new EntityVillager.PriceInfo(16, 19))}, {new EntityVillager.ListItemForEmeralds(Items.CHAINMAIL_BOOTS, new EntityVillager.PriceInfo(5, 7)), new EntityVillager.ListItemForEmeralds(Items.CHAINMAIL_LEGGINGS, new EntityVillager.PriceInfo(9, 11)), new EntityVillager.ListItemForEmeralds(Items.CHAINMAIL_HELMET, new EntityVillager.PriceInfo(5, 7)), new EntityVillager.ListItemForEmeralds(Items.CHAINMAIL_CHESTPLATE, new EntityVillager.PriceInfo(11, 15))}}, {{new EntityVillager.EmeraldForItems(Items.COAL, new EntityVillager.PriceInfo(16, 24)), new EntityVillager.ListItemForEmeralds(Items.IRON_AXE, new EntityVillager.PriceInfo(6, 8))}, {new EntityVillager.EmeraldForItems(Items.IRON_INGOT, new EntityVillager.PriceInfo(7, 9)), new EntityVillager.ListEnchantedItemForEmeralds(Items.IRON_SWORD, new EntityVillager.PriceInfo(9, 10))}, {new EntityVillager.EmeraldForItems(Items.DIAMOND, new EntityVillager.PriceInfo(3, 4)), new EntityVillager.ListEnchantedItemForEmeralds(Items.DIAMOND_SWORD, new EntityVillager.PriceInfo(12, 15)), new EntityVillager.ListEnchantedItemForEmeralds(Items.DIAMOND_AXE, new EntityVillager.PriceInfo(9, 12))}}, {{new EntityVillager.EmeraldForItems(Items.COAL, new EntityVillager.PriceInfo(16, 24)), new EntityVillager.ListEnchantedItemForEmeralds(Items.IRON_SHOVEL, new EntityVillager.PriceInfo(5, 7))}, {new EntityVillager.EmeraldForItems(Items.IRON_INGOT, new EntityVillager.PriceInfo(7, 9)), new EntityVillager.ListEnchantedItemForEmeralds(Items.IRON_PICKAXE, new EntityVillager.PriceInfo(9, 11))}, {new EntityVillager.EmeraldForItems(Items.DIAMOND, new EntityVillager.PriceInfo(3, 4)), new EntityVillager.ListEnchantedItemForEmeralds(Items.DIAMOND_PICKAXE, new EntityVillager.PriceInfo(12, 15))}}}, {{{new EntityVillager.EmeraldForItems(Items.PORKCHOP, new EntityVillager.PriceInfo(14, 18)), new EntityVillager.EmeraldForItems(Items.CHICKEN, new EntityVillager.PriceInfo(14, 18))}, {new EntityVillager.EmeraldForItems(Items.COAL, new EntityVillager.PriceInfo(16, 24)), new EntityVillager.ListItemForEmeralds(Items.COOKED_PORKCHOP, new EntityVillager.PriceInfo(-7, -5)), new EntityVillager.ListItemForEmeralds(Items.COOKED_CHICKEN, new EntityVillager.PriceInfo(-8, -6))}}, {{new EntityVillager.EmeraldForItems(Items.LEATHER, new EntityVillager.PriceInfo(9, 12)), new EntityVillager.ListItemForEmeralds(Items.LEATHER_LEGGINGS, new EntityVillager.PriceInfo(2, 4))}, {new EntityVillager.ListEnchantedItemForEmeralds(Items.LEATHER_CHESTPLATE, new EntityVillager.PriceInfo(7, 12))}, {new EntityVillager.ListItemForEmeralds(Items.SADDLE, new EntityVillager.PriceInfo(8, 10))}}}, {new EntityVillager.ITradeList[0][]}};
 
-    public EntityVillager(World p_i1747_1_)
+    public EntityVillager(World worldIn)
     {
-        this(p_i1747_1_, 0);
+        this(worldIn, 0);
     }
 
-    public EntityVillager(World p_i1748_1_, int p_i1748_2_)
+    public EntityVillager(World worldIn, int professionId)
     {
-        super(p_i1748_1_);
-        this.field_175560_bz = new InventoryBasic("Items", false, 8);
-        this.func_70938_b(p_i1748_2_);
-        this.func_70105_a(0.6F, 1.95F);
-        ((PathNavigateGround)this.func_70661_as()).func_179688_b(true);
-        this.func_98053_h(true);
+        super(worldIn);
+        this.villagerInventory = new InventoryBasic("Items", false, 8);
+        this.setProfession(professionId);
+        this.setSize(0.6F, 1.95F);
+        ((PathNavigateGround)this.getNavigator()).setBreakDoors(true);
+        this.setCanPickUpLoot(true);
     }
 
-    protected void func_184651_r()
+    protected void initEntityAI()
     {
-        this.field_70714_bg.func_75776_a(0, new EntityAISwimming(this));
-        this.field_70714_bg.func_75776_a(1, new EntityAIAvoidEntity(this, EntityZombie.class, 8.0F, 0.6D, 0.6D));
-        this.field_70714_bg.func_75776_a(1, new EntityAIAvoidEntity(this, EntityEvoker.class, 12.0F, 0.8D, 0.8D));
-        this.field_70714_bg.func_75776_a(1, new EntityAIAvoidEntity(this, EntityVindicator.class, 8.0F, 0.8D, 0.8D));
-        this.field_70714_bg.func_75776_a(1, new EntityAIAvoidEntity(this, EntityVex.class, 8.0F, 0.6D, 0.6D));
-        this.field_70714_bg.func_75776_a(1, new EntityAITradePlayer(this));
-        this.field_70714_bg.func_75776_a(1, new EntityAILookAtTradePlayer(this));
-        this.field_70714_bg.func_75776_a(2, new EntityAIMoveIndoors(this));
-        this.field_70714_bg.func_75776_a(3, new EntityAIRestrictOpenDoor(this));
-        this.field_70714_bg.func_75776_a(4, new EntityAIOpenDoor(this, true));
-        this.field_70714_bg.func_75776_a(5, new EntityAIMoveTowardsRestriction(this, 0.6D));
-        this.field_70714_bg.func_75776_a(6, new EntityAIVillagerMate(this));
-        this.field_70714_bg.func_75776_a(7, new EntityAIFollowGolem(this));
-        this.field_70714_bg.func_75776_a(9, new EntityAIWatchClosest2(this, EntityPlayer.class, 3.0F, 1.0F));
-        this.field_70714_bg.func_75776_a(9, new EntityAIVillagerInteract(this));
-        this.field_70714_bg.func_75776_a(9, new EntityAIWanderAvoidWater(this, 0.6D));
-        this.field_70714_bg.func_75776_a(10, new EntityAIWatchClosest(this, EntityLiving.class, 8.0F));
+        this.tasks.addTask(0, new EntityAISwimming(this));
+        this.tasks.addTask(1, new EntityAIAvoidEntity(this, EntityZombie.class, 8.0F, 0.6D, 0.6D));
+        this.tasks.addTask(1, new EntityAIAvoidEntity(this, EntityEvoker.class, 12.0F, 0.8D, 0.8D));
+        this.tasks.addTask(1, new EntityAIAvoidEntity(this, EntityVindicator.class, 8.0F, 0.8D, 0.8D));
+        this.tasks.addTask(1, new EntityAIAvoidEntity(this, EntityVex.class, 8.0F, 0.6D, 0.6D));
+        this.tasks.addTask(1, new EntityAITradePlayer(this));
+        this.tasks.addTask(1, new EntityAILookAtTradePlayer(this));
+        this.tasks.addTask(2, new EntityAIMoveIndoors(this));
+        this.tasks.addTask(3, new EntityAIRestrictOpenDoor(this));
+        this.tasks.addTask(4, new EntityAIOpenDoor(this, true));
+        this.tasks.addTask(5, new EntityAIMoveTowardsRestriction(this, 0.6D));
+        this.tasks.addTask(6, new EntityAIVillagerMate(this));
+        this.tasks.addTask(7, new EntityAIFollowGolem(this));
+        this.tasks.addTask(9, new EntityAIWatchClosest2(this, EntityPlayer.class, 3.0F, 1.0F));
+        this.tasks.addTask(9, new EntityAIVillagerInteract(this));
+        this.tasks.addTask(9, new EntityAIWanderAvoidWater(this, 0.6D));
+        this.tasks.addTask(10, new EntityAIWatchClosest(this, EntityLiving.class, 8.0F));
     }
 
-    private void func_175552_ct()
+    private void setAdditionalAItasks()
     {
-        if (!this.field_175564_by)
+        if (!this.areAdditionalTasksSet)
         {
-            this.field_175564_by = true;
+            this.areAdditionalTasksSet = true;
 
-            if (this.func_70631_g_())
+            if (this.isChild())
             {
-                this.field_70714_bg.func_75776_a(8, new EntityAIPlay(this, 0.32D));
+                this.tasks.addTask(8, new EntityAIPlay(this, 0.32D));
             }
-            else if (this.func_70946_n() == 0)
+            else if (this.getProfession() == 0)
             {
-                this.field_70714_bg.func_75776_a(6, new EntityAIHarvestFarmland(this, 0.6D));
+                this.tasks.addTask(6, new EntityAIHarvestFarmland(this, 0.6D));
             }
         }
     }
 
-    protected void func_175500_n()
+    protected void onGrowingAdult()
     {
-        if (this.func_70946_n() == 0)
+        if (this.getProfession() == 0)
         {
-            this.field_70714_bg.func_75776_a(8, new EntityAIHarvestFarmland(this, 0.6D));
+            this.tasks.addTask(8, new EntityAIHarvestFarmland(this, 0.6D));
         }
 
-        super.func_175500_n();
+        super.onGrowingAdult();
     }
 
-    protected void func_110147_ax()
+    protected void applyEntityAttributes()
     {
-        super.func_110147_ax();
-        this.func_110148_a(SharedMonsterAttributes.field_111263_d).func_111128_a(0.5D);
+        super.applyEntityAttributes();
+        this.getEntityAttribute(SharedMonsterAttributes.MOVEMENT_SPEED).setBaseValue(0.5D);
     }
 
-    protected void func_70619_bc()
+    protected void updateAITasks()
     {
-        if (--this.field_70955_e <= 0)
+        if (--this.randomTickDivider <= 0)
         {
             BlockPos blockpos = new BlockPos(this);
-            this.field_70170_p.func_175714_ae().func_176060_a(blockpos);
-            this.field_70955_e = 70 + this.field_70146_Z.nextInt(50);
-            this.field_70954_d = this.field_70170_p.func_175714_ae().func_176056_a(blockpos, 32);
+            this.world.getVillageCollection().addToVillagerPositionList(blockpos);
+            this.randomTickDivider = 70 + this.rand.nextInt(50);
+            this.villageObj = this.world.getVillageCollection().getNearestVillage(blockpos, 32);
 
-            if (this.field_70954_d == null)
+            if (this.villageObj == null)
             {
-                this.func_110177_bN();
+                this.detachHome();
             }
             else
             {
-                BlockPos blockpos1 = this.field_70954_d.func_180608_a();
-                this.func_175449_a(blockpos1, this.field_70954_d.func_75568_b());
+                BlockPos blockpos1 = this.villageObj.getCenter();
+                this.setHomePosAndDistance(blockpos1, this.villageObj.getVillageRadius());
 
-                if (this.field_82190_bM)
+                if (this.isLookingForHome)
                 {
-                    this.field_82190_bM = false;
-                    this.field_70954_d.func_82683_b(5);
+                    this.isLookingForHome = false;
+                    this.villageObj.setDefaultPlayerReputation(5);
                 }
             }
         }
 
-        if (!this.func_70940_q() && this.field_70961_j > 0)
+        if (!this.isTrading() && this.timeUntilReset > 0)
         {
-            --this.field_70961_j;
+            --this.timeUntilReset;
 
-            if (this.field_70961_j <= 0)
+            if (this.timeUntilReset <= 0)
             {
-                if (this.field_70959_by)
+                if (this.needsInitilization)
                 {
-                    for (MerchantRecipe merchantrecipe : this.field_70963_i)
+                    for (MerchantRecipe merchantrecipe : this.buyingList)
                     {
-                        if (merchantrecipe.func_82784_g())
-                        {
-                            merchantrecipe.func_82783_a(this.field_70146_Z.nextInt(6) + this.field_70146_Z.nextInt(6) + 2);
+                        // CraftBukkit start
+                        int bonus = this.rand.nextInt(6) + this.rand.nextInt(6) + 2;
+                        VillagerReplenishTradeEvent event = new VillagerReplenishTradeEvent((Villager) this.getBukkitEntity(), merchantrecipe.asBukkit(), bonus);
+                        Bukkit.getPluginManager().callEvent(event);
+                        if (!event.isCancelled()) {
+                            merchantrecipe.increaseMaxTradeUses(event.getBonus());
                         }
+                        // CraftBukkit end
                     }
 
-                    this.func_175554_cu();
-                    this.field_70959_by = false;
+                    this.populateBuyingList();
+                    this.needsInitilization = false;
 
-                    if (this.field_70954_d != null && this.field_82189_bL != null)
+                    if (this.villageObj != null && this.lastBuyingPlayer != null)
                     {
-                        this.field_70170_p.func_72960_a(this, (byte)14);
-                        this.field_70954_d.func_82688_a(this.field_82189_bL, 1);
+                        this.world.setEntityState(this, (byte)14);
+                        this.villageObj.modifyPlayerReputation(this.lastBuyingPlayer, 1);
                     }
                 }
 
-                this.func_70690_d(new PotionEffect(MobEffects.field_76428_l, 200, 0));
+                this.addPotionEffect(new PotionEffect(MobEffects.REGENERATION, 200, 0));
             }
         }
 
-        super.func_70619_bc();
+        super.updateAITasks();
     }
 
-    public boolean func_184645_a(EntityPlayer p_184645_1_, EnumHand p_184645_2_)
+    public boolean processInteract(EntityPlayer player, EnumHand hand)
     {
-        ItemStack itemstack = p_184645_1_.func_184586_b(p_184645_2_);
-        boolean flag = itemstack.func_77973_b() == Items.field_151057_cb;
+        ItemStack itemstack = player.getHeldItem(hand);
+        boolean flag = itemstack.getItem() == Items.NAME_TAG;
 
         if (flag)
         {
-            itemstack.func_111282_a(p_184645_1_, this, p_184645_2_);
+            itemstack.interactWithEntity(player, this, hand);
             return true;
         }
-        else if (!this.func_190669_a(itemstack, this.getClass()) && this.func_70089_S() && !this.func_70940_q() && !this.func_70631_g_())
+        else if (!this.holdingSpawnEggOfClass(itemstack, this.getClass()) && this.isEntityAlive() && !this.isTrading() && !this.isChild())
         {
-            if (this.field_70963_i == null)
+            if (this.buyingList == null)
             {
-                this.func_175554_cu();
+                this.populateBuyingList();
             }
 
-            if (p_184645_2_ == EnumHand.MAIN_HAND)
+            if (hand == EnumHand.MAIN_HAND)
             {
-                p_184645_1_.func_71029_a(StatList.field_188074_H);
+                player.addStat(StatList.TALKED_TO_VILLAGER);
             }
 
-            if (!this.field_70170_p.field_72995_K && !this.field_70963_i.isEmpty())
+            if (!this.world.isRemote && !this.buyingList.isEmpty())
             {
-                this.func_70932_a_(p_184645_1_);
-                p_184645_1_.func_180472_a(this);
+                this.setCustomer(player);
+                player.displayVillagerTradeGui(this);
             }
-            else if (this.field_70963_i.isEmpty())
+            else if (this.buyingList.isEmpty())
             {
-                return super.func_184645_a(p_184645_1_, p_184645_2_);
+                return super.processInteract(player, hand);
             }
 
             return true;
         }
         else
         {
-            return super.func_184645_a(p_184645_1_, p_184645_2_);
+            return super.processInteract(player, hand);
         }
     }
 
-    protected void func_70088_a()
+    protected void entityInit()
     {
-        super.func_70088_a();
-        this.field_70180_af.func_187214_a(field_184752_bw, Integer.valueOf(0));
+        super.entityInit();
+        this.dataManager.register(PROFESSION, Integer.valueOf(0));
     }
 
-    public static void func_189785_b(DataFixer p_189785_0_)
+    public static void registerFixesVillager(DataFixer fixer)
     {
-        EntityLiving.func_189752_a(p_189785_0_, EntityVillager.class);
-        p_189785_0_.func_188258_a(FixTypes.ENTITY, new ItemStackDataLists(EntityVillager.class, new String[] {"Inventory"}));
-        p_189785_0_.func_188258_a(FixTypes.ENTITY, new IDataWalker()
+        EntityLiving.registerFixesMob(fixer, EntityVillager.class);
+        fixer.registerWalker(FixTypes.ENTITY, new ItemStackDataLists(EntityVillager.class, new String[] {"Inventory"}));
+        fixer.registerWalker(FixTypes.ENTITY, new IDataWalker()
         {
-            public NBTTagCompound func_188266_a(IDataFixer p_188266_1_, NBTTagCompound p_188266_2_, int p_188266_3_)
+            public NBTTagCompound process(IDataFixer fixer, NBTTagCompound compound, int versionIn)
             {
-                if (EntityList.func_191306_a(EntityVillager.class).equals(new ResourceLocation(p_188266_2_.func_74779_i("id"))) && p_188266_2_.func_150297_b("Offers", 10))
+                if (EntityList.getKey(EntityVillager.class).equals(new ResourceLocation(compound.getString("id"))) && compound.hasKey("Offers", 10))
                 {
-                    NBTTagCompound nbttagcompound = p_188266_2_.func_74775_l("Offers");
+                    NBTTagCompound nbttagcompound = compound.getCompoundTag("Offers");
 
-                    if (nbttagcompound.func_150297_b("Recipes", 9))
+                    if (nbttagcompound.hasKey("Recipes", 9))
                     {
-                        NBTTagList nbttaglist = nbttagcompound.func_150295_c("Recipes", 10);
+                        NBTTagList nbttaglist = nbttagcompound.getTagList("Recipes", 10);
 
-                        for (int i = 0; i < nbttaglist.func_74745_c(); ++i)
+                        for (int i = 0; i < nbttaglist.tagCount(); ++i)
                         {
-                            NBTTagCompound nbttagcompound1 = nbttaglist.func_150305_b(i);
-                            DataFixesManager.func_188277_a(p_188266_1_, nbttagcompound1, p_188266_3_, "buy");
-                            DataFixesManager.func_188277_a(p_188266_1_, nbttagcompound1, p_188266_3_, "buyB");
-                            DataFixesManager.func_188277_a(p_188266_1_, nbttagcompound1, p_188266_3_, "sell");
-                            nbttaglist.func_150304_a(i, nbttagcompound1);
+                            NBTTagCompound nbttagcompound1 = nbttaglist.getCompoundTagAt(i);
+                            DataFixesManager.processItemStack(fixer, nbttagcompound1, versionIn, "buy");
+                            DataFixesManager.processItemStack(fixer, nbttagcompound1, versionIn, "buyB");
+                            DataFixesManager.processItemStack(fixer, nbttagcompound1, versionIn, "sell");
+                            nbttaglist.set(i, nbttagcompound1);
                         }
                     }
                 }
 
-                return p_188266_2_;
+                return compound;
             }
         });
     }
 
-    public void func_70014_b(NBTTagCompound p_70014_1_)
+    public void writeEntityToNBT(NBTTagCompound compound)
     {
-        super.func_70014_b(p_70014_1_);
-        p_70014_1_.func_74768_a("Profession", this.func_70946_n());
-        p_70014_1_.func_74768_a("Riches", this.field_70956_bz);
-        p_70014_1_.func_74768_a("Career", this.field_175563_bv);
-        p_70014_1_.func_74768_a("CareerLevel", this.field_175562_bw);
-        p_70014_1_.func_74757_a("Willing", this.field_175565_bs);
+        super.writeEntityToNBT(compound);
+        compound.setInteger("Profession", this.getProfession());
+        compound.setString("ProfessionName", this.getProfessionForge().getRegistryName().toString());
+        compound.setInteger("Riches", this.wealth);
+        compound.setInteger("Career", this.careerId);
+        compound.setInteger("CareerLevel", this.careerLevel);
+        compound.setBoolean("Willing", this.isWillingToMate);
 
-        if (this.field_70963_i != null)
+        if (this.buyingList != null)
         {
-            p_70014_1_.func_74782_a("Offers", this.field_70963_i.func_77202_a());
+            compound.setTag("Offers", this.buyingList.getRecipiesAsTags());
         }
 
         NBTTagList nbttaglist = new NBTTagList();
 
-        for (int i = 0; i < this.field_175560_bz.func_70302_i_(); ++i)
+        for (int i = 0; i < this.villagerInventory.getSizeInventory(); ++i)
         {
-            ItemStack itemstack = this.field_175560_bz.func_70301_a(i);
+            ItemStack itemstack = this.villagerInventory.getStackInSlot(i);
 
-            if (!itemstack.func_190926_b())
+            if (!itemstack.isEmpty())
             {
-                nbttaglist.func_74742_a(itemstack.func_77955_b(new NBTTagCompound()));
+                nbttaglist.appendTag(itemstack.writeToNBT(new NBTTagCompound()));
             }
         }
 
-        p_70014_1_.func_74782_a("Inventory", nbttaglist);
+        compound.setTag("Inventory", nbttaglist);
     }
 
-    public void func_70037_a(NBTTagCompound p_70037_1_)
+    public void readEntityFromNBT(NBTTagCompound compound)
     {
-        super.func_70037_a(p_70037_1_);
-        this.func_70938_b(p_70037_1_.func_74762_e("Profession"));
-        this.field_70956_bz = p_70037_1_.func_74762_e("Riches");
-        this.field_175563_bv = p_70037_1_.func_74762_e("Career");
-        this.field_175562_bw = p_70037_1_.func_74762_e("CareerLevel");
-        this.field_175565_bs = p_70037_1_.func_74767_n("Willing");
+        super.readEntityFromNBT(compound);
+        this.setProfession(compound.getInteger("Profession"));
+        if (compound.hasKey("ProfessionName"))
+        {
+            net.minecraftforge.fml.common.registry.VillagerRegistry.VillagerProfession p =
+                net.minecraftforge.fml.common.registry.VillagerRegistry.instance().getRegistry().getValue(new net.minecraft.util.ResourceLocation(compound.getString("ProfessionName")));
+            if (p == null)
+                p = net.minecraftforge.fml.common.registry.VillagerRegistry.instance().getRegistry().getValue(new net.minecraft.util.ResourceLocation("minecraft:farmer"));
+            this.setProfession(p);
+        }
+        this.wealth = compound.getInteger("Riches");
+        this.careerId = compound.getInteger("Career");
+        this.careerLevel = compound.getInteger("CareerLevel");
+        this.isWillingToMate = compound.getBoolean("Willing");
 
-        if (p_70037_1_.func_150297_b("Offers", 10))
+        if (compound.hasKey("Offers", 10))
         {
-            NBTTagCompound nbttagcompound = p_70037_1_.func_74775_l("Offers");
-            this.field_70963_i = new MerchantRecipeList(nbttagcompound);
+            NBTTagCompound nbttagcompound = compound.getCompoundTag("Offers");
+            this.buyingList = new MerchantRecipeList(nbttagcompound);
         }
 
-        NBTTagList nbttaglist = p_70037_1_.func_150295_c("Inventory", 10);
+        NBTTagList nbttaglist = compound.getTagList("Inventory", 10);
 
-        for (int i = 0; i < nbttaglist.func_74745_c(); ++i)
+        for (int i = 0; i < nbttaglist.tagCount(); ++i)
         {
-            ItemStack itemstack = new ItemStack(nbttaglist.func_150305_b(i));
+            ItemStack itemstack = new ItemStack(nbttaglist.getCompoundTagAt(i));
 
-            if (!itemstack.func_190926_b())
+            if (!itemstack.isEmpty())
             {
-                this.field_175560_bz.func_174894_a(itemstack);
+                this.villagerInventory.addItem(itemstack);
             }
         }
 
-        this.func_98053_h(true);
-        this.func_175552_ct();
+        this.setCanPickUpLoot(true);
+        this.setAdditionalAItasks();
     }
 
-    protected boolean func_70692_ba()
+    protected boolean canDespawn()
     {
         return false;
     }
 
-    protected SoundEvent func_184639_G()
+    protected SoundEvent getAmbientSound()
     {
-        return this.func_70940_q() ? SoundEvents.field_187914_gn : SoundEvents.field_187910_gj;
+        return this.isTrading() ? SoundEvents.ENTITY_VILLAGER_TRADING : SoundEvents.ENTITY_VILLAGER_AMBIENT;
     }
 
-    protected SoundEvent func_184601_bQ()
+    protected SoundEvent getHurtSound()
     {
-        return SoundEvents.field_187912_gl;
+        return SoundEvents.ENTITY_VILLAGER_HURT;
     }
 
-    protected SoundEvent func_184615_bR()
+    protected SoundEvent getDeathSound()
     {
-        return SoundEvents.field_187911_gk;
+        return SoundEvents.ENTITY_VILLAGER_DEATH;
     }
 
     @Nullable
-    protected ResourceLocation func_184647_J()
+    protected ResourceLocation getLootTable()
     {
-        return LootTableList.field_191184_at;
+        return LootTableList.ENTITIES_VILLAGER;
     }
 
-    public void func_70938_b(int p_70938_1_)
+    public void setProfession(int professionId)
     {
-        this.field_70180_af.func_187227_b(field_184752_bw, Integer.valueOf(p_70938_1_));
+        this.dataManager.set(PROFESSION, Integer.valueOf(professionId));
+        net.minecraftforge.fml.common.registry.VillagerRegistry.onSetProfession(this, professionId);
     }
 
-    public int func_70946_n()
+    @Deprecated //Use Forge Variant below
+    public int getProfession()
     {
-        return Math.max(((Integer)this.field_70180_af.func_187225_a(field_184752_bw)).intValue() % 6, 0);
+        return Math.max(((Integer)this.dataManager.get(PROFESSION)).intValue(), 0);
     }
 
-    public boolean func_70941_o()
+    private net.minecraftforge.fml.common.registry.VillagerRegistry.VillagerProfession prof;
+    public void setProfession(net.minecraftforge.fml.common.registry.VillagerRegistry.VillagerProfession prof)
     {
-        return this.field_70952_f;
+        this.prof = prof;
+        this.setProfession(net.minecraftforge.fml.common.registry.VillagerRegistry.getId(prof));
     }
 
-    public void func_70947_e(boolean p_70947_1_)
+    public net.minecraftforge.fml.common.registry.VillagerRegistry.VillagerProfession getProfessionForge()
     {
-        this.field_70952_f = p_70947_1_;
+        if (this.prof == null)
+        {
+            this.prof = net.minecraftforge.fml.common.registry.VillagerRegistry.getById(this.getProfession());
+            if (this.prof == null)
+                return net.minecraftforge.fml.common.registry.VillagerRegistry.getById(0); //Farmer
+        }
+        return this.prof;
     }
 
-    public void func_70939_f(boolean p_70939_1_)
+    @Override
+    public void notifyDataManagerChange(DataParameter<?> key)
     {
-        this.field_70953_g = p_70939_1_;
+        super.notifyDataManagerChange(key);
+        if (key.equals(PROFESSION))
+        {
+            net.minecraftforge.fml.common.registry.VillagerRegistry.onSetProfession(this, this.dataManager.get(PROFESSION));
+        }
     }
 
-    public boolean func_70945_p()
+    public boolean isMating()
     {
-        return this.field_70953_g;
+        return this.isMating;
     }
 
-    public void func_70604_c(@Nullable EntityLivingBase p_70604_1_)
+    public void setMating(boolean mating)
     {
-        super.func_70604_c(p_70604_1_);
+        this.isMating = mating;
+    }
 
-        if (this.field_70954_d != null && p_70604_1_ != null)
+    public void setPlaying(boolean playing)
+    {
+        this.isPlaying = playing;
+    }
+
+    public boolean isPlaying()
+    {
+        return this.isPlaying;
+    }
+
+    public void setRevengeTarget(@Nullable EntityLivingBase livingBase)
+    {
+        super.setRevengeTarget(livingBase);
+
+        if (this.villageObj != null && livingBase != null)
         {
-            this.field_70954_d.func_75575_a(p_70604_1_);
+            this.villageObj.addOrRenewAgressor(livingBase);
 
-            if (p_70604_1_ instanceof EntityPlayer)
+            if (livingBase instanceof EntityPlayer)
             {
                 int i = -1;
 
-                if (this.func_70631_g_())
+                if (this.isChild())
                 {
                     i = -3;
                 }
 
-                this.field_70954_d.func_82688_a(p_70604_1_.func_70005_c_(), i);
+                this.villageObj.modifyPlayerReputation(livingBase.getUniqueID(), i);
 
-                if (this.func_70089_S())
+                if (this.isEntityAlive())
                 {
-                    this.field_70170_p.func_72960_a(this, (byte)13);
+                    this.world.setEntityState(this, (byte)13);
                 }
             }
         }
     }
 
-    public void func_70645_a(DamageSource p_70645_1_)
+    public void onDeath(DamageSource cause)
     {
-        if (this.field_70954_d != null)
+        if (this.villageObj != null)
         {
-            Entity entity = p_70645_1_.func_76346_g();
+            Entity entity = cause.getEntity();
 
             if (entity != null)
             {
                 if (entity instanceof EntityPlayer)
                 {
-                    this.field_70954_d.func_82688_a(entity.func_70005_c_(), -2);
+                    this.villageObj.modifyPlayerReputation(entity.getUniqueID(), -2);
                 }
                 else if (entity instanceof IMob)
                 {
-                    this.field_70954_d.func_82692_h();
+                    this.villageObj.endMatingSeason();
                 }
             }
             else
             {
-                EntityPlayer entityplayer = this.field_70170_p.func_72890_a(this, 16.0D);
+                EntityPlayer entityplayer = this.world.getClosestPlayerToEntity(this, 16.0D);
 
                 if (entityplayer != null)
                 {
-                    this.field_70954_d.func_82692_h();
+                    this.villageObj.endMatingSeason();
                 }
             }
         }
 
-        super.func_70645_a(p_70645_1_);
+        super.onDeath(cause);
     }
 
-    public void func_70932_a_(EntityPlayer p_70932_1_)
+    public void setCustomer(EntityPlayer player)
     {
-        this.field_70962_h = p_70932_1_;
+        this.buyingPlayer = player;
     }
 
-    public EntityPlayer func_70931_l_()
+    public EntityPlayer getCustomer()
     {
-        return this.field_70962_h;
+        return this.buyingPlayer;
     }
 
-    public boolean func_70940_q()
+    public boolean isTrading()
     {
-        return this.field_70962_h != null;
+        return this.buyingPlayer != null;
     }
 
-    public boolean func_175550_n(boolean p_175550_1_)
+    public boolean getIsWillingToMate(boolean updateFirst)
     {
-        if (!this.field_175565_bs && p_175550_1_ && this.func_175553_cp())
+        if (!this.isWillingToMate && updateFirst && this.hasEnoughFoodToBreed())
         {
             boolean flag = false;
 
-            for (int i = 0; i < this.field_175560_bz.func_70302_i_(); ++i)
+            for (int i = 0; i < this.villagerInventory.getSizeInventory(); ++i)
             {
-                ItemStack itemstack = this.field_175560_bz.func_70301_a(i);
+                ItemStack itemstack = this.villagerInventory.getStackInSlot(i);
 
-                if (!itemstack.func_190926_b())
+                if (!itemstack.isEmpty())
                 {
-                    if (itemstack.func_77973_b() == Items.field_151025_P && itemstack.func_190916_E() >= 3)
+                    if (itemstack.getItem() == Items.BREAD && itemstack.getCount() >= 3)
                     {
                         flag = true;
-                        this.field_175560_bz.func_70298_a(i, 3);
+                        this.villagerInventory.decrStackSize(i, 3);
                     }
-                    else if ((itemstack.func_77973_b() == Items.field_151174_bG || itemstack.func_77973_b() == Items.field_151172_bF) && itemstack.func_190916_E() >= 12)
+                    else if ((itemstack.getItem() == Items.POTATO || itemstack.getItem() == Items.CARROT) && itemstack.getCount() >= 12)
                     {
                         flag = true;
-                        this.field_175560_bz.func_70298_a(i, 12);
+                        this.villagerInventory.decrStackSize(i, 12);
                     }
                 }
 
                 if (flag)
                 {
-                    this.field_70170_p.func_72960_a(this, (byte)18);
-                    this.field_175565_bs = true;
+                    this.world.setEntityState(this, (byte)18);
+                    this.isWillingToMate = true;
                     break;
                 }
             }
         }
 
-        return this.field_175565_bs;
+        return this.isWillingToMate;
     }
 
-    public void func_175549_o(boolean p_175549_1_)
+    public void setIsWillingToMate(boolean isWillingToMate)
     {
-        this.field_175565_bs = p_175549_1_;
+        this.isWillingToMate = isWillingToMate;
     }
 
-    public void func_70933_a(MerchantRecipe p_70933_1_)
+    public void useRecipe(MerchantRecipe recipe)
     {
-        p_70933_1_.func_77399_f();
-        this.field_70757_a = -this.func_70627_aG();
-        this.func_184185_a(SoundEvents.field_187915_go, this.func_70599_aP(), this.func_70647_i());
-        int i = 3 + this.field_70146_Z.nextInt(4);
+        recipe.incrementToolUses();
+        this.livingSoundTime = -this.getTalkInterval();
+        this.playSound(SoundEvents.ENTITY_VILLAGER_YES, this.getSoundVolume(), this.getSoundPitch());
+        int i = 3 + this.rand.nextInt(4);
 
-        if (p_70933_1_.func_180321_e() == 1 || this.field_70146_Z.nextInt(5) == 0)
+        if (recipe.getToolUses() == 1 || this.rand.nextInt(5) == 0)
         {
-            this.field_70961_j = 40;
-            this.field_70959_by = true;
-            this.field_175565_bs = true;
+            this.timeUntilReset = 40;
+            this.needsInitilization = true;
+            this.isWillingToMate = true;
 
-            if (this.field_70962_h != null)
+            if (this.buyingPlayer != null)
             {
-                this.field_82189_bL = this.field_70962_h.func_70005_c_();
+                this.lastBuyingPlayer = this.buyingPlayer.getUniqueID();
             }
             else
             {
-                this.field_82189_bL = null;
+                this.lastBuyingPlayer = null;
             }
 
             i += 5;
         }
 
-        if (p_70933_1_.func_77394_a().func_77973_b() == Items.field_151166_bC)
+        if (recipe.getItemToBuy().getItem() == Items.EMERALD)
         {
-            this.field_70956_bz += p_70933_1_.func_77394_a().func_190916_E();
+            this.wealth += recipe.getItemToBuy().getCount();
         }
 
-        if (p_70933_1_.func_180322_j())
+        if (recipe.getRewardsExp())
         {
-            this.field_70170_p.func_72838_d(new EntityXPOrb(this.field_70170_p, this.field_70165_t, this.field_70163_u + 0.5D, this.field_70161_v, i));
+            this.world.spawnEntity(new EntityXPOrb(this.world, this.posX, this.posY + 0.5D, this.posZ, i));
         }
     }
 
-    public void func_110297_a_(ItemStack p_110297_1_)
+    public void verifySellingItem(ItemStack stack)
     {
-        if (!this.field_70170_p.field_72995_K && this.field_70757_a > -this.func_70627_aG() + 20)
+        if (!this.world.isRemote && this.livingSoundTime > -this.getTalkInterval() + 20)
         {
-            this.field_70757_a = -this.func_70627_aG();
-            this.func_184185_a(p_110297_1_.func_190926_b() ? SoundEvents.field_187913_gm : SoundEvents.field_187915_go, this.func_70599_aP(), this.func_70647_i());
+            this.livingSoundTime = -this.getTalkInterval();
+            this.playSound(stack.isEmpty() ? SoundEvents.ENTITY_VILLAGER_NO : SoundEvents.ENTITY_VILLAGER_YES, this.getSoundVolume(), this.getSoundPitch());
         }
     }
 
     @Nullable
-    public MerchantRecipeList func_70934_b(EntityPlayer p_70934_1_)
+    public MerchantRecipeList getRecipes(EntityPlayer player)
     {
-        if (this.field_70963_i == null)
+        if (this.buyingList == null)
         {
-            this.func_175554_cu();
+            this.populateBuyingList();
         }
 
-        return this.field_70963_i;
+        return this.buyingList;
     }
 
-    private void func_175554_cu()
+    private void populateBuyingList()
     {
-        EntityVillager.ITradeList[][][] aentityvillager$itradelist = field_175561_bA[this.func_70946_n()];
-
-        if (this.field_175563_bv != 0 && this.field_175562_bw != 0)
+        if (this.careerId != 0 && this.careerLevel != 0)
         {
-            ++this.field_175562_bw;
+            ++this.careerLevel;
         }
         else
         {
-            this.field_175563_bv = this.field_70146_Z.nextInt(aentityvillager$itradelist.length) + 1;
-            this.field_175562_bw = 1;
+            this.careerId = this.getProfessionForge().getRandomCareer(this.rand) + 1;
+            this.careerLevel = 1;
         }
 
-        if (this.field_70963_i == null)
+        if (this.buyingList == null)
         {
-            this.field_70963_i = new MerchantRecipeList();
+            this.buyingList = new MerchantRecipeList();
         }
 
-        int i = this.field_175563_bv - 1;
-        int j = this.field_175562_bw - 1;
+        int i = this.careerId - 1;
+        int j = this.careerLevel - 1;
+        java.util.List<EntityVillager.ITradeList> trades = this.getProfessionForge().getCareer(i).getTrades(j);
 
-        if (i >= 0 && i < aentityvillager$itradelist.length)
+        if (trades != null)
         {
-            EntityVillager.ITradeList[][] aentityvillager$itradelist1 = aentityvillager$itradelist[i];
-
-            if (j >= 0 && j < aentityvillager$itradelist1.length)
+            for (EntityVillager.ITradeList entityvillager$itradelist : trades)
             {
-                EntityVillager.ITradeList[] aentityvillager$itradelist2 = aentityvillager$itradelist1[j];
-
-                for (EntityVillager.ITradeList entityvillager$itradelist : aentityvillager$itradelist2)
-                {
-                    entityvillager$itradelist.func_190888_a(this, this.field_70963_i, this.field_70146_Z);
+                // CraftBukkit start
+                // this is a hack. this must be done because otherwise, if
+                // mojang adds a new type of villager merchant option, it will need to
+                // have event handling added manually. this is better than having to do that.
+                MerchantRecipeList list = new MerchantRecipeList();
+                entityvillager$itradelist.addMerchantRecipe(this, list, this.rand);
+                for (MerchantRecipe recipe : list) {
+                    VillagerAcquireTradeEvent event = new VillagerAcquireTradeEvent((Villager) getBukkitEntity(), recipe.asBukkit());
+                    Bukkit.getPluginManager().callEvent(event);
+                    if (!event.isCancelled()) {
+                        this.buyingList.add(CraftMerchantRecipe.fromBukkit(event.getRecipe()).toMinecraft());
+                    }
                 }
+                // CraftBukkit end
             }
         }
     }
 
     @SideOnly(Side.CLIENT)
-    public void func_70930_a(@Nullable MerchantRecipeList p_70930_1_)
+    public void setRecipes(@Nullable MerchantRecipeList recipeList)
     {
     }
 
-    public World func_190670_t_()
+    public World getWorld()
     {
-        return this.field_70170_p;
+        return this.world;
     }
 
-    public BlockPos func_190671_u_()
+    public BlockPos getPos()
     {
         return new BlockPos(this);
     }
 
-    public ITextComponent func_145748_c_()
+    public ITextComponent getDisplayName()
     {
-        Team team = this.func_96124_cp();
-        String s = this.func_95999_t();
+        Team team = this.getTeam();
+        String s = this.getCustomNameTag();
 
         if (s != null && !s.isEmpty())
         {
-            TextComponentString textcomponentstring = new TextComponentString(ScorePlayerTeam.func_96667_a(team, s));
-            textcomponentstring.func_150256_b().func_150209_a(this.func_174823_aP());
-            textcomponentstring.func_150256_b().func_179989_a(this.func_189512_bd());
+            TextComponentString textcomponentstring = new TextComponentString(ScorePlayerTeam.formatPlayerName(team, s));
+            textcomponentstring.getStyle().setHoverEvent(this.getHoverEvent());
+            textcomponentstring.getStyle().setInsertion(this.getCachedUniqueIdString());
             return textcomponentstring;
         }
         else
         {
-            if (this.field_70963_i == null)
+            if (this.buyingList == null)
             {
-                this.func_175554_cu();
+                this.populateBuyingList();
             }
 
             String s1 = null;
 
-            switch (this.func_70946_n())
+            switch (this.getProfession())
             {
                 case 0:
 
-                    if (this.field_175563_bv == 1)
+                    if (this.careerId == 1)
                     {
                         s1 = "farmer";
                     }
-                    else if (this.field_175563_bv == 2)
+                    else if (this.careerId == 2)
                     {
                         s1 = "fisherman";
                     }
-                    else if (this.field_175563_bv == 3)
+                    else if (this.careerId == 3)
                     {
                         s1 = "shepherd";
                     }
-                    else if (this.field_175563_bv == 4)
+                    else if (this.careerId == 4)
                     {
                         s1 = "fletcher";
                     }
@@ -703,11 +756,11 @@
                     break;
                 case 1:
 
-                    if (this.field_175563_bv == 1)
+                    if (this.careerId == 1)
                     {
                         s1 = "librarian";
                     }
-                    else if (this.field_175563_bv == 2)
+                    else if (this.careerId == 2)
                     {
                         s1 = "cartographer";
                     }
@@ -718,15 +771,15 @@
                     break;
                 case 3:
 
-                    if (this.field_175563_bv == 1)
+                    if (this.careerId == 1)
                     {
                         s1 = "armor";
                     }
-                    else if (this.field_175563_bv == 2)
+                    else if (this.careerId == 2)
                     {
                         s1 = "weapon";
                     }
-                    else if (this.field_175563_bv == 3)
+                    else if (this.careerId == 3)
                     {
                         s1 = "tool";
                     }
@@ -734,11 +787,11 @@
                     break;
                 case 4:
 
-                    if (this.field_175563_bv == 1)
+                    if (this.careerId == 1)
                     {
                         s1 = "butcher";
                     }
-                    else if (this.field_175563_bv == 2)
+                    else if (this.careerId == 2)
                     {
                         s1 = "leather";
                     }
@@ -748,183 +801,179 @@
                     s1 = "nitwit";
             }
 
-            if (s1 != null)
+            s1 = this.getProfessionForge().getCareer(this.careerId-1).getName();
             {
                 ITextComponent itextcomponent = new TextComponentTranslation("entity.Villager." + s1, new Object[0]);
-                itextcomponent.func_150256_b().func_150209_a(this.func_174823_aP());
-                itextcomponent.func_150256_b().func_179989_a(this.func_189512_bd());
+                itextcomponent.getStyle().setHoverEvent(this.getHoverEvent());
+                itextcomponent.getStyle().setInsertion(this.getCachedUniqueIdString());
 
                 if (team != null)
                 {
-                    itextcomponent.func_150256_b().func_150238_a(team.func_178775_l());
+                    itextcomponent.getStyle().setColor(team.getChatFormat());
                 }
 
                 return itextcomponent;
             }
-            else
-            {
-                return super.func_145748_c_();
-            }
         }
     }
 
-    public float func_70047_e()
+    public float getEyeHeight()
     {
-        return this.func_70631_g_() ? 0.81F : 1.62F;
+        return this.isChild() ? 0.81F : 1.62F;
     }
 
     @SideOnly(Side.CLIENT)
-    public void func_70103_a(byte p_70103_1_)
+    public void handleStatusUpdate(byte id)
     {
-        if (p_70103_1_ == 12)
+        if (id == 12)
         {
-            this.func_180489_a(EnumParticleTypes.HEART);
+            this.spawnParticles(EnumParticleTypes.HEART);
         }
-        else if (p_70103_1_ == 13)
+        else if (id == 13)
         {
-            this.func_180489_a(EnumParticleTypes.VILLAGER_ANGRY);
+            this.spawnParticles(EnumParticleTypes.VILLAGER_ANGRY);
         }
-        else if (p_70103_1_ == 14)
+        else if (id == 14)
         {
-            this.func_180489_a(EnumParticleTypes.VILLAGER_HAPPY);
+            this.spawnParticles(EnumParticleTypes.VILLAGER_HAPPY);
         }
         else
         {
-            super.func_70103_a(p_70103_1_);
+            super.handleStatusUpdate(id);
         }
     }
 
     @SideOnly(Side.CLIENT)
-    private void func_180489_a(EnumParticleTypes p_180489_1_)
+    private void spawnParticles(EnumParticleTypes particleType)
     {
         for (int i = 0; i < 5; ++i)
         {
-            double d0 = this.field_70146_Z.nextGaussian() * 0.02D;
-            double d1 = this.field_70146_Z.nextGaussian() * 0.02D;
-            double d2 = this.field_70146_Z.nextGaussian() * 0.02D;
-            this.field_70170_p.func_175688_a(p_180489_1_, this.field_70165_t + (double)(this.field_70146_Z.nextFloat() * this.field_70130_N * 2.0F) - (double)this.field_70130_N, this.field_70163_u + 1.0D + (double)(this.field_70146_Z.nextFloat() * this.field_70131_O), this.field_70161_v + (double)(this.field_70146_Z.nextFloat() * this.field_70130_N * 2.0F) - (double)this.field_70130_N, d0, d1, d2, new int[0]);
+            double d0 = this.rand.nextGaussian() * 0.02D;
+            double d1 = this.rand.nextGaussian() * 0.02D;
+            double d2 = this.rand.nextGaussian() * 0.02D;
+            this.world.spawnParticle(particleType, this.posX + (double)(this.rand.nextFloat() * this.width * 2.0F) - (double)this.width, this.posY + 1.0D + (double)(this.rand.nextFloat() * this.height), this.posZ + (double)(this.rand.nextFloat() * this.width * 2.0F) - (double)this.width, d0, d1, d2, new int[0]);
         }
     }
 
     @Nullable
-    public IEntityLivingData func_180482_a(DifficultyInstance p_180482_1_, @Nullable IEntityLivingData p_180482_2_)
+    public IEntityLivingData onInitialSpawn(DifficultyInstance difficulty, @Nullable IEntityLivingData livingdata)
     {
-        return this.func_190672_a(p_180482_1_, p_180482_2_, true);
+        return this.finalizeMobSpawn(difficulty, livingdata, true);
     }
 
-    public IEntityLivingData func_190672_a(DifficultyInstance p_190672_1_, @Nullable IEntityLivingData p_190672_2_, boolean p_190672_3_)
+    public IEntityLivingData finalizeMobSpawn(DifficultyInstance p_190672_1_, @Nullable IEntityLivingData p_190672_2_, boolean p_190672_3_)
     {
-        p_190672_2_ = super.func_180482_a(p_190672_1_, p_190672_2_);
+        p_190672_2_ = super.onInitialSpawn(p_190672_1_, p_190672_2_);
 
         if (p_190672_3_)
         {
-            this.func_70938_b(this.field_70170_p.field_73012_v.nextInt(6));
+            net.minecraftforge.fml.common.registry.VillagerRegistry.setRandomProfession(this, this.world.rand);
         }
 
-        this.func_175552_ct();
-        this.func_175554_cu();
+        this.setAdditionalAItasks();
+        this.populateBuyingList();
         return p_190672_2_;
     }
 
-    public void func_82187_q()
+    public void setLookingForHome()
     {
-        this.field_82190_bM = true;
+        this.isLookingForHome = true;
     }
 
-    public EntityVillager func_90011_a(EntityAgeable p_90011_1_)
+    public EntityVillager createChild(EntityAgeable ageable)
     {
-        EntityVillager entityvillager = new EntityVillager(this.field_70170_p);
-        entityvillager.func_180482_a(this.field_70170_p.func_175649_E(new BlockPos(entityvillager)), (IEntityLivingData)null);
+        EntityVillager entityvillager = new EntityVillager(this.world);
+        entityvillager.onInitialSpawn(this.world.getDifficultyForLocation(new BlockPos(entityvillager)), (IEntityLivingData)null);
         return entityvillager;
     }
 
-    public boolean func_184652_a(EntityPlayer p_184652_1_)
+    public boolean canBeLeashedTo(EntityPlayer player)
     {
         return false;
     }
 
-    public void func_70077_a(EntityLightningBolt p_70077_1_)
+    public void onStruckByLightning(EntityLightningBolt lightningBolt)
     {
-        if (!this.field_70170_p.field_72995_K && !this.field_70128_L)
+        if (!this.world.isRemote && !this.isDead)
         {
-            EntityWitch entitywitch = new EntityWitch(this.field_70170_p);
-            entitywitch.func_70012_b(this.field_70165_t, this.field_70163_u, this.field_70161_v, this.field_70177_z, this.field_70125_A);
-            entitywitch.func_180482_a(this.field_70170_p.func_175649_E(new BlockPos(entitywitch)), (IEntityLivingData)null);
-            entitywitch.func_94061_f(this.func_175446_cd());
+            EntityWitch entitywitch = new EntityWitch(this.world);
+            entitywitch.setLocationAndAngles(this.posX, this.posY, this.posZ, this.rotationYaw, this.rotationPitch);
+            entitywitch.onInitialSpawn(this.world.getDifficultyForLocation(new BlockPos(entitywitch)), (IEntityLivingData)null);
+            entitywitch.setNoAI(this.isAIDisabled());
 
-            if (this.func_145818_k_())
+            if (this.hasCustomName())
             {
-                entitywitch.func_96094_a(this.func_95999_t());
-                entitywitch.func_174805_g(this.func_174833_aM());
+                entitywitch.setCustomNameTag(this.getCustomNameTag());
+                entitywitch.setAlwaysRenderNameTag(this.getAlwaysRenderNameTag());
             }
 
-            this.field_70170_p.func_72838_d(entitywitch);
-            this.func_70106_y();
+            this.world.spawnEntity(entitywitch);
+            this.setDead();
         }
     }
 
-    public InventoryBasic func_175551_co()
+    public InventoryBasic getVillagerInventory()
     {
-        return this.field_175560_bz;
+        return this.villagerInventory;
     }
 
-    protected void func_175445_a(EntityItem p_175445_1_)
+    protected void updateEquipmentIfNeeded(EntityItem itemEntity)
     {
-        ItemStack itemstack = p_175445_1_.func_92059_d();
-        Item item = itemstack.func_77973_b();
+        ItemStack itemstack = itemEntity.getEntityItem();
+        Item item = itemstack.getItem();
 
-        if (this.func_175558_a(item))
+        if (this.canVillagerPickupItem(item))
         {
-            ItemStack itemstack1 = this.field_175560_bz.func_174894_a(itemstack);
+            ItemStack itemstack1 = this.villagerInventory.addItem(itemstack);
 
-            if (itemstack1.func_190926_b())
+            if (itemstack1.isEmpty())
             {
-                p_175445_1_.func_70106_y();
+                itemEntity.setDead();
             }
             else
             {
-                itemstack.func_190920_e(itemstack1.func_190916_E());
+                itemstack.setCount(itemstack1.getCount());
             }
         }
     }
 
-    private boolean func_175558_a(Item p_175558_1_)
+    private boolean canVillagerPickupItem(Item itemIn)
     {
-        return p_175558_1_ == Items.field_151025_P || p_175558_1_ == Items.field_151174_bG || p_175558_1_ == Items.field_151172_bF || p_175558_1_ == Items.field_151015_O || p_175558_1_ == Items.field_151014_N || p_175558_1_ == Items.field_185164_cV || p_175558_1_ == Items.field_185163_cU;
+        return itemIn == Items.BREAD || itemIn == Items.POTATO || itemIn == Items.CARROT || itemIn == Items.WHEAT || itemIn == Items.WHEAT_SEEDS || itemIn == Items.BEETROOT || itemIn == Items.BEETROOT_SEEDS;
     }
 
-    public boolean func_175553_cp()
+    public boolean hasEnoughFoodToBreed()
     {
-        return this.func_175559_s(1);
+        return this.hasEnoughItems(1);
     }
 
-    public boolean func_175555_cq()
+    public boolean canAbondonItems()
     {
-        return this.func_175559_s(2);
+        return this.hasEnoughItems(2);
     }
 
-    public boolean func_175557_cr()
+    public boolean wantsMoreFood()
     {
-        boolean flag = this.func_70946_n() == 0;
-        return flag ? !this.func_175559_s(5) : !this.func_175559_s(1);
+        boolean flag = this.getProfession() == 0;
+        return flag ? !this.hasEnoughItems(5) : !this.hasEnoughItems(1);
     }
 
-    private boolean func_175559_s(int p_175559_1_)
+    private boolean hasEnoughItems(int multiplier)
     {
-        boolean flag = this.func_70946_n() == 0;
+        boolean flag = this.getProfession() == 0;
 
-        for (int i = 0; i < this.field_175560_bz.func_70302_i_(); ++i)
+        for (int i = 0; i < this.villagerInventory.getSizeInventory(); ++i)
         {
-            ItemStack itemstack = this.field_175560_bz.func_70301_a(i);
+            ItemStack itemstack = this.villagerInventory.getStackInSlot(i);
 
-            if (!itemstack.func_190926_b())
+            if (!itemstack.isEmpty())
             {
-                if (itemstack.func_77973_b() == Items.field_151025_P && itemstack.func_190916_E() >= 3 * p_175559_1_ || itemstack.func_77973_b() == Items.field_151174_bG && itemstack.func_190916_E() >= 12 * p_175559_1_ || itemstack.func_77973_b() == Items.field_151172_bF && itemstack.func_190916_E() >= 12 * p_175559_1_ || itemstack.func_77973_b() == Items.field_185164_cV && itemstack.func_190916_E() >= 12 * p_175559_1_)
+                if (itemstack.getItem() == Items.BREAD && itemstack.getCount() >= 3 * multiplier || itemstack.getItem() == Items.POTATO && itemstack.getCount() >= 12 * multiplier || itemstack.getItem() == Items.CARROT && itemstack.getCount() >= 12 * multiplier || itemstack.getItem() == Items.BEETROOT && itemstack.getCount() >= 12 * multiplier)
                 {
                     return true;
                 }
 
-                if (flag && itemstack.func_77973_b() == Items.field_151015_O && itemstack.func_190916_E() >= 9 * p_175559_1_)
+                if (flag && itemstack.getItem() == Items.WHEAT && itemstack.getCount() >= 9 * multiplier)
                 {
                     return true;
                 }
@@ -934,13 +983,13 @@
         return false;
     }
 
-    public boolean func_175556_cs()
+    public boolean isFarmItemInInventory()
     {
-        for (int i = 0; i < this.field_175560_bz.func_70302_i_(); ++i)
+        for (int i = 0; i < this.villagerInventory.getSizeInventory(); ++i)
         {
-            ItemStack itemstack = this.field_175560_bz.func_70301_a(i);
+            ItemStack itemstack = this.villagerInventory.getStackInSlot(i);
 
-            if (!itemstack.func_190926_b() && (itemstack.func_77973_b() == Items.field_151014_N || itemstack.func_77973_b() == Items.field_151174_bG || itemstack.func_77973_b() == Items.field_151172_bF || itemstack.func_77973_b() == Items.field_185163_cU))
+            if (!itemstack.isEmpty() && (itemstack.getItem() == Items.WHEAT_SEEDS || itemstack.getItem() == Items.POTATO || itemstack.getItem() == Items.CARROT || itemstack.getItem() == Items.BEETROOT_SEEDS))
             {
                 return true;
             }
@@ -949,19 +998,19 @@
         return false;
     }
 
-    public boolean func_174820_d(int p_174820_1_, ItemStack p_174820_2_)
+    public boolean replaceItemInInventory(int inventorySlot, ItemStack itemStackIn)
     {
-        if (super.func_174820_d(p_174820_1_, p_174820_2_))
+        if (super.replaceItemInInventory(inventorySlot, itemStackIn))
         {
             return true;
         }
         else
         {
-            int i = p_174820_1_ - 300;
+            int i = inventorySlot - 300;
 
-            if (i >= 0 && i < this.field_175560_bz.func_70302_i_())
+            if (i >= 0 && i < this.villagerInventory.getSizeInventory())
             {
-                this.field_175560_bz.func_70299_a(i, p_174820_2_);
+                this.villagerInventory.setInventorySlotContents(i, itemStackIn);
                 return true;
             }
             else
@@ -973,66 +1022,66 @@
 
     public static class EmeraldForItems implements EntityVillager.ITradeList
         {
-            public Item field_179405_a;
-            public EntityVillager.PriceInfo field_179404_b;
+            public Item buyingItem;
+            public EntityVillager.PriceInfo price;
 
-            public EmeraldForItems(Item p_i45815_1_, EntityVillager.PriceInfo p_i45815_2_)
+            public EmeraldForItems(Item itemIn, EntityVillager.PriceInfo priceIn)
             {
-                this.field_179405_a = p_i45815_1_;
-                this.field_179404_b = p_i45815_2_;
+                this.buyingItem = itemIn;
+                this.price = priceIn;
             }
 
-            public void func_190888_a(IMerchant p_190888_1_, MerchantRecipeList p_190888_2_, Random p_190888_3_)
+            public void addMerchantRecipe(IMerchant merchant, MerchantRecipeList recipeList, Random random)
             {
                 int i = 1;
 
-                if (this.field_179404_b != null)
+                if (this.price != null)
                 {
-                    i = this.field_179404_b.func_179412_a(p_190888_3_);
+                    i = this.price.getPrice(random);
                 }
 
-                p_190888_2_.add(new MerchantRecipe(new ItemStack(this.field_179405_a, i, 0), Items.field_151166_bC));
+                recipeList.add(new MerchantRecipe(new ItemStack(this.buyingItem, i, 0), Items.EMERALD));
             }
         }
 
     public interface ITradeList
     {
-        void func_190888_a(IMerchant p_190888_1_, MerchantRecipeList p_190888_2_, Random p_190888_3_);
+        void addMerchantRecipe(IMerchant merchant, MerchantRecipeList recipeList, Random random);
     }
 
     public static class ItemAndEmeraldToItem implements EntityVillager.ITradeList
         {
-            public ItemStack field_179411_a;
-            public EntityVillager.PriceInfo field_179409_b;
-            public ItemStack field_179410_c;
-            public EntityVillager.PriceInfo field_179408_d;
+            public ItemStack buyingItemStack;
+            public EntityVillager.PriceInfo buyingPriceInfo;
+            public ItemStack sellingItemstack;
+            public EntityVillager.PriceInfo sellingPriceInfo;
 
             public ItemAndEmeraldToItem(Item p_i45813_1_, EntityVillager.PriceInfo p_i45813_2_, Item p_i45813_3_, EntityVillager.PriceInfo p_i45813_4_)
             {
-                this.field_179411_a = new ItemStack(p_i45813_1_);
-                this.field_179409_b = p_i45813_2_;
-                this.field_179410_c = new ItemStack(p_i45813_3_);
-                this.field_179408_d = p_i45813_4_;
+                this.buyingItemStack = new ItemStack(p_i45813_1_);
+                this.buyingPriceInfo = p_i45813_2_;
+                this.sellingItemstack = new ItemStack(p_i45813_3_);
+                this.sellingPriceInfo = p_i45813_4_;
             }
 
-            public void func_190888_a(IMerchant p_190888_1_, MerchantRecipeList p_190888_2_, Random p_190888_3_)
+            public void addMerchantRecipe(IMerchant merchant, MerchantRecipeList recipeList, Random random)
             {
-                int i = this.field_179409_b.func_179412_a(p_190888_3_);
-                int j = this.field_179408_d.func_179412_a(p_190888_3_);
-                p_190888_2_.add(new MerchantRecipe(new ItemStack(this.field_179411_a.func_77973_b(), i, this.field_179411_a.func_77960_j()), new ItemStack(Items.field_151166_bC), new ItemStack(this.field_179410_c.func_77973_b(), j, this.field_179410_c.func_77960_j())));
+                int i = this.buyingPriceInfo.getPrice(random);
+                int j = this.sellingPriceInfo.getPrice(random);
+                recipeList.add(new MerchantRecipe(new ItemStack(this.buyingItemStack.getItem(), i, this.buyingItemStack.getMetadata()), new ItemStack(Items.EMERALD), new ItemStack(this.sellingItemstack.getItem(), j, this.sellingItemstack.getMetadata())));
             }
         }
 
     public static class ListEnchantedBookForEmeralds implements EntityVillager.ITradeList
         {
-            public void func_190888_a(IMerchant p_190888_1_, MerchantRecipeList p_190888_2_, Random p_190888_3_)
+            public void addMerchantRecipe(IMerchant merchant, MerchantRecipeList recipeList, Random random)
             {
-                Enchantment enchantment = (Enchantment)Enchantment.field_185264_b.func_186801_a(p_190888_3_);
-                int i = MathHelper.func_76136_a(p_190888_3_, enchantment.func_77319_d(), enchantment.func_77325_b());
-                ItemStack itemstack = Items.field_151134_bR.func_92111_a(new EnchantmentData(enchantment, i));
-                int j = 2 + p_190888_3_.nextInt(5 + i * 10) + 3 * i;
+                Enchantment enchantment = (Enchantment)Enchantment.REGISTRY.getRandomObject(random);
+                int i = MathHelper.getInt(random, enchantment.getMinLevel(), enchantment.getMaxLevel());
+                ItemStack itemstack = Items.ENCHANTED_BOOK.getEnchantedItemStack(new EnchantmentData(enchantment, i));
+                int j = 2 + random.nextInt(5 + i * 10) + 3 * i;
 
-                if (enchantment.func_185261_e())
+                if (enchantment.isTreasureEnchantment())
                 {
                     j *= 2;
                 }
@@ -1042,60 +1091,63 @@
                     j = 64;
                 }
 
-                p_190888_2_.add(new MerchantRecipe(new ItemStack(Items.field_151122_aG), new ItemStack(Items.field_151166_bC, j), itemstack));
+                recipeList.add(new MerchantRecipe(new ItemStack(Items.BOOK), new ItemStack(Items.EMERALD, j), itemstack));
             }
         }
 
     public static class ListEnchantedItemForEmeralds implements EntityVillager.ITradeList
         {
-            public ItemStack field_179407_a;
-            public EntityVillager.PriceInfo field_179406_b;
+            public ItemStack enchantedItemStack;
+            public EntityVillager.PriceInfo priceInfo;
 
             public ListEnchantedItemForEmeralds(Item p_i45814_1_, EntityVillager.PriceInfo p_i45814_2_)
             {
-                this.field_179407_a = new ItemStack(p_i45814_1_);
-                this.field_179406_b = p_i45814_2_;
+                this.enchantedItemStack = new ItemStack(p_i45814_1_);
+                this.priceInfo = p_i45814_2_;
             }
 
-            public void func_190888_a(IMerchant p_190888_1_, MerchantRecipeList p_190888_2_, Random p_190888_3_)
+            public void addMerchantRecipe(IMerchant merchant, MerchantRecipeList recipeList, Random random)
             {
                 int i = 1;
 
-                if (this.field_179406_b != null)
+                if (this.priceInfo != null)
                 {
-                    i = this.field_179406_b.func_179412_a(p_190888_3_);
+                    i = this.priceInfo.getPrice(random);
                 }
 
-                ItemStack itemstack = new ItemStack(Items.field_151166_bC, i, 0);
-                ItemStack itemstack1 = EnchantmentHelper.func_77504_a(p_190888_3_, new ItemStack(this.field_179407_a.func_77973_b(), 1, this.field_179407_a.func_77960_j()), 5 + p_190888_3_.nextInt(15), false);
-                p_190888_2_.add(new MerchantRecipe(itemstack, itemstack1));
+                ItemStack itemstack = new ItemStack(Items.EMERALD, i, 0);
+                ItemStack itemstack1 = EnchantmentHelper.addRandomEnchantment(random, new ItemStack(this.enchantedItemStack.getItem(), 1, this.enchantedItemStack.getMetadata()), 5 + random.nextInt(15), false);
+                recipeList.add(new MerchantRecipe(itemstack, itemstack1));
             }
         }
+    //MODDERS DO NOT USE OR EDIT THIS IN ANY WAY IT WILL HAVE NO EFFECT, THIS IS JUST IN HERE TO ALLOW FORGE TO ACCESS IT
+    @Deprecated
+    public static ITradeList[][][][] GET_TRADES_DONT_USE(){ return DEFAULT_TRADE_LIST_MAP; }
 
     public static class ListItemForEmeralds implements EntityVillager.ITradeList
         {
-            public ItemStack field_179403_a;
-            public EntityVillager.PriceInfo field_179402_b;
+            public ItemStack itemToBuy;
+            public EntityVillager.PriceInfo priceInfo;
 
-            public ListItemForEmeralds(Item p_i45811_1_, EntityVillager.PriceInfo p_i45811_2_)
+            public ListItemForEmeralds(Item par1Item, EntityVillager.PriceInfo priceInfo)
             {
-                this.field_179403_a = new ItemStack(p_i45811_1_);
-                this.field_179402_b = p_i45811_2_;
+                this.itemToBuy = new ItemStack(par1Item);
+                this.priceInfo = priceInfo;
             }
 
-            public ListItemForEmeralds(ItemStack p_i45812_1_, EntityVillager.PriceInfo p_i45812_2_)
+            public ListItemForEmeralds(ItemStack stack, EntityVillager.PriceInfo priceInfo)
             {
-                this.field_179403_a = p_i45812_1_;
-                this.field_179402_b = p_i45812_2_;
+                this.itemToBuy = stack;
+                this.priceInfo = priceInfo;
             }
 
-            public void func_190888_a(IMerchant p_190888_1_, MerchantRecipeList p_190888_2_, Random p_190888_3_)
+            public void addMerchantRecipe(IMerchant merchant, MerchantRecipeList recipeList, Random random)
             {
                 int i = 1;
 
-                if (this.field_179402_b != null)
+                if (this.priceInfo != null)
                 {
-                    i = this.field_179402_b.func_179412_a(p_190888_3_);
+                    i = this.priceInfo.getPrice(random);
                 }
 
                 ItemStack itemstack;
@@ -1103,16 +1155,16 @@
 
                 if (i < 0)
                 {
-                    itemstack = new ItemStack(Items.field_151166_bC);
-                    itemstack1 = new ItemStack(this.field_179403_a.func_77973_b(), -i, this.field_179403_a.func_77960_j());
+                    itemstack = new ItemStack(Items.EMERALD);
+                    itemstack1 = new ItemStack(this.itemToBuy.getItem(), -i, this.itemToBuy.getMetadata());
                 }
                 else
                 {
-                    itemstack = new ItemStack(Items.field_151166_bC, i, 0);
-                    itemstack1 = new ItemStack(this.field_179403_a.func_77973_b(), 1, this.field_179403_a.func_77960_j());
+                    itemstack = new ItemStack(Items.EMERALD, i, 0);
+                    itemstack1 = new ItemStack(this.itemToBuy.getItem(), 1, this.itemToBuy.getMetadata());
                 }
 
-                p_190888_2_.add(new MerchantRecipe(itemstack, itemstack1));
+                recipeList.add(new MerchantRecipe(itemstack, itemstack1));
             }
         }
 
@@ -1124,42 +1176,42 @@
 
                 if (p_i45810_2_ < p_i45810_1_)
                 {
-                    EntityVillager.field_190674_bx.warn("PriceRange({}, {}) invalid, {} smaller than {}", new Object[] {Integer.valueOf(p_i45810_1_), Integer.valueOf(p_i45810_2_), Integer.valueOf(p_i45810_2_), Integer.valueOf(p_i45810_1_)});
+                    EntityVillager.LOGGER.warn("PriceRange({}, {}) invalid, {} smaller than {}", new Object[] {Integer.valueOf(p_i45810_1_), Integer.valueOf(p_i45810_2_), Integer.valueOf(p_i45810_2_), Integer.valueOf(p_i45810_1_)});
                 }
             }
 
-            public int func_179412_a(Random p_179412_1_)
+            public int getPrice(Random rand)
             {
-                return ((Integer)this.func_76341_a()).intValue() >= ((Integer)this.func_76340_b()).intValue() ? ((Integer)this.func_76341_a()).intValue() : ((Integer)this.func_76341_a()).intValue() + p_179412_1_.nextInt(((Integer)this.func_76340_b()).intValue() - ((Integer)this.func_76341_a()).intValue() + 1);
+                return ((Integer)this.getFirst()).intValue() >= ((Integer)this.getSecond()).intValue() ? ((Integer)this.getFirst()).intValue() : ((Integer)this.getFirst()).intValue() + rand.nextInt(((Integer)this.getSecond()).intValue() - ((Integer)this.getFirst()).intValue() + 1);
             }
         }
 
     static class TreasureMapForEmeralds implements EntityVillager.ITradeList
         {
-            public EntityVillager.PriceInfo field_190889_a;
-            public String field_190890_b;
-            public MapDecoration.Type field_190891_c;
+            public EntityVillager.PriceInfo value;
+            public String destination;
+            public MapDecoration.Type destinationType;
 
             public TreasureMapForEmeralds(EntityVillager.PriceInfo p_i47340_1_, String p_i47340_2_, MapDecoration.Type p_i47340_3_)
             {
-                this.field_190889_a = p_i47340_1_;
-                this.field_190890_b = p_i47340_2_;
-                this.field_190891_c = p_i47340_3_;
+                this.value = p_i47340_1_;
+                this.destination = p_i47340_2_;
+                this.destinationType = p_i47340_3_;
             }
 
-            public void func_190888_a(IMerchant p_190888_1_, MerchantRecipeList p_190888_2_, Random p_190888_3_)
+            public void addMerchantRecipe(IMerchant merchant, MerchantRecipeList recipeList, Random random)
             {
-                int i = this.field_190889_a.func_179412_a(p_190888_3_);
-                World world = p_190888_1_.func_190670_t_();
-                BlockPos blockpos = world.func_190528_a(this.field_190890_b, p_190888_1_.func_190671_u_(), true);
+                int i = this.value.getPrice(random);
+                World world = merchant.getWorld();
+                BlockPos blockpos = world.findNearestStructure(this.destination, merchant.getPos(), true);
 
                 if (blockpos != null)
                 {
-                    ItemStack itemstack = ItemMap.func_190906_a(world, (double)blockpos.func_177958_n(), (double)blockpos.func_177952_p(), (byte)2, true, true);
-                    ItemMap.func_190905_a(world, itemstack);
-                    MapData.func_191094_a(itemstack, blockpos, "+", this.field_190891_c);
-                    itemstack.func_190924_f("filled_map." + this.field_190890_b.toLowerCase(Locale.ROOT));
-                    p_190888_2_.add(new MerchantRecipe(new ItemStack(Items.field_151166_bC, i), new ItemStack(Items.field_151111_aL), itemstack));
+                    ItemStack itemstack = ItemMap.setupNewMap(world, (double)blockpos.getX(), (double)blockpos.getZ(), (byte)2, true, true);
+                    ItemMap.renderBiomePreviewMap(world, itemstack);
+                    MapData.addTargetDecoration(itemstack, blockpos, "+", this.destinationType);
+                    itemstack.setTranslatableName("filled_map." + this.destination.toLowerCase(Locale.ROOT));
+                    recipeList.add(new MerchantRecipe(new ItemStack(Items.EMERALD, i), new ItemStack(Items.COMPASS), itemstack));
                 }
             }
         }
