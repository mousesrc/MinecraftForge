--- ../src-base/minecraft/net/minecraft/entity/passive/EntityPig.java
+++ ../src-work/minecraft/net/minecraft/entity/passive/EntityPig.java
@@ -38,51 +38,52 @@
 import net.minecraft.util.math.MathHelper;
 import net.minecraft.world.World;
 import net.minecraft.world.storage.loot.LootTableList;
+import org.bukkit.craftbukkit.event.CraftEventFactory;
 
 public class EntityPig extends EntityAnimal
 {
-    private static final DataParameter<Boolean> field_184763_bv = EntityDataManager.<Boolean>func_187226_a(EntityPig.class, DataSerializers.field_187198_h);
-    private static final DataParameter<Integer> field_191520_bx = EntityDataManager.<Integer>func_187226_a(EntityPig.class, DataSerializers.field_187192_b);
-    private static final Set<Item> field_184764_bw = Sets.newHashSet(new Item[] {Items.field_151172_bF, Items.field_151174_bG, Items.field_185164_cV});
-    private boolean field_184765_bx;
-    private int field_184766_bz;
-    private int field_184767_bA;
+    private static final DataParameter<Boolean> SADDLED = EntityDataManager.<Boolean>createKey(EntityPig.class, DataSerializers.BOOLEAN);
+    private static final DataParameter<Integer> field_191520_bx = EntityDataManager.<Integer>createKey(EntityPig.class, DataSerializers.VARINT);
+    private static final Set<Item> TEMPTATION_ITEMS = Sets.newHashSet(new Item[] {Items.CARROT, Items.POTATO, Items.BEETROOT});
+    private boolean boosting;
+    private int boostTime;
+    private int totalBoostTime;
 
-    public EntityPig(World p_i1689_1_)
+    public EntityPig(World worldIn)
     {
-        super(p_i1689_1_);
-        this.func_70105_a(0.9F, 0.9F);
+        super(worldIn);
+        this.setSize(0.9F, 0.9F);
     }
 
-    protected void func_184651_r()
+    protected void initEntityAI()
     {
-        this.field_70714_bg.func_75776_a(0, new EntityAISwimming(this));
-        this.field_70714_bg.func_75776_a(1, new EntityAIPanic(this, 1.25D));
-        this.field_70714_bg.func_75776_a(3, new EntityAIMate(this, 1.0D));
-        this.field_70714_bg.func_75776_a(4, new EntityAITempt(this, 1.2D, Items.field_151146_bM, false));
-        this.field_70714_bg.func_75776_a(4, new EntityAITempt(this, 1.2D, false, field_184764_bw));
-        this.field_70714_bg.func_75776_a(5, new EntityAIFollowParent(this, 1.1D));
-        this.field_70714_bg.func_75776_a(6, new EntityAIWanderAvoidWater(this, 1.0D));
-        this.field_70714_bg.func_75776_a(7, new EntityAIWatchClosest(this, EntityPlayer.class, 6.0F));
-        this.field_70714_bg.func_75776_a(8, new EntityAILookIdle(this));
+        this.tasks.addTask(0, new EntityAISwimming(this));
+        this.tasks.addTask(1, new EntityAIPanic(this, 1.25D));
+        this.tasks.addTask(3, new EntityAIMate(this, 1.0D));
+        this.tasks.addTask(4, new EntityAITempt(this, 1.2D, Items.CARROT_ON_A_STICK, false));
+        this.tasks.addTask(4, new EntityAITempt(this, 1.2D, false, TEMPTATION_ITEMS));
+        this.tasks.addTask(5, new EntityAIFollowParent(this, 1.1D));
+        this.tasks.addTask(6, new EntityAIWanderAvoidWater(this, 1.0D));
+        this.tasks.addTask(7, new EntityAIWatchClosest(this, EntityPlayer.class, 6.0F));
+        this.tasks.addTask(8, new EntityAILookIdle(this));
     }
 
-    protected void func_110147_ax()
+    protected void applyEntityAttributes()
     {
-        super.func_110147_ax();
-        this.func_110148_a(SharedMonsterAttributes.field_111267_a).func_111128_a(10.0D);
-        this.func_110148_a(SharedMonsterAttributes.field_111263_d).func_111128_a(0.25D);
+        super.applyEntityAttributes();
+        this.getEntityAttribute(SharedMonsterAttributes.MAX_HEALTH).setBaseValue(10.0D);
+        this.getEntityAttribute(SharedMonsterAttributes.MOVEMENT_SPEED).setBaseValue(0.25D);
     }
 
     @Nullable
-    public Entity func_184179_bs()
+    public Entity getControllingPassenger()
     {
-        return this.func_184188_bt().isEmpty() ? null : (Entity)this.func_184188_bt().get(0);
+        return this.getPassengers().isEmpty() ? null : (Entity)this.getPassengers().get(0);
     }
 
-    public boolean func_82171_bF()
+    public boolean canBeSteered()
     {
-        Entity entity = this.func_184179_bs();
+        Entity entity = this.getControllingPassenger();
 
         if (!(entity instanceof EntityPlayer))
         {
@@ -91,89 +92,89 @@
         else
         {
             EntityPlayer entityplayer = (EntityPlayer)entity;
-            return entityplayer.func_184614_ca().func_77973_b() == Items.field_151146_bM || entityplayer.func_184592_cb().func_77973_b() == Items.field_151146_bM;
+            return entityplayer.getHeldItemMainhand().getItem() == Items.CARROT_ON_A_STICK || entityplayer.getHeldItemOffhand().getItem() == Items.CARROT_ON_A_STICK;
         }
     }
 
-    public void func_184206_a(DataParameter<?> p_184206_1_)
+    public void notifyDataManagerChange(DataParameter<?> key)
     {
-        if (field_191520_bx.equals(p_184206_1_) && this.field_70170_p.field_72995_K)
+        if (field_191520_bx.equals(key) && this.world.isRemote)
         {
-            this.field_184765_bx = true;
-            this.field_184766_bz = 0;
-            this.field_184767_bA = ((Integer)this.field_70180_af.func_187225_a(field_191520_bx)).intValue();
+            this.boosting = true;
+            this.boostTime = 0;
+            this.totalBoostTime = ((Integer)this.dataManager.get(field_191520_bx)).intValue();
         }
 
-        super.func_184206_a(p_184206_1_);
+        super.notifyDataManagerChange(key);
     }
 
-    protected void func_70088_a()
+    protected void entityInit()
     {
-        super.func_70088_a();
-        this.field_70180_af.func_187214_a(field_184763_bv, Boolean.valueOf(false));
-        this.field_70180_af.func_187214_a(field_191520_bx, Integer.valueOf(0));
+        super.entityInit();
+        this.dataManager.register(SADDLED, Boolean.valueOf(false));
+        this.dataManager.register(field_191520_bx, Integer.valueOf(0));
     }
 
-    public static void func_189792_b(DataFixer p_189792_0_)
+    public static void registerFixesPig(DataFixer fixer)
     {
-        EntityLiving.func_189752_a(p_189792_0_, EntityPig.class);
+        EntityLiving.registerFixesMob(fixer, EntityPig.class);
     }
 
-    public void func_70014_b(NBTTagCompound p_70014_1_)
+    public void writeEntityToNBT(NBTTagCompound compound)
     {
-        super.func_70014_b(p_70014_1_);
-        p_70014_1_.func_74757_a("Saddle", this.func_70901_n());
+        super.writeEntityToNBT(compound);
+        compound.setBoolean("Saddle", this.getSaddled());
     }
 
-    public void func_70037_a(NBTTagCompound p_70037_1_)
+    public void readEntityFromNBT(NBTTagCompound compound)
     {
-        super.func_70037_a(p_70037_1_);
-        this.func_70900_e(p_70037_1_.func_74767_n("Saddle"));
+        super.readEntityFromNBT(compound);
+        this.setSaddled(compound.getBoolean("Saddle"));
     }
 
-    protected SoundEvent func_184639_G()
+    protected SoundEvent getAmbientSound()
     {
-        return SoundEvents.field_187697_dL;
+        return SoundEvents.ENTITY_PIG_AMBIENT;
     }
 
-    protected SoundEvent func_184601_bQ()
+    protected SoundEvent getHurtSound()
     {
-        return SoundEvents.field_187703_dN;
+        return SoundEvents.ENTITY_PIG_HURT;
     }
 
-    protected SoundEvent func_184615_bR()
+    protected SoundEvent getDeathSound()
     {
-        return SoundEvents.field_187700_dM;
+        return SoundEvents.ENTITY_PIG_DEATH;
     }
 
-    protected void func_180429_a(BlockPos p_180429_1_, Block p_180429_2_)
+    protected void playStepSound(BlockPos pos, Block blockIn)
     {
-        this.func_184185_a(SoundEvents.field_187709_dP, 0.15F, 1.0F);
+        this.playSound(SoundEvents.ENTITY_PIG_STEP, 0.15F, 1.0F);
     }
 
-    public boolean func_184645_a(EntityPlayer p_184645_1_, EnumHand p_184645_2_)
+    public boolean processInteract(EntityPlayer player, EnumHand hand)
     {
-        if (!super.func_184645_a(p_184645_1_, p_184645_2_))
+        if (!super.processInteract(player, hand))
         {
-            ItemStack itemstack = p_184645_1_.func_184586_b(p_184645_2_);
+            ItemStack itemstack = player.getHeldItem(hand);
 
-            if (itemstack.func_77973_b() == Items.field_151057_cb)
+            if (itemstack.getItem() == Items.NAME_TAG)
             {
-                itemstack.func_111282_a(p_184645_1_, this, p_184645_2_);
+                itemstack.interactWithEntity(player, this, hand);
                 return true;
             }
-            else if (this.func_70901_n() && !this.func_184207_aI())
+            else if (this.getSaddled() && !this.isBeingRidden())
             {
-                if (!this.field_70170_p.field_72995_K)
+                if (!this.world.isRemote)
                 {
-                    p_184645_1_.func_184220_m(this);
+                    player.startRiding(this);
                 }
 
                 return true;
             }
-            else if (itemstack.func_77973_b() == Items.field_151141_av)
+            else if (itemstack.getItem() == Items.SADDLE)
             {
-                itemstack.func_111282_a(p_184645_1_, this, p_184645_2_);
+                itemstack.interactWithEntity(player, this, hand);
                 return true;
             }
             else
@@ -187,158 +188,164 @@
         }
     }
 
-    public void func_70645_a(DamageSource p_70645_1_)
+    public void onDeath(DamageSource cause)
     {
-        super.func_70645_a(p_70645_1_);
+        super.onDeath(cause);
 
-        if (!this.field_70170_p.field_72995_K)
+        if (!this.world.isRemote)
         {
-            if (this.func_70901_n())
+            if (this.getSaddled())
             {
-                this.func_145779_a(Items.field_151141_av, 1);
+                this.dropItem(Items.SADDLE, 1);
             }
         }
     }
 
     @Nullable
-    protected ResourceLocation func_184647_J()
+    protected ResourceLocation getLootTable()
     {
-        return LootTableList.field_186395_C;
+        return LootTableList.ENTITIES_PIG;
     }
 
-    public boolean func_70901_n()
+    public boolean getSaddled()
     {
-        return ((Boolean)this.field_70180_af.func_187225_a(field_184763_bv)).booleanValue();
+        return ((Boolean)this.dataManager.get(SADDLED)).booleanValue();
     }
 
-    public void func_70900_e(boolean p_70900_1_)
+    public void setSaddled(boolean saddled)
     {
-        if (p_70900_1_)
+        if (saddled)
         {
-            this.field_70180_af.func_187227_b(field_184763_bv, Boolean.valueOf(true));
+            this.dataManager.set(SADDLED, Boolean.valueOf(true));
         }
         else
         {
-            this.field_70180_af.func_187227_b(field_184763_bv, Boolean.valueOf(false));
+            this.dataManager.set(SADDLED, Boolean.valueOf(false));
         }
     }
 
-    public void func_70077_a(EntityLightningBolt p_70077_1_)
+    public void onStruckByLightning(EntityLightningBolt lightningBolt)
     {
-        if (!this.field_70170_p.field_72995_K && !this.field_70128_L)
+        if (!this.world.isRemote && !this.isDead)
         {
-            EntityPigZombie entitypigzombie = new EntityPigZombie(this.field_70170_p);
-            entitypigzombie.func_184201_a(EntityEquipmentSlot.MAINHAND, new ItemStack(Items.field_151010_B));
-            entitypigzombie.func_70012_b(this.field_70165_t, this.field_70163_u, this.field_70161_v, this.field_70177_z, this.field_70125_A);
-            entitypigzombie.func_94061_f(this.func_175446_cd());
+            EntityPigZombie entitypigzombie = new EntityPigZombie(this.world);
 
-            if (this.func_145818_k_())
+            // CraftBukkit start
+            if (CraftEventFactory.callPigZapEvent(this, lightningBolt, entitypigzombie).isCancelled()) {
+                return;
+            }
+            // CraftBukkit end
+            entitypigzombie.setItemStackToSlot(EntityEquipmentSlot.MAINHAND, new ItemStack(Items.GOLDEN_SWORD));
+            entitypigzombie.setLocationAndAngles(this.posX, this.posY, this.posZ, this.rotationYaw, this.rotationPitch);
+            entitypigzombie.setNoAI(this.isAIDisabled());
+
+            if (this.hasCustomName())
             {
-                entitypigzombie.func_96094_a(this.func_95999_t());
-                entitypigzombie.func_174805_g(this.func_174833_aM());
+                entitypigzombie.setCustomNameTag(this.getCustomNameTag());
+                entitypigzombie.setAlwaysRenderNameTag(this.getAlwaysRenderNameTag());
             }
 
-            this.field_70170_p.func_72838_d(entitypigzombie);
-            this.func_70106_y();
+            this.world.addEntity(entitypigzombie, org.bukkit.event.entity.CreatureSpawnEvent.SpawnReason.LIGHTNING);
+            this.setDead();
         }
     }
 
-    public void func_180430_e(float p_180430_1_, float p_180430_2_)
+    public void fall(float distance, float damageMultiplier)
     {
-        super.func_180430_e(p_180430_1_, p_180430_2_);
+        super.fall(distance, damageMultiplier);
 
-        if (p_180430_1_ > 5.0F)
+        if (distance > 5.0F)
         {
-            for (EntityPlayer entityplayer : this.func_184180_b(EntityPlayer.class))
+            for (EntityPlayer entityplayer : this.getRecursivePassengersByType(EntityPlayer.class))
             {
-                entityplayer.func_71029_a(AchievementList.field_187993_u);
+                entityplayer.addStat(AchievementList.FLY_PIG);
             }
         }
     }
 
-    public void func_70612_e(float p_70612_1_, float p_70612_2_)
+    public void moveEntityWithHeading(float strafe, float forward)
     {
-        Entity entity = this.func_184188_bt().isEmpty() ? null : (Entity)this.func_184188_bt().get(0);
+        Entity entity = this.getPassengers().isEmpty() ? null : (Entity)this.getPassengers().get(0);
 
-        if (this.func_184207_aI() && this.func_82171_bF())
+        if (this.isBeingRidden() && this.canBeSteered())
         {
-            this.field_70177_z = entity.field_70177_z;
-            this.field_70126_B = this.field_70177_z;
-            this.field_70125_A = entity.field_70125_A * 0.5F;
-            this.func_70101_b(this.field_70177_z, this.field_70125_A);
-            this.field_70761_aq = this.field_70177_z;
-            this.field_70759_as = this.field_70177_z;
-            this.field_70138_W = 1.0F;
-            this.field_70747_aH = this.func_70689_ay() * 0.1F;
+            this.rotationYaw = entity.rotationYaw;
+            this.prevRotationYaw = this.rotationYaw;
+            this.rotationPitch = entity.rotationPitch * 0.5F;
+            this.setRotation(this.rotationYaw, this.rotationPitch);
+            this.renderYawOffset = this.rotationYaw;
+            this.rotationYawHead = this.rotationYaw;
+            this.stepHeight = 1.0F;
+            this.jumpMovementFactor = this.getAIMoveSpeed() * 0.1F;
 
-            if (this.field_184765_bx && this.field_184766_bz++ > this.field_184767_bA)
+            if (this.boosting && this.boostTime++ > this.totalBoostTime)
             {
-                this.field_184765_bx = false;
+                this.boosting = false;
             }
 
-            if (this.func_184186_bw())
+            if (this.canPassengerSteer())
             {
-                float f = (float)this.func_110148_a(SharedMonsterAttributes.field_111263_d).func_111126_e() * 0.225F;
+                float f = (float)this.getEntityAttribute(SharedMonsterAttributes.MOVEMENT_SPEED).getAttributeValue() * 0.225F;
 
-                if (this.field_184765_bx)
+                if (this.boosting)
                 {
-                    f += f * 1.15F * MathHelper.func_76126_a((float)this.field_184766_bz / (float)this.field_184767_bA * (float)Math.PI);
+                    f += f * 1.15F * MathHelper.sin((float)this.boostTime / (float)this.totalBoostTime * (float)Math.PI);
                 }
 
-                this.func_70659_e(f);
-                super.func_70612_e(0.0F, 1.0F);
+                this.setAIMoveSpeed(f);
+                super.moveEntityWithHeading(0.0F, 1.0F);
             }
             else
             {
-                this.field_70159_w = 0.0D;
-                this.field_70181_x = 0.0D;
-                this.field_70179_y = 0.0D;
+                this.motionX = 0.0D;
+                this.motionY = 0.0D;
+                this.motionZ = 0.0D;
             }
 
-            this.field_184618_aE = this.field_70721_aZ;
-            double d1 = this.field_70165_t - this.field_70169_q;
-            double d0 = this.field_70161_v - this.field_70166_s;
-            float f1 = MathHelper.func_76133_a(d1 * d1 + d0 * d0) * 4.0F;
+            this.prevLimbSwingAmount = this.limbSwingAmount;
+            double d1 = this.posX - this.prevPosX;
+            double d0 = this.posZ - this.prevPosZ;
+            float f1 = MathHelper.sqrt(d1 * d1 + d0 * d0) * 4.0F;
 
             if (f1 > 1.0F)
             {
                 f1 = 1.0F;
             }
 
-            this.field_70721_aZ += (f1 - this.field_70721_aZ) * 0.4F;
-            this.field_184619_aG += this.field_70721_aZ;
+            this.limbSwingAmount += (f1 - this.limbSwingAmount) * 0.4F;
+            this.limbSwing += this.limbSwingAmount;
         }
         else
         {
-            this.field_70138_W = 0.5F;
-            this.field_70747_aH = 0.02F;
-            super.func_70612_e(p_70612_1_, p_70612_2_);
+            this.stepHeight = 0.5F;
+            this.jumpMovementFactor = 0.02F;
+            super.moveEntityWithHeading(strafe, forward);
         }
     }
 
-    public boolean func_184762_da()
+    public boolean boost()
     {
-        if (this.field_184765_bx)
+        if (this.boosting)
         {
             return false;
         }
         else
         {
-            this.field_184765_bx = true;
-            this.field_184766_bz = 0;
-            this.field_184767_bA = this.func_70681_au().nextInt(841) + 140;
-            this.func_184212_Q().func_187227_b(field_191520_bx, Integer.valueOf(this.field_184767_bA));
+            this.boosting = true;
+            this.boostTime = 0;
+            this.totalBoostTime = this.getRNG().nextInt(841) + 140;
+            this.getDataManager().set(field_191520_bx, Integer.valueOf(this.totalBoostTime));
             return true;
         }
     }
 
-    public EntityPig func_90011_a(EntityAgeable p_90011_1_)
+    public EntityPig createChild(EntityAgeable ageable)
     {
-        return new EntityPig(this.field_70170_p);
+        return new EntityPig(this.world);
     }
 
-    public boolean func_70877_b(ItemStack p_70877_1_)
+    public boolean isBreedingItem(ItemStack stack)
     {
-        return field_184764_bw.contains(p_70877_1_.func_77973_b());
+        return TEMPTATION_ITEMS.contains(stack.getItem());
     }
 }
