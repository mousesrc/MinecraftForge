--- ../src-base/minecraft/net/minecraft/entity/passive/EntityWolf.java
+++ ../src-work/minecraft/net/minecraft/entity/passive/EntityWolf.java
@@ -51,239 +51,255 @@
 import net.minecraft.world.storage.loot.LootTableList;
 import net.minecraftforge.fml.relauncher.Side;
 import net.minecraftforge.fml.relauncher.SideOnly;
+import org.bukkit.event.entity.EntityTargetEvent;
 
 public class EntityWolf extends EntityTameable
 {
-    private static final DataParameter<Float> field_184759_bz = EntityDataManager.<Float>func_187226_a(EntityWolf.class, DataSerializers.field_187193_c);
-    private static final DataParameter<Boolean> field_184760_bA = EntityDataManager.<Boolean>func_187226_a(EntityWolf.class, DataSerializers.field_187198_h);
-    private static final DataParameter<Integer> field_184758_bB = EntityDataManager.<Integer>func_187226_a(EntityWolf.class, DataSerializers.field_187192_b);
-    private float field_70926_e;
-    private float field_70924_f;
-    private boolean field_70925_g;
-    private boolean field_70928_h;
-    private float field_70929_i;
-    private float field_70927_j;
+    private static final DataParameter<Float> DATA_HEALTH_ID = EntityDataManager.<Float>createKey(EntityWolf.class, DataSerializers.FLOAT);
+    private static final DataParameter<Boolean> BEGGING = EntityDataManager.<Boolean>createKey(EntityWolf.class, DataSerializers.BOOLEAN);
+    private static final DataParameter<Integer> COLLAR_COLOR = EntityDataManager.<Integer>createKey(EntityWolf.class, DataSerializers.VARINT);
+    private float headRotationCourse;
+    private float headRotationCourseOld;
+    private boolean isWet;
+    private boolean isShaking;
+    private float timeWolfIsShaking;
+    private float prevTimeWolfIsShaking;
 
-    public EntityWolf(World p_i1696_1_)
+    public EntityWolf(World worldIn)
     {
-        super(p_i1696_1_);
-        this.func_70105_a(0.6F, 0.85F);
-        this.func_70903_f(false);
+        super(worldIn);
+        this.setSize(0.6F, 0.85F);
+        this.setTamed(false);
     }
 
-    protected void func_184651_r()
+    protected void initEntityAI()
     {
-        this.field_70911_d = new EntityAISit(this);
-        this.field_70714_bg.func_75776_a(1, new EntityAISwimming(this));
-        this.field_70714_bg.func_75776_a(2, this.field_70911_d);
-        this.field_70714_bg.func_75776_a(3, new EntityWolf.AIAvoidEntity(this, EntityLlama.class, 24.0F, 1.5D, 1.5D));
-        this.field_70714_bg.func_75776_a(4, new EntityAILeapAtTarget(this, 0.4F));
-        this.field_70714_bg.func_75776_a(5, new EntityAIAttackMelee(this, 1.0D, true));
-        this.field_70714_bg.func_75776_a(6, new EntityAIFollowOwner(this, 1.0D, 10.0F, 2.0F));
-        this.field_70714_bg.func_75776_a(7, new EntityAIMate(this, 1.0D));
-        this.field_70714_bg.func_75776_a(8, new EntityAIWanderAvoidWater(this, 1.0D));
-        this.field_70714_bg.func_75776_a(9, new EntityAIBeg(this, 8.0F));
-        this.field_70714_bg.func_75776_a(10, new EntityAIWatchClosest(this, EntityPlayer.class, 8.0F));
-        this.field_70714_bg.func_75776_a(10, new EntityAILookIdle(this));
-        this.field_70715_bh.func_75776_a(1, new EntityAIOwnerHurtByTarget(this));
-        this.field_70715_bh.func_75776_a(2, new EntityAIOwnerHurtTarget(this));
-        this.field_70715_bh.func_75776_a(3, new EntityAIHurtByTarget(this, true, new Class[0]));
-        this.field_70715_bh.func_75776_a(4, new EntityAITargetNonTamed(this, EntityAnimal.class, false, new Predicate<Entity>()
+        this.aiSit = new EntityAISit(this);
+        this.tasks.addTask(1, new EntityAISwimming(this));
+        this.tasks.addTask(2, this.aiSit);
+        this.tasks.addTask(3, new EntityWolf.AIAvoidEntity(this, EntityLlama.class, 24.0F, 1.5D, 1.5D));
+        this.tasks.addTask(4, new EntityAILeapAtTarget(this, 0.4F));
+        this.tasks.addTask(5, new EntityAIAttackMelee(this, 1.0D, true));
+        this.tasks.addTask(6, new EntityAIFollowOwner(this, 1.0D, 10.0F, 2.0F));
+        this.tasks.addTask(7, new EntityAIMate(this, 1.0D));
+        this.tasks.addTask(8, new EntityAIWanderAvoidWater(this, 1.0D));
+        this.tasks.addTask(9, new EntityAIBeg(this, 8.0F));
+        this.tasks.addTask(10, new EntityAIWatchClosest(this, EntityPlayer.class, 8.0F));
+        this.tasks.addTask(10, new EntityAILookIdle(this));
+        this.targetTasks.addTask(1, new EntityAIOwnerHurtByTarget(this));
+        this.targetTasks.addTask(2, new EntityAIOwnerHurtTarget(this));
+        this.targetTasks.addTask(3, new EntityAIHurtByTarget(this, true, new Class[0]));
+        this.targetTasks.addTask(4, new EntityAITargetNonTamed(this, EntityAnimal.class, false, new Predicate<Entity>()
         {
             public boolean apply(@Nullable Entity p_apply_1_)
             {
                 return p_apply_1_ instanceof EntitySheep || p_apply_1_ instanceof EntityRabbit;
             }
         }));
-        this.field_70715_bh.func_75776_a(5, new EntityAINearestAttackableTarget(this, AbstractSkeleton.class, false));
+        this.targetTasks.addTask(5, new EntityAINearestAttackableTarget(this, AbstractSkeleton.class, false));
     }
 
-    protected void func_110147_ax()
+    // CraftBukkit - add overriden version
+    @Override
+    public boolean setGoalTarget(EntityLivingBase entityliving, EntityTargetEvent.TargetReason reason, boolean fire) {
+        if (!super.setGoalTarget(entityliving, reason, fire)) {
+            return false;
+        }
+        entityliving = getAttackTarget();
+        if (entityliving == null) {
+            this.setAngry(false);
+        } else if (!this.isTamed()) {
+            this.setAngry(true);
+        }
+        return true;
+    }
+    // CraftBukkit end
+    protected void applyEntityAttributes()
     {
-        super.func_110147_ax();
-        this.func_110148_a(SharedMonsterAttributes.field_111263_d).func_111128_a(0.30000001192092896D);
+        super.applyEntityAttributes();
+        this.getEntityAttribute(SharedMonsterAttributes.MOVEMENT_SPEED).setBaseValue(0.30000001192092896D);
 
-        if (this.func_70909_n())
+        if (this.isTamed())
         {
-            this.func_110148_a(SharedMonsterAttributes.field_111267_a).func_111128_a(20.0D);
+            this.getEntityAttribute(SharedMonsterAttributes.MAX_HEALTH).setBaseValue(20.0D);
         }
         else
         {
-            this.func_110148_a(SharedMonsterAttributes.field_111267_a).func_111128_a(8.0D);
+            this.getEntityAttribute(SharedMonsterAttributes.MAX_HEALTH).setBaseValue(8.0D);
         }
 
-        this.func_110140_aT().func_111150_b(SharedMonsterAttributes.field_111264_e).func_111128_a(2.0D);
+        this.getAttributeMap().registerAttribute(SharedMonsterAttributes.ATTACK_DAMAGE).setBaseValue(2.0D);
     }
 
-    public void func_70624_b(@Nullable EntityLivingBase p_70624_1_)
+    public void setAttackTarget(@Nullable EntityLivingBase entitylivingbaseIn)
     {
-        super.func_70624_b(p_70624_1_);
+        super.setAttackTarget(entitylivingbaseIn);
 
-        if (p_70624_1_ == null)
+        if (entitylivingbaseIn == null)
         {
-            this.func_70916_h(false);
+            this.setAngry(false);
         }
-        else if (!this.func_70909_n())
+        else if (!this.isTamed())
         {
-            this.func_70916_h(true);
+            this.setAngry(true);
         }
     }
 
-    protected void func_70619_bc()
+    protected void updateAITasks()
     {
-        this.field_70180_af.func_187227_b(field_184759_bz, Float.valueOf(this.func_110143_aJ()));
+        this.dataManager.set(DATA_HEALTH_ID, Float.valueOf(this.getHealth()));
     }
 
-    protected void func_70088_a()
+    protected void entityInit()
     {
-        super.func_70088_a();
-        this.field_70180_af.func_187214_a(field_184759_bz, Float.valueOf(this.func_110143_aJ()));
-        this.field_70180_af.func_187214_a(field_184760_bA, Boolean.valueOf(false));
-        this.field_70180_af.func_187214_a(field_184758_bB, Integer.valueOf(EnumDyeColor.RED.func_176767_b()));
+        super.entityInit();
+        this.dataManager.register(DATA_HEALTH_ID, Float.valueOf(this.getHealth()));
+        this.dataManager.register(BEGGING, Boolean.valueOf(false));
+        this.dataManager.register(COLLAR_COLOR, Integer.valueOf(EnumDyeColor.RED.getDyeDamage()));
     }
 
-    protected void func_180429_a(BlockPos p_180429_1_, Block p_180429_2_)
+    protected void playStepSound(BlockPos pos, Block blockIn)
     {
-        this.func_184185_a(SoundEvents.field_187869_gK, 0.15F, 1.0F);
+        this.playSound(SoundEvents.ENTITY_WOLF_STEP, 0.15F, 1.0F);
     }
 
-    public static void func_189788_b(DataFixer p_189788_0_)
+    public static void registerFixesWolf(DataFixer fixer)
     {
-        EntityLiving.func_189752_a(p_189788_0_, EntityWolf.class);
+        EntityLiving.registerFixesMob(fixer, EntityWolf.class);
     }
 
-    public void func_70014_b(NBTTagCompound p_70014_1_)
+    public void writeEntityToNBT(NBTTagCompound compound)
     {
-        super.func_70014_b(p_70014_1_);
-        p_70014_1_.func_74757_a("Angry", this.func_70919_bu());
-        p_70014_1_.func_74774_a("CollarColor", (byte)this.func_175546_cu().func_176767_b());
+        super.writeEntityToNBT(compound);
+        compound.setBoolean("Angry", this.isAngry());
+        compound.setByte("CollarColor", (byte)this.getCollarColor().getDyeDamage());
     }
 
-    public void func_70037_a(NBTTagCompound p_70037_1_)
+    public void readEntityFromNBT(NBTTagCompound compound)
     {
-        super.func_70037_a(p_70037_1_);
-        this.func_70916_h(p_70037_1_.func_74767_n("Angry"));
+        super.readEntityFromNBT(compound);
+        this.setAngry(compound.getBoolean("Angry"));
 
-        if (p_70037_1_.func_150297_b("CollarColor", 99))
+        if (compound.hasKey("CollarColor", 99))
         {
-            this.func_175547_a(EnumDyeColor.func_176766_a(p_70037_1_.func_74771_c("CollarColor")));
+            this.setCollarColor(EnumDyeColor.byDyeDamage(compound.getByte("CollarColor")));
         }
     }
 
-    protected SoundEvent func_184639_G()
+    protected SoundEvent getAmbientSound()
     {
-        return this.func_70919_bu() ? SoundEvents.field_187861_gG : (this.field_70146_Z.nextInt(3) == 0 ? (this.func_70909_n() && ((Float)this.field_70180_af.func_187225_a(field_184759_bz)).floatValue() < 10.0F ? SoundEvents.field_187871_gL : SoundEvents.field_187865_gI) : SoundEvents.field_187857_gE);
+        return this.isAngry() ? SoundEvents.ENTITY_WOLF_GROWL : (this.rand.nextInt(3) == 0 ? (this.isTamed() && ((Float)this.dataManager.get(DATA_HEALTH_ID)).floatValue() < 10.0F ? SoundEvents.ENTITY_WOLF_WHINE : SoundEvents.ENTITY_WOLF_PANT) : SoundEvents.ENTITY_WOLF_AMBIENT);
     }
 
-    protected SoundEvent func_184601_bQ()
+    protected SoundEvent getHurtSound()
     {
-        return SoundEvents.field_187863_gH;
+        return SoundEvents.ENTITY_WOLF_HURT;
     }
 
-    protected SoundEvent func_184615_bR()
+    protected SoundEvent getDeathSound()
     {
-        return SoundEvents.field_187859_gF;
+        return SoundEvents.ENTITY_WOLF_DEATH;
     }
 
-    protected float func_70599_aP()
+    protected float getSoundVolume()
     {
         return 0.4F;
     }
 
     @Nullable
-    protected ResourceLocation func_184647_J()
+    protected ResourceLocation getLootTable()
     {
-        return LootTableList.field_186401_I;
+        return LootTableList.ENTITIES_WOLF;
     }
 
-    public void func_70636_d()
+    public void onLivingUpdate()
     {
-        super.func_70636_d();
+        super.onLivingUpdate();
 
-        if (!this.field_70170_p.field_72995_K && this.field_70925_g && !this.field_70928_h && !this.func_70781_l() && this.field_70122_E)
+        if (!this.world.isRemote && this.isWet && !this.isShaking && !this.hasPath() && this.onGround)
         {
-            this.field_70928_h = true;
-            this.field_70929_i = 0.0F;
-            this.field_70927_j = 0.0F;
-            this.field_70170_p.func_72960_a(this, (byte)8);
+            this.isShaking = true;
+            this.timeWolfIsShaking = 0.0F;
+            this.prevTimeWolfIsShaking = 0.0F;
+            this.world.setEntityState(this, (byte)8);
         }
 
-        if (!this.field_70170_p.field_72995_K && this.func_70638_az() == null && this.func_70919_bu())
+        if (!this.world.isRemote && this.getAttackTarget() == null && this.isAngry())
         {
-            this.func_70916_h(false);
+            this.setAngry(false);
         }
     }
 
-    public void func_70071_h_()
+    public void onUpdate()
     {
-        super.func_70071_h_();
-        this.field_70924_f = this.field_70926_e;
+        super.onUpdate();
+        this.headRotationCourseOld = this.headRotationCourse;
 
-        if (this.func_70922_bv())
+        if (this.isBegging())
         {
-            this.field_70926_e += (1.0F - this.field_70926_e) * 0.4F;
+            this.headRotationCourse += (1.0F - this.headRotationCourse) * 0.4F;
         }
         else
         {
-            this.field_70926_e += (0.0F - this.field_70926_e) * 0.4F;
+            this.headRotationCourse += (0.0F - this.headRotationCourse) * 0.4F;
         }
 
-        if (this.func_70026_G())
+        if (this.isWet())
         {
-            this.field_70925_g = true;
-            this.field_70928_h = false;
-            this.field_70929_i = 0.0F;
-            this.field_70927_j = 0.0F;
+            this.isWet = true;
+            this.isShaking = false;
+            this.timeWolfIsShaking = 0.0F;
+            this.prevTimeWolfIsShaking = 0.0F;
         }
-        else if ((this.field_70925_g || this.field_70928_h) && this.field_70928_h)
+        else if ((this.isWet || this.isShaking) && this.isShaking)
         {
-            if (this.field_70929_i == 0.0F)
+            if (this.timeWolfIsShaking == 0.0F)
             {
-                this.func_184185_a(SoundEvents.field_187867_gJ, this.func_70599_aP(), (this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat()) * 0.2F + 1.0F);
+                this.playSound(SoundEvents.ENTITY_WOLF_SHAKE, this.getSoundVolume(), (this.rand.nextFloat() - this.rand.nextFloat()) * 0.2F + 1.0F);
             }
 
-            this.field_70927_j = this.field_70929_i;
-            this.field_70929_i += 0.05F;
+            this.prevTimeWolfIsShaking = this.timeWolfIsShaking;
+            this.timeWolfIsShaking += 0.05F;
 
-            if (this.field_70927_j >= 2.0F)
+            if (this.prevTimeWolfIsShaking >= 2.0F)
             {
-                this.field_70925_g = false;
-                this.field_70928_h = false;
-                this.field_70927_j = 0.0F;
-                this.field_70929_i = 0.0F;
+                this.isWet = false;
+                this.isShaking = false;
+                this.prevTimeWolfIsShaking = 0.0F;
+                this.timeWolfIsShaking = 0.0F;
             }
 
-            if (this.field_70929_i > 0.4F)
+            if (this.timeWolfIsShaking > 0.4F)
             {
-                float f = (float)this.func_174813_aQ().field_72338_b;
-                int i = (int)(MathHelper.func_76126_a((this.field_70929_i - 0.4F) * (float)Math.PI) * 7.0F);
+                float f = (float)this.getEntityBoundingBox().minY;
+                int i = (int)(MathHelper.sin((this.timeWolfIsShaking - 0.4F) * (float)Math.PI) * 7.0F);
 
                 for (int j = 0; j < i; ++j)
                 {
-                    float f1 = (this.field_70146_Z.nextFloat() * 2.0F - 1.0F) * this.field_70130_N * 0.5F;
-                    float f2 = (this.field_70146_Z.nextFloat() * 2.0F - 1.0F) * this.field_70130_N * 0.5F;
-                    this.field_70170_p.func_175688_a(EnumParticleTypes.WATER_SPLASH, this.field_70165_t + (double)f1, (double)(f + 0.8F), this.field_70161_v + (double)f2, this.field_70159_w, this.field_70181_x, this.field_70179_y, new int[0]);
+                    float f1 = (this.rand.nextFloat() * 2.0F - 1.0F) * this.width * 0.5F;
+                    float f2 = (this.rand.nextFloat() * 2.0F - 1.0F) * this.width * 0.5F;
+                    this.world.spawnParticle(EnumParticleTypes.WATER_SPLASH, this.posX + (double)f1, (double)(f + 0.8F), this.posZ + (double)f2, this.motionX, this.motionY, this.motionZ, new int[0]);
                 }
             }
         }
     }
 
     @SideOnly(Side.CLIENT)
-    public boolean func_70921_u()
+    public boolean isWolfWet()
     {
-        return this.field_70925_g;
+        return this.isWet;
     }
 
     @SideOnly(Side.CLIENT)
-    public float func_70915_j(float p_70915_1_)
+    public float getShadingWhileWet(float p_70915_1_)
     {
-        return 0.75F + (this.field_70927_j + (this.field_70929_i - this.field_70927_j) * p_70915_1_) / 2.0F * 0.25F;
+        return 0.75F + (this.prevTimeWolfIsShaking + (this.timeWolfIsShaking - this.prevTimeWolfIsShaking) * p_70915_1_) / 2.0F * 0.25F;
     }
 
     @SideOnly(Side.CLIENT)
-    public float func_70923_f(float p_70923_1_, float p_70923_2_)
+    public float getShakeAngle(float p_70923_1_, float p_70923_2_)
     {
-        float f = (this.field_70927_j + (this.field_70929_i - this.field_70927_j) * p_70923_1_ + p_70923_2_) / 1.8F;
+        float f = (this.prevTimeWolfIsShaking + (this.timeWolfIsShaking - this.prevTimeWolfIsShaking) * p_70923_1_ + p_70923_2_) / 1.8F;
 
         if (f < 0.0F)
         {
@@ -294,111 +310,111 @@
             f = 1.0F;
         }
 
-        return MathHelper.func_76126_a(f * (float)Math.PI) * MathHelper.func_76126_a(f * (float)Math.PI * 11.0F) * 0.15F * (float)Math.PI;
+        return MathHelper.sin(f * (float)Math.PI) * MathHelper.sin(f * (float)Math.PI * 11.0F) * 0.15F * (float)Math.PI;
     }
 
     @SideOnly(Side.CLIENT)
-    public float func_70917_k(float p_70917_1_)
+    public float getInterestedAngle(float p_70917_1_)
     {
-        return (this.field_70924_f + (this.field_70926_e - this.field_70924_f) * p_70917_1_) * 0.15F * (float)Math.PI;
+        return (this.headRotationCourseOld + (this.headRotationCourse - this.headRotationCourseOld) * p_70917_1_) * 0.15F * (float)Math.PI;
     }
 
-    public float func_70047_e()
+    public float getEyeHeight()
     {
-        return this.field_70131_O * 0.8F;
+        return this.height * 0.8F;
     }
 
-    public int func_70646_bf()
+    public int getVerticalFaceSpeed()
     {
-        return this.func_70906_o() ? 20 : super.func_70646_bf();
+        return this.isSitting() ? 20 : super.getVerticalFaceSpeed();
     }
 
-    public boolean func_70097_a(DamageSource p_70097_1_, float p_70097_2_)
+    public boolean attackEntityFrom(DamageSource source, float amount)
     {
-        if (this.func_180431_b(p_70097_1_))
+        if (this.isEntityInvulnerable(source))
         {
             return false;
         }
         else
         {
-            Entity entity = p_70097_1_.func_76346_g();
+            Entity entity = source.getEntity();
 
-            if (this.field_70911_d != null)
+            if (this.aiSit != null)
             {
-                this.field_70911_d.func_75270_a(false);
+                this.aiSit.setSitting(false);
             }
 
             if (entity != null && !(entity instanceof EntityPlayer) && !(entity instanceof EntityArrow))
             {
-                p_70097_2_ = (p_70097_2_ + 1.0F) / 2.0F;
+                amount = (amount + 1.0F) / 2.0F;
             }
 
-            return super.func_70097_a(p_70097_1_, p_70097_2_);
+            return super.attackEntityFrom(source, amount);
         }
     }
 
-    public boolean func_70652_k(Entity p_70652_1_)
+    public boolean attackEntityAsMob(Entity entityIn)
     {
-        boolean flag = p_70652_1_.func_70097_a(DamageSource.func_76358_a(this), (float)((int)this.func_110148_a(SharedMonsterAttributes.field_111264_e).func_111126_e()));
+        boolean flag = entityIn.attackEntityFrom(DamageSource.causeMobDamage(this), (float)((int)this.getEntityAttribute(SharedMonsterAttributes.ATTACK_DAMAGE).getAttributeValue()));
 
         if (flag)
         {
-            this.func_174815_a(this, p_70652_1_);
+            this.applyEnchantments(this, entityIn);
         }
 
         return flag;
     }
 
-    public void func_70903_f(boolean p_70903_1_)
+    public void setTamed(boolean tamed)
     {
-        super.func_70903_f(p_70903_1_);
+        super.setTamed(tamed);
 
-        if (p_70903_1_)
+        if (tamed)
         {
-            this.func_110148_a(SharedMonsterAttributes.field_111267_a).func_111128_a(20.0D);
+            this.getEntityAttribute(SharedMonsterAttributes.MAX_HEALTH).setBaseValue(20.0D);
         }
         else
         {
-            this.func_110148_a(SharedMonsterAttributes.field_111267_a).func_111128_a(8.0D);
+            this.getEntityAttribute(SharedMonsterAttributes.MAX_HEALTH).setBaseValue(8.0D);
         }
 
-        this.func_110148_a(SharedMonsterAttributes.field_111264_e).func_111128_a(4.0D);
+        this.getEntityAttribute(SharedMonsterAttributes.ATTACK_DAMAGE).setBaseValue(4.0D);
     }
 
-    public boolean func_184645_a(EntityPlayer p_184645_1_, EnumHand p_184645_2_)
+    public boolean processInteract(EntityPlayer player, EnumHand hand)
     {
-        ItemStack itemstack = p_184645_1_.func_184586_b(p_184645_2_);
+        ItemStack itemstack = player.getHeldItem(hand);
 
-        if (this.func_70909_n())
+        if (this.isTamed())
         {
-            if (!itemstack.func_190926_b())
+            if (!itemstack.isEmpty())
             {
-                if (itemstack.func_77973_b() instanceof ItemFood)
+                if (itemstack.getItem() instanceof ItemFood)
                 {
-                    ItemFood itemfood = (ItemFood)itemstack.func_77973_b();
+                    ItemFood itemfood = (ItemFood)itemstack.getItem();
 
-                    if (itemfood.func_77845_h() && ((Float)this.field_70180_af.func_187225_a(field_184759_bz)).floatValue() < 20.0F)
+                    if (itemfood.isWolfsFavoriteMeat() && ((Float)this.dataManager.get(DATA_HEALTH_ID)).floatValue() < 20.0F)
                     {
-                        if (!p_184645_1_.field_71075_bZ.field_75098_d)
+                        if (!player.capabilities.isCreativeMode)
                         {
-                            itemstack.func_190918_g(1);
+                            itemstack.shrink(1);
                         }
 
-                        this.func_70691_i((float)itemfood.func_150905_g(itemstack));
+                        this.heal((float)itemfood.getHealAmount(itemstack));
                         return true;
                     }
                 }
-                else if (itemstack.func_77973_b() == Items.field_151100_aR)
+                else if (itemstack.getItem() == Items.DYE)
                 {
-                    EnumDyeColor enumdyecolor = EnumDyeColor.func_176766_a(itemstack.func_77960_j());
+                    EnumDyeColor enumdyecolor = EnumDyeColor.byDyeDamage(itemstack.getMetadata());
 
-                    if (enumdyecolor != this.func_175546_cu())
+                    if (enumdyecolor != this.getCollarColor())
                     {
-                        this.func_175547_a(enumdyecolor);
+                        this.setCollarColor(enumdyecolor);
 
-                        if (!p_184645_1_.field_71075_bZ.field_75098_d)
+                        if (!player.capabilities.isCreativeMode)
                         {
-                            itemstack.func_190918_g(1);
+                            itemstack.shrink(1);
                         }
 
                         return true;
@@ -406,153 +422,153 @@
                 }
             }
 
-            if (this.func_152114_e(p_184645_1_) && !this.field_70170_p.field_72995_K && !this.func_70877_b(itemstack))
+            if (this.isOwner(player) && !this.world.isRemote && !this.isBreedingItem(itemstack))
             {
-                this.field_70911_d.func_75270_a(!this.func_70906_o());
-                this.field_70703_bu = false;
-                this.field_70699_by.func_75499_g();
-                this.func_70624_b((EntityLivingBase)null);
+                this.aiSit.setSitting(!this.isSitting());
+                this.isJumping = false;
+                this.navigator.clearPathEntity();
+                this.setGoalTarget((EntityLivingBase) null, EntityTargetEvent.TargetReason.FORGOT_TARGET, true); // CraftBukkit - reason
             }
         }
-        else if (itemstack.func_77973_b() == Items.field_151103_aS && !this.func_70919_bu())
+        else if (itemstack.getItem() == Items.BONE && !this.isAngry())
         {
-            if (!p_184645_1_.field_71075_bZ.field_75098_d)
+            if (!player.capabilities.isCreativeMode)
             {
-                itemstack.func_190918_g(1);
+                itemstack.shrink(1);
             }
 
-            if (!this.field_70170_p.field_72995_K)
+            if (!this.world.isRemote)
             {
-                if (this.field_70146_Z.nextInt(3) == 0)
+                if (this.rand.nextInt(3) == 0 && !net.minecraftforge.event.ForgeEventFactory.onAnimalTame(this, player))
                 {
-                    this.func_70903_f(true);
-                    this.field_70699_by.func_75499_g();
-                    this.func_70624_b((EntityLivingBase)null);
-                    this.field_70911_d.func_75270_a(true);
-                    this.func_70606_j(20.0F);
-                    this.func_184754_b(p_184645_1_.func_110124_au());
-                    this.func_70908_e(true);
-                    this.field_70170_p.func_72960_a(this, (byte)7);
+                    this.setTamed(true);
+                    this.navigator.clearPathEntity();
+                    this.setAttackTarget((EntityLivingBase)null);
+                    this.aiSit.setSitting(true);
+                    this.setHealth(20.0F);
+                    this.setOwnerId(player.getUniqueID());
+                    this.playTameEffect(true);
+                    this.world.setEntityState(this, (byte)7);
                 }
                 else
                 {
-                    this.func_70908_e(false);
-                    this.field_70170_p.func_72960_a(this, (byte)6);
+                    this.playTameEffect(false);
+                    this.world.setEntityState(this, (byte)6);
                 }
             }
 
             return true;
         }
 
-        return super.func_184645_a(p_184645_1_, p_184645_2_);
+        return super.processInteract(player, hand);
     }
 
     @SideOnly(Side.CLIENT)
-    public void func_70103_a(byte p_70103_1_)
+    public void handleStatusUpdate(byte id)
     {
-        if (p_70103_1_ == 8)
+        if (id == 8)
         {
-            this.field_70928_h = true;
-            this.field_70929_i = 0.0F;
-            this.field_70927_j = 0.0F;
+            this.isShaking = true;
+            this.timeWolfIsShaking = 0.0F;
+            this.prevTimeWolfIsShaking = 0.0F;
         }
         else
         {
-            super.func_70103_a(p_70103_1_);
+            super.handleStatusUpdate(id);
         }
     }
 
     @SideOnly(Side.CLIENT)
-    public float func_70920_v()
+    public float getTailRotation()
     {
-        return this.func_70919_bu() ? 1.5393804F : (this.func_70909_n() ? (0.55F - (this.func_110138_aP() - ((Float)this.field_70180_af.func_187225_a(field_184759_bz)).floatValue()) * 0.02F) * (float)Math.PI : ((float)Math.PI / 5F));
+        return this.isAngry() ? 1.5393804F : (this.isTamed() ? (0.55F - (this.getMaxHealth() - ((Float)this.dataManager.get(DATA_HEALTH_ID)).floatValue()) * 0.02F) * (float)Math.PI : ((float)Math.PI / 5F));
     }
 
-    public boolean func_70877_b(ItemStack p_70877_1_)
+    public boolean isBreedingItem(ItemStack stack)
     {
-        return p_70877_1_.func_77973_b() instanceof ItemFood && ((ItemFood)p_70877_1_.func_77973_b()).func_77845_h();
+        return stack.getItem() instanceof ItemFood && ((ItemFood)stack.getItem()).isWolfsFavoriteMeat();
     }
 
-    public int func_70641_bl()
+    public int getMaxSpawnedInChunk()
     {
         return 8;
     }
 
-    public boolean func_70919_bu()
+    public boolean isAngry()
     {
-        return (((Byte)this.field_70180_af.func_187225_a(field_184755_bv)).byteValue() & 2) != 0;
+        return (((Byte)this.dataManager.get(TAMED)).byteValue() & 2) != 0;
     }
 
-    public void func_70916_h(boolean p_70916_1_)
+    public void setAngry(boolean angry)
     {
-        byte b0 = ((Byte)this.field_70180_af.func_187225_a(field_184755_bv)).byteValue();
+        byte b0 = ((Byte)this.dataManager.get(TAMED)).byteValue();
 
-        if (p_70916_1_)
+        if (angry)
         {
-            this.field_70180_af.func_187227_b(field_184755_bv, Byte.valueOf((byte)(b0 | 2)));
+            this.dataManager.set(TAMED, Byte.valueOf((byte)(b0 | 2)));
         }
         else
         {
-            this.field_70180_af.func_187227_b(field_184755_bv, Byte.valueOf((byte)(b0 & -3)));
+            this.dataManager.set(TAMED, Byte.valueOf((byte)(b0 & -3)));
         }
     }
 
-    public EnumDyeColor func_175546_cu()
+    public EnumDyeColor getCollarColor()
     {
-        return EnumDyeColor.func_176766_a(((Integer)this.field_70180_af.func_187225_a(field_184758_bB)).intValue() & 15);
+        return EnumDyeColor.byDyeDamage(((Integer)this.dataManager.get(COLLAR_COLOR)).intValue() & 15);
     }
 
-    public void func_175547_a(EnumDyeColor p_175547_1_)
+    public void setCollarColor(EnumDyeColor collarcolor)
     {
-        this.field_70180_af.func_187227_b(field_184758_bB, Integer.valueOf(p_175547_1_.func_176767_b()));
+        this.dataManager.set(COLLAR_COLOR, Integer.valueOf(collarcolor.getDyeDamage()));
     }
 
-    public EntityWolf func_90011_a(EntityAgeable p_90011_1_)
+    public EntityWolf createChild(EntityAgeable ageable)
     {
-        EntityWolf entitywolf = new EntityWolf(this.field_70170_p);
-        UUID uuid = this.func_184753_b();
+        EntityWolf entitywolf = new EntityWolf(this.world);
+        UUID uuid = this.getOwnerId();
 
         if (uuid != null)
         {
-            entitywolf.func_184754_b(uuid);
-            entitywolf.func_70903_f(true);
+            entitywolf.setOwnerId(uuid);
+            entitywolf.setTamed(true);
         }
 
         return entitywolf;
     }
 
-    public void func_70918_i(boolean p_70918_1_)
+    public void setBegging(boolean beg)
     {
-        this.field_70180_af.func_187227_b(field_184760_bA, Boolean.valueOf(p_70918_1_));
+        this.dataManager.set(BEGGING, Boolean.valueOf(beg));
     }
 
-    public boolean func_70878_b(EntityAnimal p_70878_1_)
+    public boolean canMateWith(EntityAnimal otherAnimal)
     {
-        if (p_70878_1_ == this)
+        if (otherAnimal == this)
         {
             return false;
         }
-        else if (!this.func_70909_n())
+        else if (!this.isTamed())
         {
             return false;
         }
-        else if (!(p_70878_1_ instanceof EntityWolf))
+        else if (!(otherAnimal instanceof EntityWolf))
         {
             return false;
         }
         else
         {
-            EntityWolf entitywolf = (EntityWolf)p_70878_1_;
-            return !entitywolf.func_70909_n() ? false : (entitywolf.func_70906_o() ? false : this.func_70880_s() && entitywolf.func_70880_s());
+            EntityWolf entitywolf = (EntityWolf)otherAnimal;
+            return !entitywolf.isTamed() ? false : (entitywolf.isSitting() ? false : this.isInLove() && entitywolf.isInLove());
         }
     }
 
-    public boolean func_70922_bv()
+    public boolean isBegging()
     {
-        return ((Boolean)this.field_70180_af.func_187225_a(field_184760_bA)).booleanValue();
+        return ((Boolean)this.dataManager.get(BEGGING)).booleanValue();
     }
 
-    public boolean func_142018_a(EntityLivingBase p_142018_1_, EntityLivingBase p_142018_2_)
+    public boolean shouldAttackEntity(EntityLivingBase p_142018_1_, EntityLivingBase p_142018_2_)
     {
         if (!(p_142018_1_ instanceof EntityCreeper) && !(p_142018_1_ instanceof EntityGhast))
         {
@@ -560,13 +576,13 @@
             {
                 EntityWolf entitywolf = (EntityWolf)p_142018_1_;
 
-                if (entitywolf.func_70909_n() && entitywolf.func_70902_q() == p_142018_2_)
+                if (entitywolf.isTamed() && entitywolf.getOwner() == p_142018_2_)
                 {
                     return false;
                 }
             }
 
-            return p_142018_1_ instanceof EntityPlayer && p_142018_2_ instanceof EntityPlayer && !((EntityPlayer)p_142018_2_).func_96122_a((EntityPlayer)p_142018_1_) ? false : !(p_142018_1_ instanceof AbstractHorse) || !((AbstractHorse)p_142018_1_).func_110248_bS();
+            return p_142018_1_ instanceof EntityPlayer && p_142018_2_ instanceof EntityPlayer && !((EntityPlayer)p_142018_2_).canAttackPlayer((EntityPlayer)p_142018_1_) ? false : !(p_142018_1_ instanceof AbstractHorse) || !((AbstractHorse)p_142018_1_).isTame();
         }
         else
         {
@@ -574,41 +590,41 @@
         }
     }
 
-    public boolean func_184652_a(EntityPlayer p_184652_1_)
+    public boolean canBeLeashedTo(EntityPlayer player)
     {
-        return !this.func_70919_bu() && super.func_184652_a(p_184652_1_);
+        return !this.isAngry() && super.canBeLeashedTo(player);
     }
 
     class AIAvoidEntity<T extends Entity> extends EntityAIAvoidEntity<T>
     {
-        private final EntityWolf field_190856_d;
+        private final EntityWolf wolf;
 
-        public AIAvoidEntity(EntityWolf p_i47251_2_, Class<T> p_i47251_3_, float p_i47251_4_, double p_i47251_5_, double p_i47251_7_)
+        public AIAvoidEntity(EntityWolf wolfIn, Class<T> p_i47251_3_, float p_i47251_4_, double p_i47251_5_, double p_i47251_7_)
         {
-            super(p_i47251_2_, p_i47251_3_, p_i47251_4_, p_i47251_5_, p_i47251_7_);
-            this.field_190856_d = p_i47251_2_;
+            super(wolfIn, p_i47251_3_, p_i47251_4_, p_i47251_5_, p_i47251_7_);
+            this.wolf = wolfIn;
         }
 
-        public boolean func_75250_a()
+        public boolean shouldExecute()
         {
-            return super.func_75250_a() && this.field_75376_d instanceof EntityLlama ? !this.field_190856_d.func_70909_n() && this.func_190854_a((EntityLlama)this.field_75376_d) : false;
+            return super.shouldExecute() && this.closestLivingEntity instanceof EntityLlama ? !this.wolf.isTamed() && this.avoidLlama((EntityLlama)this.closestLivingEntity) : false;
         }
 
-        private boolean func_190854_a(EntityLlama p_190854_1_)
+        private boolean avoidLlama(EntityLlama p_190854_1_)
         {
-            return p_190854_1_.func_190707_dL() >= EntityWolf.this.field_70146_Z.nextInt(5);
+            return p_190854_1_.getStrength() >= EntityWolf.this.rand.nextInt(5);
         }
 
-        public void func_75249_e()
+        public void startExecuting()
         {
-            EntityWolf.this.func_70624_b((EntityLivingBase)null);
-            super.func_75249_e();
+            EntityWolf.this.setAttackTarget((EntityLivingBase)null);
+            super.startExecuting();
         }
 
-        public void func_75246_d()
+        public void updateTask()
         {
-            EntityWolf.this.func_70624_b((EntityLivingBase)null);
-            super.func_75246_d();
+            EntityWolf.this.setAttackTarget((EntityLivingBase)null);
+            super.updateTask();
         }
     }
 }
