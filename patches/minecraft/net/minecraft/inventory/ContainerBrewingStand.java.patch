--- ../src-base/minecraft/net/minecraft/inventory/ContainerBrewingStand.java
+++ ../src-work/minecraft/net/minecraft/inventory/ContainerBrewingStand.java
@@ -12,154 +12,174 @@
 import net.minecraft.stats.AchievementList;
 import net.minecraftforge.fml.relauncher.Side;
 import net.minecraftforge.fml.relauncher.SideOnly;
+import org.bukkit.craftbukkit.inventory.CraftInventoryBrewer;
+import org.bukkit.craftbukkit.inventory.CraftInventoryView;
 
 public class ContainerBrewingStand extends Container
 {
-    private final IInventory field_75188_e;
-    private final Slot field_75186_f;
-    private int field_184998_g;
-    private int field_184999_h;
+    private final IInventory tileBrewingStand;
+    private final Slot theSlot;
+    private int prevBrewTime;
+    private int prevFuel;
 
-    public ContainerBrewingStand(InventoryPlayer p_i45802_1_, IInventory p_i45802_2_)
+    // CraftBukkit start
+    private CraftInventoryView bukkitEntity = null;
+    private InventoryPlayer player;
+    // CraftBukkit end
+    // CraftBukkit start
+    @Override
+    public CraftInventoryView getBukkitView() {
+        if (bukkitEntity != null) {
+            return bukkitEntity;
+        }
+
+        CraftInventoryBrewer inventory = new CraftInventoryBrewer(this.tileBrewingStand);
+        bukkitEntity = new CraftInventoryView(this.player.player.getBukkitEntity(), inventory, this);
+        return bukkitEntity;
+    }
+    // CraftBukkit end
+    public ContainerBrewingStand(InventoryPlayer playerInventory, IInventory tileBrewingStandIn)
     {
-        this.field_75188_e = p_i45802_2_;
-        this.func_75146_a(new ContainerBrewingStand.Potion(p_i45802_1_.field_70458_d, p_i45802_2_, 0, 56, 51));
-        this.func_75146_a(new ContainerBrewingStand.Potion(p_i45802_1_.field_70458_d, p_i45802_2_, 1, 79, 58));
-        this.func_75146_a(new ContainerBrewingStand.Potion(p_i45802_1_.field_70458_d, p_i45802_2_, 2, 102, 51));
-        this.field_75186_f = this.func_75146_a(new ContainerBrewingStand.Ingredient(p_i45802_2_, 3, 79, 17));
-        this.func_75146_a(new ContainerBrewingStand.Fuel(p_i45802_2_, 4, 17, 17));
+        this.tileBrewingStand = tileBrewingStandIn;
+        this.addSlotToContainer(new ContainerBrewingStand.Potion(playerInventory.player, tileBrewingStandIn, 0, 56, 51));
+        this.addSlotToContainer(new ContainerBrewingStand.Potion(playerInventory.player, tileBrewingStandIn, 1, 79, 58));
+        this.addSlotToContainer(new ContainerBrewingStand.Potion(playerInventory.player, tileBrewingStandIn, 2, 102, 51));
+        this.theSlot = this.addSlotToContainer(new ContainerBrewingStand.Ingredient(tileBrewingStandIn, 3, 79, 17));
+        this.addSlotToContainer(new ContainerBrewingStand.Fuel(tileBrewingStandIn, 4, 17, 17));
 
         for (int i = 0; i < 3; ++i)
         {
             for (int j = 0; j < 9; ++j)
             {
-                this.func_75146_a(new Slot(p_i45802_1_, j + i * 9 + 9, 8 + j * 18, 84 + i * 18));
+                this.addSlotToContainer(new Slot(playerInventory, j + i * 9 + 9, 8 + j * 18, 84 + i * 18));
             }
         }
 
         for (int k = 0; k < 9; ++k)
         {
-            this.func_75146_a(new Slot(p_i45802_1_, k, 8 + k * 18, 142));
+            this.addSlotToContainer(new Slot(playerInventory, k, 8 + k * 18, 142));
         }
     }
 
-    public void func_75132_a(IContainerListener p_75132_1_)
+    public void addListener(IContainerListener listener)
     {
-        super.func_75132_a(p_75132_1_);
-        p_75132_1_.func_175173_a(this, this.field_75188_e);
+        super.addListener(listener);
+        listener.sendAllWindowProperties(this, this.tileBrewingStand);
     }
 
-    public void func_75142_b()
+    public void detectAndSendChanges()
     {
-        super.func_75142_b();
+        super.detectAndSendChanges();
 
-        for (int i = 0; i < this.field_75149_d.size(); ++i)
+        for (int i = 0; i < this.listeners.size(); ++i)
         {
-            IContainerListener icontainerlistener = (IContainerListener)this.field_75149_d.get(i);
+            IContainerListener icontainerlistener = (IContainerListener)this.listeners.get(i);
 
-            if (this.field_184998_g != this.field_75188_e.func_174887_a_(0))
+            if (this.prevBrewTime != this.tileBrewingStand.getField(0))
             {
-                icontainerlistener.func_71112_a(this, 0, this.field_75188_e.func_174887_a_(0));
+                icontainerlistener.sendProgressBarUpdate(this, 0, this.tileBrewingStand.getField(0));
             }
 
-            if (this.field_184999_h != this.field_75188_e.func_174887_a_(1))
+            if (this.prevFuel != this.tileBrewingStand.getField(1))
             {
-                icontainerlistener.func_71112_a(this, 1, this.field_75188_e.func_174887_a_(1));
+                icontainerlistener.sendProgressBarUpdate(this, 1, this.tileBrewingStand.getField(1));
             }
         }
 
-        this.field_184998_g = this.field_75188_e.func_174887_a_(0);
-        this.field_184999_h = this.field_75188_e.func_174887_a_(1);
+        this.prevBrewTime = this.tileBrewingStand.getField(0);
+        this.prevFuel = this.tileBrewingStand.getField(1);
     }
 
     @SideOnly(Side.CLIENT)
-    public void func_75137_b(int p_75137_1_, int p_75137_2_)
+    public void updateProgressBar(int id, int data)
     {
-        this.field_75188_e.func_174885_b(p_75137_1_, p_75137_2_);
+        this.tileBrewingStand.setField(id, data);
     }
 
-    public boolean func_75145_c(EntityPlayer p_75145_1_)
+    public boolean canInteractWith(EntityPlayer playerIn)
     {
-        return this.field_75188_e.func_70300_a(p_75145_1_);
+
+        if (!this.checkReachable) return true; // CraftBukkit
+        return this.tileBrewingStand.isUsableByPlayer(playerIn);
     }
 
-    public ItemStack func_82846_b(EntityPlayer p_82846_1_, int p_82846_2_)
+    public ItemStack transferStackInSlot(EntityPlayer playerIn, int index)
     {
-        ItemStack itemstack = ItemStack.field_190927_a;
-        Slot slot = (Slot)this.field_75151_b.get(p_82846_2_);
+        ItemStack itemstack = ItemStack.EMPTY;
+        Slot slot = (Slot)this.inventorySlots.get(index);
 
-        if (slot != null && slot.func_75216_d())
+        if (slot != null && slot.getHasStack())
         {
-            ItemStack itemstack1 = slot.func_75211_c();
-            itemstack = itemstack1.func_77946_l();
+            ItemStack itemstack1 = slot.getStack();
+            itemstack = itemstack1.copy();
 
-            if ((p_82846_2_ < 0 || p_82846_2_ > 2) && p_82846_2_ != 3 && p_82846_2_ != 4)
+            if ((index < 0 || index > 2) && index != 3 && index != 4)
             {
-                if (this.field_75186_f.func_75214_a(itemstack1))
+                if (this.theSlot.isItemValid(itemstack1))
                 {
-                    if (!this.func_75135_a(itemstack1, 3, 4, false))
+                    if (!this.mergeItemStack(itemstack1, 3, 4, false))
                     {
-                        return ItemStack.field_190927_a;
+                        return ItemStack.EMPTY;
                     }
                 }
-                else if (ContainerBrewingStand.Potion.func_75243_a_(itemstack) && itemstack.func_190916_E() == 1)
+                else if (ContainerBrewingStand.Potion.canHoldPotion(itemstack) && itemstack.getCount() == 1)
                 {
-                    if (!this.func_75135_a(itemstack1, 0, 3, false))
+                    if (!this.mergeItemStack(itemstack1, 0, 3, false))
                     {
-                        return ItemStack.field_190927_a;
+                        return ItemStack.EMPTY;
                     }
                 }
-                else if (ContainerBrewingStand.Fuel.func_185004_b_(itemstack))
+                else if (ContainerBrewingStand.Fuel.isValidBrewingFuel(itemstack))
                 {
-                    if (!this.func_75135_a(itemstack1, 4, 5, false))
+                    if (!this.mergeItemStack(itemstack1, 4, 5, false))
                     {
-                        return ItemStack.field_190927_a;
+                        return ItemStack.EMPTY;
                     }
                 }
-                else if (p_82846_2_ >= 5 && p_82846_2_ < 32)
+                else if (index >= 5 && index < 32)
                 {
-                    if (!this.func_75135_a(itemstack1, 32, 41, false))
+                    if (!this.mergeItemStack(itemstack1, 32, 41, false))
                     {
-                        return ItemStack.field_190927_a;
+                        return ItemStack.EMPTY;
                     }
                 }
-                else if (p_82846_2_ >= 32 && p_82846_2_ < 41)
+                else if (index >= 32 && index < 41)
                 {
-                    if (!this.func_75135_a(itemstack1, 5, 32, false))
+                    if (!this.mergeItemStack(itemstack1, 5, 32, false))
                     {
-                        return ItemStack.field_190927_a;
+                        return ItemStack.EMPTY;
                     }
                 }
-                else if (!this.func_75135_a(itemstack1, 5, 41, false))
+                else if (!this.mergeItemStack(itemstack1, 5, 41, false))
                 {
-                    return ItemStack.field_190927_a;
+                    return ItemStack.EMPTY;
                 }
             }
             else
             {
-                if (!this.func_75135_a(itemstack1, 5, 41, true))
+                if (!this.mergeItemStack(itemstack1, 5, 41, true))
                 {
-                    return ItemStack.field_190927_a;
+                    return ItemStack.EMPTY;
                 }
 
-                slot.func_75220_a(itemstack1, itemstack);
+                slot.onSlotChange(itemstack1, itemstack);
             }
 
-            if (itemstack1.func_190926_b())
+            if (itemstack1.isEmpty())
             {
-                slot.func_75215_d(ItemStack.field_190927_a);
+                slot.putStack(ItemStack.EMPTY);
             }
             else
             {
-                slot.func_75218_e();
+                slot.onSlotChanged();
             }
 
-            if (itemstack1.func_190916_E() == itemstack.func_190916_E())
+            if (itemstack1.getCount() == itemstack.getCount())
             {
-                return ItemStack.field_190927_a;
+                return ItemStack.EMPTY;
             }
 
-            slot.func_190901_a(p_82846_1_, itemstack1);
+            slot.onTake(playerIn, itemstack1);
         }
 
         return itemstack;
@@ -167,22 +187,22 @@
 
     static class Fuel extends Slot
         {
-            public Fuel(IInventory p_i47070_1_, int p_i47070_2_, int p_i47070_3_, int p_i47070_4_)
+            public Fuel(IInventory iInventoryIn, int index, int xPosition, int yPosition)
             {
-                super(p_i47070_1_, p_i47070_2_, p_i47070_3_, p_i47070_4_);
+                super(iInventoryIn, index, xPosition, yPosition);
             }
 
-            public boolean func_75214_a(ItemStack p_75214_1_)
+            public boolean isItemValid(ItemStack stack)
             {
-                return func_185004_b_(p_75214_1_);
+                return isValidBrewingFuel(stack);
             }
 
-            public static boolean func_185004_b_(ItemStack p_185004_0_)
+            public static boolean isValidBrewingFuel(ItemStack itemStackIn)
             {
-                return p_185004_0_.func_77973_b() == Items.field_151065_br;
+                return itemStackIn.getItem() == Items.BLAZE_POWDER;
             }
 
-            public int func_75219_a()
+            public int getSlotStackLimit()
             {
                 return 64;
             }
@@ -190,17 +210,17 @@
 
     static class Ingredient extends Slot
         {
-            public Ingredient(IInventory p_i47069_1_, int p_i47069_2_, int p_i47069_3_, int p_i47069_4_)
+            public Ingredient(IInventory iInventoryIn, int index, int xPosition, int yPosition)
             {
-                super(p_i47069_1_, p_i47069_2_, p_i47069_3_, p_i47069_4_);
+                super(iInventoryIn, index, xPosition, yPosition);
             }
 
-            public boolean func_75214_a(ItemStack p_75214_1_)
+            public boolean isItemValid(ItemStack stack)
             {
-                return PotionHelper.func_185205_a(p_75214_1_);
+                return net.minecraftforge.common.brewing.BrewingRecipeRegistry.isValidIngredient(stack);
             }
 
-            public int func_75219_a()
+            public int getSlotStackLimit()
             {
                 return 64;
             }
@@ -208,41 +228,41 @@
 
     static class Potion extends Slot
         {
-            private final EntityPlayer field_75244_a;
+            private final EntityPlayer player;
 
-            public Potion(EntityPlayer p_i1804_1_, IInventory p_i1804_2_, int p_i1804_3_, int p_i1804_4_, int p_i1804_5_)
+            public Potion(EntityPlayer playerIn, IInventory inventoryIn, int index, int xPosition, int yPosition)
             {
-                super(p_i1804_2_, p_i1804_3_, p_i1804_4_, p_i1804_5_);
-                this.field_75244_a = p_i1804_1_;
+                super(inventoryIn, index, xPosition, yPosition);
+                this.player = playerIn;
             }
 
-            public boolean func_75214_a(ItemStack p_75214_1_)
+            public boolean isItemValid(ItemStack stack)
             {
-                return func_75243_a_(p_75214_1_);
+                return canHoldPotion(stack);
             }
 
-            public int func_75219_a()
+            public int getSlotStackLimit()
             {
                 return 1;
             }
 
-            public ItemStack func_190901_a(EntityPlayer p_190901_1_, ItemStack p_190901_2_)
+            public ItemStack onTake(EntityPlayer thePlayer, ItemStack stack)
             {
-                PotionType potiontype = PotionUtils.func_185191_c(p_190901_2_);
+                PotionType potiontype = PotionUtils.getPotionFromItem(stack);
 
-                if (potiontype != PotionTypes.field_185230_b && potiontype != PotionTypes.field_185229_a)
+                if (potiontype != PotionTypes.WATER && potiontype != PotionTypes.EMPTY)
                 {
-                    this.field_75244_a.func_71029_a(AchievementList.field_187970_B);
+                    net.minecraftforge.event.ForgeEventFactory.onPlayerBrewedPotion(thePlayer, stack);
+                    this.player.addStat(AchievementList.POTION);
                 }
 
-                super.func_190901_a(p_190901_1_, p_190901_2_);
-                return p_190901_2_;
+                super.onTake(thePlayer, stack);
+                return stack;
             }
 
-            public static boolean func_75243_a_(ItemStack p_75243_0_)
+            public static boolean canHoldPotion(ItemStack stack)
             {
-                Item item = p_75243_0_.func_77973_b();
-                return item == Items.field_151068_bn || item == Items.field_185155_bH || item == Items.field_185156_bI || item == Items.field_151069_bo;
+                return net.minecraftforge.common.brewing.BrewingRecipeRegistry.isValidInput(stack);
             }
         }
 }
