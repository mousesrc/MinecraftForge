--- ../src-base/minecraft/net/minecraft/tileentity/TileEntityBeacon.java
+++ ../src-work/minecraft/net/minecraft/tileentity/TileEntityBeacon.java
@@ -2,10 +2,8 @@
 
 import com.google.common.collect.Lists;
 import com.google.common.collect.Sets;
-import java.util.Arrays;
-import java.util.Collections;
-import java.util.List;
-import java.util.Set;
+
+import java.util.*;
 import javax.annotation.Nullable;
 import net.minecraft.block.Block;
 import net.minecraft.block.BlockStainedGlass;
@@ -33,138 +31,218 @@
 import net.minecraft.util.math.BlockPos;
 import net.minecraftforge.fml.relauncher.Side;
 import net.minecraftforge.fml.relauncher.SideOnly;
+import org.bukkit.craftbukkit.entity.CraftHumanEntity;
+import org.bukkit.craftbukkit.potion.CraftPotionUtil;
+import org.bukkit.entity.HumanEntity;
 
 public class TileEntityBeacon extends TileEntityLockable implements ITickable, ISidedInventory
 {
-    public static final Potion[][] field_146009_a = new Potion[][] {{MobEffects.field_76424_c, MobEffects.field_76422_e}, {MobEffects.field_76429_m, MobEffects.field_76430_j}, {MobEffects.field_76420_g}, {MobEffects.field_76428_l}};
-    private static final Set<Potion> field_184280_f = Sets.<Potion>newHashSet();
-    private final List<TileEntityBeacon.BeamSegment> field_174909_f = Lists.<TileEntityBeacon.BeamSegment>newArrayList();
+    public static final Potion[][] EFFECTS_LIST = new Potion[][] {{MobEffects.SPEED, MobEffects.HASTE}, {MobEffects.RESISTANCE, MobEffects.JUMP_BOOST}, {MobEffects.STRENGTH}, {MobEffects.REGENERATION}};
+    private static final Set<Potion> VALID_EFFECTS = Sets.<Potion>newHashSet();
+    private final List<TileEntityBeacon.BeamSegment> beamSegments = Lists.<TileEntityBeacon.BeamSegment>newArrayList();
     @SideOnly(Side.CLIENT)
-    private long field_146016_i;
+    private long beamRenderCounter;
     @SideOnly(Side.CLIENT)
-    private float field_146014_j;
-    private boolean field_146015_k;
-    public int field_146012_l = -1;
+    private float beamRenderScale;
+    private boolean isComplete;
+    public int levels = -1;
     @Nullable
-    public Potion field_146013_m;
+    public Potion primaryEffect;
     @Nullable
-    public Potion field_146010_n;
-    private ItemStack field_146011_o = ItemStack.field_190927_a;
-    private String field_146008_p;
+    public Potion secondaryEffect;
+    private ItemStack payment = ItemStack.EMPTY;
+    private String customName;
+    // CraftBukkit start - add fields and methods
+    public List<HumanEntity> transaction = new java.util.ArrayList<HumanEntity>();
+    private int maxStack = 64;
 
-    public void func_73660_a()
+    public List<ItemStack> getContents() {
+        return Arrays.asList(this.payment);
+    }
+
+    public void onOpen(CraftHumanEntity who) {
+        transaction.add(who);
+    }
+
+    public void onClose(CraftHumanEntity who) {
+        transaction.remove(who);
+    }
+
+    public List<HumanEntity> getViewers() {
+        return transaction;
+    }
+
+    public void setMaxStackSize(int size) {
+        maxStack = size;
+    }
+
+    public org.bukkit.potion.PotionEffect getPrimaryEffect() {
+        return (this.primaryEffect != null) ? CraftPotionUtil.toBukkit(new PotionEffect(this.primaryEffect, getLevel(), getAmplification(), true, true)) : null;
+    }
+
+    public org.bukkit.potion.PotionEffect getSecondaryEffect() {
+        return (hasSecondaryEffect()) ? CraftPotionUtil.toBukkit(new PotionEffect(this.secondaryEffect, getLevel(), getAmplification(), true, true)) : null;
+    }
+    // CraftBukkit end
+    public void update()
     {
-        if (this.field_145850_b.func_82737_E() % 80L == 0L)
+        if (this.world.getTotalWorldTime() % 80L == 0L)
         {
-            this.func_174908_m();
+            this.updateBeacon();
         }
     }
 
-    public void func_174908_m()
+    public void updateBeacon()
     {
-        if (this.field_145850_b != null)
+        if (this.world != null)
         {
-            this.func_146003_y();
-            this.func_146000_x();
+            this.updateSegmentColors();
+            this.addEffectsToPlayers();
         }
     }
 
-    private void func_146000_x()
-    {
-        if (this.field_146015_k && this.field_146012_l > 0 && !this.field_145850_b.field_72995_K && this.field_146013_m != null)
+    // CraftBukkit start - split into components
+    private byte getAmplification() {
         {
-            double d0 = (double)(this.field_146012_l * 10 + 10);
-            int i = 0;
+            byte b0 = 0;
 
-            if (this.field_146012_l >= 4 && this.field_146013_m == this.field_146010_n)
-            {
-                i = 1;
+            if (this.levels >= 4 && this.primaryEffect == this.secondaryEffect) {
+                b0 = 1;
             }
 
-            int j = (9 + this.field_146012_l * 2) * 20;
-            int k = this.field_174879_c.func_177958_n();
-            int l = this.field_174879_c.func_177956_o();
-            int i1 = this.field_174879_c.func_177952_p();
-            AxisAlignedBB axisalignedbb = (new AxisAlignedBB((double)k, (double)l, (double)i1, (double)(k + 1), (double)(l + 1), (double)(i1 + 1))).func_186662_g(d0).func_72321_a(0.0D, (double)this.field_145850_b.func_72800_K(), 0.0D);
-            List<EntityPlayer> list = this.field_145850_b.<EntityPlayer>func_72872_a(EntityPlayer.class, axisalignedbb);
+            return b0;
+        }
+    }
 
-            for (EntityPlayer entityplayer : list)
-            {
-                entityplayer.func_70690_d(new PotionEffect(this.field_146013_m, j, i, true, true));
+    private int getLevel() {
+        {
+            int i = (9 + this.levels * 2) * 20;
+            return i;
+        }
+    }
+
+    public List getHumansInRange() {
+        {
+            double d0 = (double) (this.levels * 10 + 10);
+
+            int j = this.pos.getX();
+            int k = this.pos.getY();
+            int l = this.pos.getZ();
+            AxisAlignedBB axisalignedbb = (new AxisAlignedBB((double) j, (double) k, (double) l, (double) (j + 1), (double) (k + 1), (double) (l + 1))).expandXyz(d0).addCoord(0.0D, (double) this.world.getHeight(), 0.0D);
+            List list = this.world.getEntitiesWithinAABB(EntityPlayer.class, axisalignedbb);
+
+            return list;
+        }
+    }
+
+    private void applyEffect(List list, Potion effects, int i, int b0) {
+        {
+            Iterator iterator = list.iterator();
+
+            EntityPlayer entityhuman;
+
+            while (iterator.hasNext()) {
+                entityhuman = (EntityPlayer) iterator.next();
+                entityhuman.addPotionEffect(new PotionEffect(effects, i, b0, true, true));
             }
+        }
+    }
 
-            if (this.field_146012_l >= 4 && this.field_146013_m != this.field_146010_n && this.field_146010_n != null)
-            {
-                for (EntityPlayer entityplayer1 : list)
-                {
-                    entityplayer1.func_70690_d(new PotionEffect(this.field_146010_n, j, 0, true, true));
-                }
+    private boolean hasSecondaryEffect() {
+        {
+            if (this.levels >= 4 && this.primaryEffect != this.secondaryEffect && this.secondaryEffect != null) {
+                return true;
             }
+
+            return false;
         }
     }
 
-    private void func_146003_y()
+    private void addEffectsToPlayers() {
+        if (this.isComplete && this.levels > 0 && !this.world.isRemote && this.primaryEffect != null) {
+            byte b0 = getAmplification();
+
+            int i = getLevel();
+            List list = getHumansInRange();
+
+            applyEffect(list, this.primaryEffect, i, b0);
+
+            if (hasSecondaryEffect()) {
+                applyEffect(list, this.secondaryEffect, i, 0);
+            }
+        }
+
+    }
+    // CraftBukkit end
+
+    private void updateSegmentColors()
     {
-        int i = this.field_146012_l;
-        int j = this.field_174879_c.func_177958_n();
-        int k = this.field_174879_c.func_177956_o();
-        int l = this.field_174879_c.func_177952_p();
-        this.field_146012_l = 0;
-        this.field_174909_f.clear();
-        this.field_146015_k = true;
-        TileEntityBeacon.BeamSegment tileentitybeacon$beamsegment = new TileEntityBeacon.BeamSegment(EntitySheep.func_175513_a(EnumDyeColor.WHITE));
-        this.field_174909_f.add(tileentitybeacon$beamsegment);
+        int i = this.levels;
+        int j = this.pos.getX();
+        int k = this.pos.getY();
+        int l = this.pos.getZ();
+        this.levels = 0;
+        this.beamSegments.clear();
+        this.isComplete = true;
+        TileEntityBeacon.BeamSegment tileentitybeacon$beamsegment = new TileEntityBeacon.BeamSegment(EntitySheep.getDyeRgb(EnumDyeColor.WHITE));
+        this.beamSegments.add(tileentitybeacon$beamsegment);
         boolean flag = true;
         BlockPos.MutableBlockPos blockpos$mutableblockpos = new BlockPos.MutableBlockPos();
 
         for (int i1 = k + 1; i1 < 256; ++i1)
         {
-            IBlockState iblockstate = this.field_145850_b.func_180495_p(blockpos$mutableblockpos.func_181079_c(j, i1, l));
+            IBlockState iblockstate = this.world.getBlockState(blockpos$mutableblockpos.setPos(j, i1, l));
             float[] afloat;
 
-            if (iblockstate.func_177230_c() == Blocks.field_150399_cn)
+            if (iblockstate.getBlock() == Blocks.STAINED_GLASS)
             {
-                afloat = EntitySheep.func_175513_a((EnumDyeColor)iblockstate.func_177229_b(BlockStainedGlass.field_176547_a));
+                afloat = EntitySheep.getDyeRgb((EnumDyeColor)iblockstate.getValue(BlockStainedGlass.COLOR));
             }
             else
             {
-                if (iblockstate.func_177230_c() != Blocks.field_150397_co)
+                if (iblockstate.getBlock() != Blocks.STAINED_GLASS_PANE)
                 {
-                    if (iblockstate.func_185891_c() >= 15 && iblockstate.func_177230_c() != Blocks.field_150357_h)
+                    if (iblockstate.getLightOpacity(this.world, blockpos$mutableblockpos) >= 15 && iblockstate.getBlock() != Blocks.BEDROCK)
                     {
-                        this.field_146015_k = false;
-                        this.field_174909_f.clear();
+                        this.isComplete = false;
+                        this.beamSegments.clear();
                         break;
                     }
 
-                    tileentitybeacon$beamsegment.func_177262_a();
+                    float[] customColor = iblockstate.getBlock().getBeaconColorMultiplier(iblockstate, this.world, blockpos$mutableblockpos, getPos());
+                    if (customColor != null)
+                        afloat = customColor;
+                    else {
+                    tileentitybeacon$beamsegment.incrementHeight();
                     continue;
+                    }
                 }
 
-                afloat = EntitySheep.func_175513_a((EnumDyeColor)iblockstate.func_177229_b(BlockStainedGlassPane.field_176245_a));
+                else
+                afloat = EntitySheep.getDyeRgb((EnumDyeColor)iblockstate.getValue(BlockStainedGlassPane.COLOR));
             }
 
             if (!flag)
             {
-                afloat = new float[] {(tileentitybeacon$beamsegment.func_177263_b()[0] + afloat[0]) / 2.0F, (tileentitybeacon$beamsegment.func_177263_b()[1] + afloat[1]) / 2.0F, (tileentitybeacon$beamsegment.func_177263_b()[2] + afloat[2]) / 2.0F};
+                afloat = new float[] {(tileentitybeacon$beamsegment.getColors()[0] + afloat[0]) / 2.0F, (tileentitybeacon$beamsegment.getColors()[1] + afloat[1]) / 2.0F, (tileentitybeacon$beamsegment.getColors()[2] + afloat[2]) / 2.0F};
             }
 
-            if (Arrays.equals(afloat, tileentitybeacon$beamsegment.func_177263_b()))
+            if (Arrays.equals(afloat, tileentitybeacon$beamsegment.getColors()))
             {
-                tileentitybeacon$beamsegment.func_177262_a();
+                tileentitybeacon$beamsegment.incrementHeight();
             }
             else
             {
                 tileentitybeacon$beamsegment = new TileEntityBeacon.BeamSegment(afloat);
-                this.field_174909_f.add(tileentitybeacon$beamsegment);
+                this.beamSegments.add(tileentitybeacon$beamsegment);
             }
 
             flag = false;
         }
 
-        if (this.field_146015_k)
+        if (this.isComplete)
         {
-            for (int l1 = 1; l1 <= 4; this.field_146012_l = l1++)
+            for (int l1 = 1; l1 <= 4; this.levels = l1++)
             {
                 int i2 = k - l1;
 
@@ -179,9 +257,9 @@
                 {
                     for (int k1 = l - l1; k1 <= l + l1; ++k1)
                     {
-                        Block block = this.field_145850_b.func_180495_p(new BlockPos(j1, i2, k1)).func_177230_c();
+                        Block block = this.world.getBlockState(new BlockPos(j1, i2, k1)).getBlock();
 
-                        if (block != Blocks.field_150475_bE && block != Blocks.field_150340_R && block != Blocks.field_150484_ah && block != Blocks.field_150339_S)
+                        if (!block.isBeaconBase(this.world, new BlockPos(j1, i2, k1), getPos()))
                         {
                             flag1 = false;
                             break;
@@ -195,308 +273,308 @@
                 }
             }
 
-            if (this.field_146012_l == 0)
+            if (this.levels == 0)
             {
-                this.field_146015_k = false;
+                this.isComplete = false;
             }
         }
 
-        if (!this.field_145850_b.field_72995_K && this.field_146012_l == 4 && i < this.field_146012_l)
+        if (!this.world.isRemote && this.levels == 4 && i < this.levels)
         {
-            for (EntityPlayer entityplayer : this.field_145850_b.func_72872_a(EntityPlayer.class, (new AxisAlignedBB((double)j, (double)k, (double)l, (double)j, (double)(k - 4), (double)l)).func_72314_b(10.0D, 5.0D, 10.0D)))
+            for (EntityPlayer entityplayer : this.world.getEntitiesWithinAABB(EntityPlayer.class, (new AxisAlignedBB((double)j, (double)k, (double)l, (double)j, (double)(k - 4), (double)l)).expand(10.0D, 5.0D, 10.0D)))
             {
-                entityplayer.func_71029_a(AchievementList.field_187978_K);
+                entityplayer.addStat(AchievementList.FULL_BEACON);
             }
         }
     }
 
     @SideOnly(Side.CLIENT)
-    public List<TileEntityBeacon.BeamSegment> func_174907_n()
+    public List<TileEntityBeacon.BeamSegment> getBeamSegments()
     {
-        return this.field_174909_f;
+        return this.beamSegments;
     }
 
     @SideOnly(Side.CLIENT)
-    public float func_146002_i()
+    public float shouldBeamRender()
     {
-        if (!this.field_146015_k)
+        if (!this.isComplete)
         {
             return 0.0F;
         }
         else
         {
-            int i = (int)(this.field_145850_b.func_82737_E() - this.field_146016_i);
-            this.field_146016_i = this.field_145850_b.func_82737_E();
+            int i = (int)(this.world.getTotalWorldTime() - this.beamRenderCounter);
+            this.beamRenderCounter = this.world.getTotalWorldTime();
 
             if (i > 1)
             {
-                this.field_146014_j -= (float)i / 40.0F;
+                this.beamRenderScale -= (float)i / 40.0F;
 
-                if (this.field_146014_j < 0.0F)
+                if (this.beamRenderScale < 0.0F)
                 {
-                    this.field_146014_j = 0.0F;
+                    this.beamRenderScale = 0.0F;
                 }
             }
 
-            this.field_146014_j += 0.025F;
+            this.beamRenderScale += 0.025F;
 
-            if (this.field_146014_j > 1.0F)
+            if (this.beamRenderScale > 1.0F)
             {
-                this.field_146014_j = 1.0F;
+                this.beamRenderScale = 1.0F;
             }
 
-            return this.field_146014_j;
+            return this.beamRenderScale;
         }
     }
 
     @Nullable
-    public SPacketUpdateTileEntity func_189518_D_()
+    public SPacketUpdateTileEntity getUpdatePacket()
     {
-        return new SPacketUpdateTileEntity(this.field_174879_c, 3, this.func_189517_E_());
+        return new SPacketUpdateTileEntity(this.pos, 3, this.getUpdateTag());
     }
 
-    public NBTTagCompound func_189517_E_()
+    public NBTTagCompound getUpdateTag()
     {
-        return this.func_189515_b(new NBTTagCompound());
+        return this.writeToNBT(new NBTTagCompound());
     }
 
     @SideOnly(Side.CLIENT)
-    public double func_145833_n()
+    public double getMaxRenderDistanceSquared()
     {
         return 65536.0D;
     }
 
     @Nullable
-    private static Potion func_184279_f(int p_184279_0_)
+    private static Potion isBeaconEffect(int p_184279_0_)
     {
-        Potion potion = Potion.func_188412_a(p_184279_0_);
-        return field_184280_f.contains(potion) ? potion : null;
+        Potion potion = Potion.getPotionById(p_184279_0_);
+        return VALID_EFFECTS.contains(potion) ? potion : null;
     }
 
-    public void func_145839_a(NBTTagCompound p_145839_1_)
+    public void readFromNBT(NBTTagCompound compound)
     {
-        super.func_145839_a(p_145839_1_);
-        this.field_146013_m = func_184279_f(p_145839_1_.func_74762_e("Primary"));
-        this.field_146010_n = func_184279_f(p_145839_1_.func_74762_e("Secondary"));
-        this.field_146012_l = p_145839_1_.func_74762_e("Levels");
+        super.readFromNBT(compound);
+        this.primaryEffect = isBeaconEffect(compound.getInteger("Primary"));
+        this.secondaryEffect = isBeaconEffect(compound.getInteger("Secondary"));
+        this.levels = compound.getInteger("Levels");
     }
 
-    public NBTTagCompound func_189515_b(NBTTagCompound p_189515_1_)
+    public NBTTagCompound writeToNBT(NBTTagCompound compound)
     {
-        super.func_189515_b(p_189515_1_);
-        p_189515_1_.func_74768_a("Primary", Potion.func_188409_a(this.field_146013_m));
-        p_189515_1_.func_74768_a("Secondary", Potion.func_188409_a(this.field_146010_n));
-        p_189515_1_.func_74768_a("Levels", this.field_146012_l);
-        return p_189515_1_;
+        super.writeToNBT(compound);
+        compound.setInteger("Primary", Potion.getIdFromPotion(this.primaryEffect));
+        compound.setInteger("Secondary", Potion.getIdFromPotion(this.secondaryEffect));
+        compound.setInteger("Levels", this.levels);
+        return compound;
     }
 
-    public int func_70302_i_()
+    public int getSizeInventory()
     {
         return 1;
     }
 
-    public boolean func_191420_l()
+    public boolean isEmpty()
     {
-        return this.field_146011_o.func_190926_b();
+        return this.payment.isEmpty();
     }
 
-    public ItemStack func_70301_a(int p_70301_1_)
+    public ItemStack getStackInSlot(int index)
     {
-        return p_70301_1_ == 0 ? this.field_146011_o : ItemStack.field_190927_a;
+        return index == 0 ? this.payment : ItemStack.EMPTY;
     }
 
-    public ItemStack func_70298_a(int p_70298_1_, int p_70298_2_)
+    public ItemStack decrStackSize(int index, int count)
     {
-        if (p_70298_1_ == 0 && !this.field_146011_o.func_190926_b())
+        if (index == 0 && !this.payment.isEmpty())
         {
-            if (p_70298_2_ >= this.field_146011_o.func_190916_E())
+            if (count >= this.payment.getCount())
             {
-                ItemStack itemstack = this.field_146011_o;
-                this.field_146011_o = ItemStack.field_190927_a;
+                ItemStack itemstack = this.payment;
+                this.payment = ItemStack.EMPTY;
                 return itemstack;
             }
             else
             {
-                return this.field_146011_o.func_77979_a(p_70298_2_);
+                return this.payment.splitStack(count);
             }
         }
         else
         {
-            return ItemStack.field_190927_a;
+            return ItemStack.EMPTY;
         }
     }
 
-    public ItemStack func_70304_b(int p_70304_1_)
+    public ItemStack removeStackFromSlot(int index)
     {
-        if (p_70304_1_ == 0)
+        if (index == 0)
         {
-            ItemStack itemstack = this.field_146011_o;
-            this.field_146011_o = ItemStack.field_190927_a;
+            ItemStack itemstack = this.payment;
+            this.payment = ItemStack.EMPTY;
             return itemstack;
         }
         else
         {
-            return ItemStack.field_190927_a;
+            return ItemStack.EMPTY;
         }
     }
 
-    public void func_70299_a(int p_70299_1_, ItemStack p_70299_2_)
+    public void setInventorySlotContents(int index, ItemStack stack)
     {
-        if (p_70299_1_ == 0)
+        if (index == 0)
         {
-            this.field_146011_o = p_70299_2_;
+            this.payment = stack;
         }
     }
 
-    public String func_70005_c_()
+    public String getName()
     {
-        return this.func_145818_k_() ? this.field_146008_p : "container.beacon";
+        return this.hasCustomName() ? this.customName : "container.beacon";
     }
 
-    public boolean func_145818_k_()
+    public boolean hasCustomName()
     {
-        return this.field_146008_p != null && !this.field_146008_p.isEmpty();
+        return this.customName != null && !this.customName.isEmpty();
     }
 
-    public void func_145999_a(String p_145999_1_)
+    public void setName(String name)
     {
-        this.field_146008_p = p_145999_1_;
+        this.customName = name;
     }
 
-    public int func_70297_j_()
+    public int getInventoryStackLimit()
     {
         return 1;
     }
 
-    public boolean func_70300_a(EntityPlayer p_70300_1_)
+    public boolean isUsableByPlayer(EntityPlayer player)
     {
-        return this.field_145850_b.func_175625_s(this.field_174879_c) != this ? false : p_70300_1_.func_70092_e((double)this.field_174879_c.func_177958_n() + 0.5D, (double)this.field_174879_c.func_177956_o() + 0.5D, (double)this.field_174879_c.func_177952_p() + 0.5D) <= 64.0D;
+        return this.world.getTileEntity(this.pos) != this ? false : player.getDistanceSq((double)this.pos.getX() + 0.5D, (double)this.pos.getY() + 0.5D, (double)this.pos.getZ() + 0.5D) <= 64.0D;
     }
 
-    public void func_174889_b(EntityPlayer p_174889_1_)
+    public void openInventory(EntityPlayer player)
     {
     }
 
-    public void func_174886_c(EntityPlayer p_174886_1_)
+    public void closeInventory(EntityPlayer player)
     {
     }
 
-    public boolean func_94041_b(int p_94041_1_, ItemStack p_94041_2_)
+    public boolean isItemValidForSlot(int index, ItemStack stack)
     {
-        return p_94041_2_.func_77973_b() == Items.field_151166_bC || p_94041_2_.func_77973_b() == Items.field_151045_i || p_94041_2_.func_77973_b() == Items.field_151043_k || p_94041_2_.func_77973_b() == Items.field_151042_j;
+        return stack.getItem() != null && stack.getItem().isBeaconPayment(stack);
     }
 
-    public String func_174875_k()
+    public String getGuiID()
     {
         return "minecraft:beacon";
     }
 
-    public Container func_174876_a(InventoryPlayer p_174876_1_, EntityPlayer p_174876_2_)
+    public Container createContainer(InventoryPlayer playerInventory, EntityPlayer playerIn)
     {
-        return new ContainerBeacon(p_174876_1_, this);
+        return new ContainerBeacon(playerInventory, this);
     }
 
-    public int func_174887_a_(int p_174887_1_)
+    public int getField(int id)
     {
-        switch (p_174887_1_)
+        switch (id)
         {
             case 0:
-                return this.field_146012_l;
+                return this.levels;
             case 1:
-                return Potion.func_188409_a(this.field_146013_m);
+                return Potion.getIdFromPotion(this.primaryEffect);
             case 2:
-                return Potion.func_188409_a(this.field_146010_n);
+                return Potion.getIdFromPotion(this.secondaryEffect);
             default:
                 return 0;
         }
     }
 
-    public void func_174885_b(int p_174885_1_, int p_174885_2_)
+    public void setField(int id, int value)
     {
-        switch (p_174885_1_)
+        switch (id)
         {
             case 0:
-                this.field_146012_l = p_174885_2_;
+                this.levels = value;
                 break;
             case 1:
-                this.field_146013_m = func_184279_f(p_174885_2_);
+                this.primaryEffect = isBeaconEffect(value);
                 break;
             case 2:
-                this.field_146010_n = func_184279_f(p_174885_2_);
+                this.secondaryEffect = isBeaconEffect(value);
         }
     }
 
-    public int func_174890_g()
+    public int getFieldCount()
     {
         return 3;
     }
 
-    public void func_174888_l()
+    public void clear()
     {
-        this.field_146011_o = ItemStack.field_190927_a;
+        this.payment = ItemStack.EMPTY;
     }
 
-    public boolean func_145842_c(int p_145842_1_, int p_145842_2_)
+    public boolean receiveClientEvent(int id, int type)
     {
-        if (p_145842_1_ == 1)
+        if (id == 1)
         {
-            this.func_174908_m();
+            this.updateBeacon();
             return true;
         }
         else
         {
-            return super.func_145842_c(p_145842_1_, p_145842_2_);
+            return super.receiveClientEvent(id, type);
         }
     }
 
-    public int[] func_180463_a(EnumFacing p_180463_1_)
+    public int[] getSlotsForFace(EnumFacing side)
     {
         return new int[0];
     }
 
-    public boolean func_180462_a(int p_180462_1_, ItemStack p_180462_2_, EnumFacing p_180462_3_)
+    public boolean canInsertItem(int index, ItemStack itemStackIn, EnumFacing direction)
     {
         return false;
     }
 
-    public boolean func_180461_b(int p_180461_1_, ItemStack p_180461_2_, EnumFacing p_180461_3_)
+    public boolean canExtractItem(int index, ItemStack stack, EnumFacing direction)
     {
         return false;
     }
 
     static
     {
-        for (Potion[] apotion : field_146009_a)
+        for (Potion[] apotion : EFFECTS_LIST)
         {
-            Collections.addAll(field_184280_f, apotion);
+            Collections.addAll(VALID_EFFECTS, apotion);
         }
     }
 
     public static class BeamSegment
         {
-            private final float[] field_177266_a;
-            private int field_177265_b;
+            private final float[] colors;
+            private int height;
 
-            public BeamSegment(float[] p_i45669_1_)
+            public BeamSegment(float[] colorsIn)
             {
-                this.field_177266_a = p_i45669_1_;
-                this.field_177265_b = 1;
+                this.colors = colorsIn;
+                this.height = 1;
             }
 
-            protected void func_177262_a()
+            protected void incrementHeight()
             {
-                ++this.field_177265_b;
+                ++this.height;
             }
 
-            public float[] func_177263_b()
+            public float[] getColors()
             {
-                return this.field_177266_a;
+                return this.colors;
             }
 
             @SideOnly(Side.CLIENT)
-            public int func_177264_c()
+            public int getHeight()
             {
-                return this.field_177265_b;
+                return this.height;
             }
         }
 }
