--- ../src-base/minecraft/net/minecraft/item/ItemMonsterPlacer.java
+++ ../src-work/minecraft/net/minecraft/item/ItemMonsterPlacer.java
@@ -34,6 +34,7 @@
 import net.minecraft.world.World;
 import net.minecraftforge.fml.relauncher.Side;
 import net.minecraftforge.fml.relauncher.SideOnly;
+import org.bukkit.event.entity.CreatureSpawnEvent;
 
 public class ItemMonsterPlacer extends Item
 {
@@ -220,35 +221,39 @@
     }
 
     @Nullable
-    public static Entity func_77840_a(World p_77840_0_, @Nullable ResourceLocation p_77840_1_, double p_77840_2_, double p_77840_4_, double p_77840_6_)
-    {
-        if (p_77840_1_ != null && EntityList.field_75627_a.containsKey(p_77840_1_))
-        {
+    public static Entity spawnCreature(World world, @Nullable ResourceLocation minecraftkey, double d0, double d1, double d2, org.bukkit.event.entity.CreatureSpawnEvent.SpawnReason spawnReason) {
+        if (minecraftkey != null && EntityList.field_75627_a.containsKey(minecraftkey)) {
             Entity entity = null;
 
-            for (int i = 0; i < 1; ++i)
-            {
-                entity = EntityList.func_188429_b(p_77840_1_, p_77840_0_);
+            for (int i = 0; i < 1; ++i) {
+                entity = EntityList.func_188429_b(minecraftkey, world);
+                if (entity instanceof EntityLiving) {
+                    EntityLiving entityinsentient = (EntityLiving) entity;
 
-                if (entity instanceof EntityLiving)
-                {
-                    EntityLiving entityliving = (EntityLiving)entity;
-                    entity.func_70012_b(p_77840_2_, p_77840_4_, p_77840_6_, MathHelper.func_76142_g(p_77840_0_.field_73012_v.nextFloat() * 360.0F), 0.0F);
-                    entityliving.field_70759_as = entityliving.field_70177_z;
-                    entityliving.field_70761_aq = entityliving.field_70177_z;
-                    entityliving.func_180482_a(p_77840_0_.func_175649_E(new BlockPos(entityliving)), (IEntityLivingData)null);
-                    p_77840_0_.func_72838_d(entity);
-                    entityliving.func_70642_aH();
+                    entity.func_70012_b(d0, d1, d2, MathHelper.func_76142_g(world.field_73012_v.nextFloat() * 360.0F), 0.0F);
+                    entityinsentient.field_70759_as = entityinsentient.field_70177_z;
+                    entityinsentient.field_70761_aq = entityinsentient.field_70177_z;
+                    entityinsentient.func_180482_a(world.func_175649_E(new BlockPos(entityinsentient)), (IEntityLivingData) null);
+                    // CraftBukkit start - don't return an entity when CreatureSpawnEvent is canceled
+                    if (!world.addEntity(entity, spawnReason)) {
+                        entity = null;
+                    } else {
+                        entityinsentient.func_70642_aH();
+                    }
+                    // CraftBukkit end
                 }
             }
 
             return entity;
-        }
-        else
-        {
+        } else {
             return null;
         }
     }
+    @Nullable
+    public static Entity func_77840_a(World p_77840_0_, @Nullable ResourceLocation p_77840_1_, double p_77840_2_, double p_77840_4_, double p_77840_6_)
+    {
+        return spawnCreature(p_77840_0_,p_77840_1_,p_77840_2_,p_77840_4_,p_77840_6_, CreatureSpawnEvent.SpawnReason.SPAWNER_EGG);
+    }
 
     @SideOnly(Side.CLIENT)
     public void func_150895_a(Item p_150895_1_, CreativeTabs p_150895_2_, NonNullList<ItemStack> p_150895_3_)
